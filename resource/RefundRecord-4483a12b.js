import{d as a,m as e,o as n,$ as t,G as o,a as d,b as r,e as i,w as s,f as l,p as u,s as c,F as p,q as _,B as m}from"./index-c2ae2a0e.js";import{u as g,_ as f}from"./useTableColumns-dd067b4d.js";import"./index-c8577ae4.js";import"./index-3f0a4d2e.js";import{_ as h}from"./index-ef11d20c.js";import{u as k,a as y}from"./useSearchItems-c7d75cf3.js";import{u as b}from"./usePagination-c05046ed.js";import"./FolderOpenOutlined-fa174baf.js";import"./tool-d986b095.js";import"./RadioButton-bc4165ed.js";const j=a({__name:"RefundRecord",setup(a){const j=k([["input","order_sn","订单号"],["input","out_refund_no","退款单号"],["select","channel","支付渠道"],["select","refund_status","状态"],["dateRange","created_at_start-created_at_end",["退款申请时间","结束时间"]],["dateRange","refund_at_start-refund_at_end",["退款更新时间","结束时间"]]]),x=g([["订单号","order_sn"],["退款单号","out_refund_no"],["支付渠道","channel_name"],["支付金额","total_fee"],["退款金额","refund_fee"],["退款金额(余额)","wallet_fee"],["状态","refund_status_name"],["退款申请时间","created_at"],["退款更新时间","refund_at"],["备注","remark"]]),C=e({handlingId:0,dataSource:[],loading:!1,query:{},pagination:b(),selectedRowKeys:[],batchs:[{label:"批量",value:""}]});n((()=>{q()}));const q=()=>{C.loading=!0,t.finance.refund.list({page:C.pagination.current,page_size:C.pagination.pageSize,...C.query}).then((a=>{var e;C.loading=!1,C.dataSource=a.data.items,1===C.pagination.current&&(C.pagination.total=+(null==(e=a.data)?void 0:e.count),y(j,"channel",a.data.channel_map),y(j,"refund_status",a.data.refund_status_map))}))},v=a=>{C.pagination={...C.pagination,...a},q()},S=a=>{C.query=a,C.pagination={...C.pagination,current:1},q()};return(a,e)=>{const n=o("Export"),g=o("Search"),k=h,y=m,b=f;return d(),r("div",null,[i(g,{"search-options":l(j),onOnSearch:S},{default:s((()=>[i(n,{api:l(t).finance.refund.export,query:l(C).query},null,8,["api","query"])])),_:1},8,["search-options"]),i(b,{"row-key":"id","data-source":l(C).dataSource,columns:l(x),scroll:{x:"max-content"},loading:l(C).loading,pagination:l(C).pagination,onChange:v},{bodyCell:s((({column:e,record:n})=>["enabled"===e.key?(d(),u(k,{key:0,checked:n.enabled,"onUpdate:checked":a=>n.enabled=a,"un-checked-value":0,"checked-value":1,onChange:a=>(async a=>{await t.product.material.status({id:a.id,enabled:a.enabled}).catch((e=>{a.enabled=0===a.enabled?1:0}))})(n)},null,8,["checked","onUpdate:checked","onChange"])):c("",!0),"operate"===e.key?(d(),r(p,{key:1},[i(y,{type:"link",onClick:a=>{l(C).handlingId=n.id}},{default:s((()=>[_(" 编辑 ")])),_:2},1032,["onClick"]),i(y,{type:"link",danger:"",onClick:e=>a.del(n.id)},{default:s((()=>[_(" 删除 ")])),_:2},1032,["onClick"])],64)):c("",!0)])),_:1},8,["data-source","columns","loading","pagination"])])}}});export{j as default};
