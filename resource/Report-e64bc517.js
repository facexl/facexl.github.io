import{d as e,r as a,m as t,o as l,$ as s,H as n,a as d,b as o,e as r,w as i,f as u,g as p,x as m,p as c,E as _,B as v,F as f,n as b,q as y,z as j,I as g,A as h,X as x,_ as k}from"./index-c2ae2a0e.js";import{R as Y,_ as D}from"./index-c8577ae4.js";import{_ as H}from"./index-ef11d20c.js";import{_ as U}from"./index-f5618084.js";import{d as q}from"./dtool-b3945d0c.js";import"./Upload-053b6740.js";import"./index-b1df7cdb.js";import"./index-00d344de.js";import"./FolderOpenOutlined-fa174baf.js";import"./DeleteOutlined-1e1ff134.js";const w={style:{"padding-top":"50px"}},F={class:"btn-block"},L=k(e({__name:"Report",setup(e){const k=a(),L=t({loading:!1,btnLoading:!1}),M=t({title:"",content:"",enabled:0,"start_at-end_at":[],type:1});l((()=>{O()}));const O=()=>{L.loading=!0,s.set.report.detail().then((e=>{q(e.data.detail).combinDayjs(["start_at","end_at"]).insertForm(M)}))},R=()=>{k.value.validate().then((async()=>{L.btnLoading=!0,await s.set.report.save(q(M).splitDayjs(["start_at","end_at"],"YYYY-MM-DD HH:mm:ss").end())})).catch((e=>{console.log(e)})).finally((e=>{L.btnLoading=!1}))};return(e,a)=>{const t=g,l=h,q=U,O=x,z=H,B=Y,C=D,I=_,A=v,E=n("permission");return d(),o("div",w,[r(I,{ref_key:"formRef",ref:k,model:u(M),autocomplete:"off","label-col":{span:4},"wrapper-col":{span:17}},{default:i((()=>[r(l,{label:"标题",name:"title",required:""},{default:i((()=>[r(t,{value:u(M).title,"onUpdate:value":a[0]||(a[0]=e=>u(M).title=e)},null,8,["value"])])),_:1}),r(l,{name:"content",label:"内容",required:""},{default:i((()=>[r(q,{value:u(M).content,"onUpdate:value":a[1]||(a[1]=e=>u(M).content=e)},null,8,["value"])])),_:1}),r(l,{name:"start_at-end_at",label:"生效时间",required:""},{default:i((()=>[r(O,{value:u(M)["start_at-end_at"],"onUpdate:value":a[2]||(a[2]=e=>u(M)["start_at-end_at"]=e),"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",placeholder:["开始时间","结束时间"]},null,8,["value"])])),_:1}),r(l,{label:"是否启用",name:"enabled"},{default:i((()=>[r(z,{checked:u(M).enabled,"onUpdate:checked":a[3]||(a[3]=e=>u(M).enabled=e),"un-checked-value":0,"checked-value":1},null,8,["checked"])])),_:1}),r(l,{name:"type",label:"类型",required:""},{default:i((()=>[r(C,{value:u(M).type,"onUpdate:value":a[4]||(a[4]=e=>u(M).type=e)},{default:i((()=>[(d(),o(f,null,b([{value:1,label:"可关闭"},{value:2,label:"不可关闭"}],(e=>r(B,{key:e.value,value:e.value},{default:i((()=>[y(j(e.label),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value"])])),_:1})])),_:1},8,["model"]),p("div",F,[m((d(),c(A,{type:"primary",loading:u(L).btnLoading,onClick:R},{default:i((()=>[y(" 保存 ")])),_:1},8,["loading"])),[[E,[u(s).set.report.save]]])])])}}}),[["__scopeId","data-v-9df74ab9"]]);export{L as default};
