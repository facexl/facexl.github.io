import{d as e,m as t,l as a,o,$ as r,a as l,b as n,e as i,w as s,F as d,n as c,f as u,p,q as _,z as f,V as m,W as y,Z as v,a8 as g,a9 as h,i as b,k,s as w,B as x,r as S,M as C,a1 as L,A as T,I as j,C as U,D as E,E as O,S as A,h as R,g as M,a0 as F,aa as q,x as N,y as I,a7 as P}from"./index-c2ae2a0e.js";import{R as B,_ as D}from"./index-c8577ae4.js";import{u as G,_ as H}from"./useTableColumns-dd067b4d.js";import"./index-3f0a4d2e.js";import{_ as J}from"./index-8036da2a.js";import{C as z}from"./index-1dfc023a.js";import{_ as $}from"./UploadVideo-3da04ded.js";import{_ as K}from"./Upload-053b6740.js";import{_ as V}from"./index-00d344de.js";import{D as Y,_ as W}from"./index-923a8554.js";import{_ as X}from"./Transport.vue_vue_type_script_setup_true_lang-724b9997.js";import{_ as Z}from"./index-975d3375.js";import{d as Q}from"./dtool-b3945d0c.js";import{b as ee}from"./useRequest-34a5e624.js";import{d as te}from"./index-a09a23de.js";import{_ as ae}from"./index-ef11d20c.js";import{B as oe}from"./big-9da3d0c1.js";import"./FolderOpenOutlined-fa174baf.js";import"./tool-d986b095.js";import"./RadioButton-bc4165ed.js";import"./index-b1df7cdb.js";import"./DeleteOutlined-1e1ff134.js";const re=e({__name:"ChooseAddress",props:{province_code:{type:Number,default:void 0},city_code:{type:Number,default:void 0},district_code:{type:Number,default:void 0},disabled:{type:Boolean,default:!1}},emits:["update:province_code","update:city_code","update:district_code"],setup(e,{expose:g,emit:h}){const b=e;g({getAddressInfo:()=>{const e=(e,t)=>{if(!e)return"";const a=t.find((t=>t.code===e));if(!a)throw v.error("code转地址失败"),console.log(e,t),"code转地址失败";return a.name};return{...w,province:e(w.province_code,k.proviceList),city:e(w.city_code,k.cityList),district:e(w.district_code,k.districtList)}}});const k=t({proviceList:[],cityList:[],districtList:[]}),w=t({province_code:void 0,city_code:void 0,district_code:void 0});a([()=>b.province_code,()=>b.city_code,()=>b.district_code],(()=>{w.province_code=b.province_code,w.city_code=b.city_code,w.district_code=b.district_code})),a([()=>w.province_code,()=>w.city_code,()=>w.district_code],(()=>{h("update:province_code",w.province_code),h("update:city_code",w.city_code),h("update:district_code",w.district_code)})),o((()=>{x(1)})),a((()=>w.province_code),((e,t)=>{e?(x(2,e),void 0!==t&&(w.city_code=void 0,w.district_code=void 0)):(w.city_code=void 0,w.district_code=void 0)})),a((()=>w.city_code),((e,t)=>{e?(x(3,e),void 0!==t&&(w.district_code=void 0)):w.district_code=void 0}));const x=(e,t)=>{let a=(e=>{let t="provice";return 2===e&&(t="city"),3===e&&(t="district"),t})(e);r.common.getAreaList({level:e,code:t,is_select:1}).then((e=>{k[a+"List"]=e.data}))};return(t,a)=>{const o=m,r=y;return l(),n("div",null,[i(r,{value:u(w).province_code,"onUpdate:value":a[0]||(a[0]=e=>u(w).province_code=e),style:{width:"140px","margin-right":"8px"},placeholder:"省",class:"flex-no-shink",disabled:e.disabled},{default:s((()=>[(l(!0),n(d,null,c(u(k).proviceList,(e=>(l(),p(o,{key:e.code},{default:s((()=>[_(f(e.name),1)])),_:2},1024)))),128))])),_:1},8,["value","disabled"]),i(r,{value:u(w).city_code,"onUpdate:value":a[1]||(a[1]=e=>u(w).city_code=e),style:{width:"140px","margin-right":"8px"},placeholder:"市",class:"flex-no-shink",disabled:e.disabled},{default:s((()=>[(l(!0),n(d,null,c(u(k).cityList,(e=>(l(),p(o,{key:e.code},{default:s((()=>[_(f(e.name),1)])),_:2},1024)))),128))])),_:1},8,["value","disabled"]),i(r,{value:u(w).district_code,"onUpdate:value":a[2]||(a[2]=e=>u(w).district_code=e),style:{width:"140px","margin-right":"8px"},placeholder:"区",class:"flex-no-shink",disabled:e.disabled},{default:s((()=>[(l(!0),n(d,null,c(u(k).districtList,(e=>(l(),p(o,{key:e.code},{default:s((()=>[_(f(e.name),1)])),_:2},1024)))),128))])),_:1},8,["value","disabled"])])}}});var le={exports:{}};
/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */const ne=h(le.exports=function(){return function(){var e={686:function(e,t,a){a.d(t,{default:function(){return w}});var o=a(279),r=a.n(o),l=a(370),n=a.n(l),i=a(817),s=a.n(i);function d(e){try{return document.execCommand(e)}catch(t){return!1}}var c=function(e){var t=s()(e);return d("cut"),t},u=function(e,t){var a=function(e){var t="rtl"===document.documentElement.getAttribute("dir"),a=document.createElement("textarea");a.style.fontSize="12pt",a.style.border="0",a.style.padding="0",a.style.margin="0",a.style.position="absolute",a.style[t?"right":"left"]="-9999px";var o=window.pageYOffset||document.documentElement.scrollTop;return a.style.top="".concat(o,"px"),a.setAttribute("readonly",""),a.value=e,a}(e);t.container.appendChild(a);var o=s()(a);return d("copy"),a.remove(),o},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},a="";return"string"==typeof e?a=u(e,t):e instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==e?void 0:e.type)?a=u(e.value,t):(a=s()(e),d("copy")),a};function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.action,a=void 0===t?"copy":t,o=e.container,r=e.target,l=e.text;if("copy"!==a&&"cut"!==a)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==r){if(!r||"object"!==_(r)||1!==r.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===a&&r.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===a&&(r.hasAttribute("readonly")||r.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return l?p(l,{container:o}):r?"cut"===a?c(r):p(r,{container:o}):void 0};function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,o,r,l=h(e);if(t){var n=h(this).constructor;a=Reflect.construct(l,arguments,n)}else a=l.apply(this,arguments);return o=this,!(r=a)||"object"!==m(r)&&"function"!=typeof r?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(o):r}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){var a="data-clipboard-".concat(e);if(t.hasAttribute(a))return t.getAttribute(a)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(l,e);var t,a,o,r=g(l);function l(e,t){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(a=r.call(this)).resolveOptions(t),a.listenClick(e),a}return t=l,a=[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===m(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=n()(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget,a=this.action(t)||"copy",o=f({action:a,container:this.container,target:this.target(t),text:this.text(t)});this.emit(o?"success":"error",{action:a,text:o,trigger:t,clearSelection:function(){t&&t.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(e){return b("action",e)}},{key:"defaultTarget",value:function(e){var t=b("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return b("text",e)}},{key:"destroy",value:function(){this.listener.destroy()}}],o=[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return p(e,t)}},{key:"cut",value:function(e){return c(e)}},{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,a=!!document.queryCommandSupported;return t.forEach((function(e){a=a&&!!document.queryCommandSupported(e)})),a}}],a&&y(t.prototype,a),o&&y(t,o),l}(r()),w=k},828:function(e){if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},438:function(e,t,a){var o=a(828);function r(e,t,a,o,r){var n=l.apply(this,arguments);return e.addEventListener(a,n,r),{destroy:function(){e.removeEventListener(a,n,r)}}}function l(e,t,a,r){return function(a){a.delegateTarget=o(a.target,t),a.delegateTarget&&r.call(e,a)}}e.exports=function(e,t,a,o,l){return"function"==typeof e.addEventListener?r.apply(null,arguments):"function"==typeof a?r.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return r(e,t,a,o,l)})))}},879:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var a=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===a||"[object HTMLCollection]"===a)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},370:function(e,t,a){var o=a(879),r=a(438);e.exports=function(e,t,a){if(!e&&!t&&!a)throw new Error("Missing required arguments");if(!o.string(t))throw new TypeError("Second argument must be a String");if(!o.fn(a))throw new TypeError("Third argument must be a Function");if(o.node(e))return function(e,t,a){return e.addEventListener(t,a),{destroy:function(){e.removeEventListener(t,a)}}}(e,t,a);if(o.nodeList(e))return function(e,t,a){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,a)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,a)}))}}}(e,t,a);if(o.string(e))return function(e,t,a){return r(document.body,e,t,a)}(e,t,a);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(e){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var a=e.hasAttribute("readonly");a||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),a||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var o=window.getSelection(),r=document.createRange();r.selectNodeContents(e),o.removeAllRanges(),o.addRange(r),t=o.toString()}return t}},279:function(e){function t(){}t.prototype={on:function(e,t,a){var o=this.e||(this.e={});return(o[e]||(o[e]=[])).push({fn:t,ctx:a}),this},once:function(e,t,a){var o=this;function r(){o.off(e,r),t.apply(a,arguments)}return r._=t,this.on(e,r,a)},emit:function(e){for(var t=[].slice.call(arguments,1),a=((this.e||(this.e={}))[e]||[]).slice(),o=0,r=a.length;o<r;o++)a[o].fn.apply(a[o].ctx,t);return this},off:function(e,t){var a=this.e||(this.e={}),o=a[e],r=[];if(o&&t)for(var l=0,n=o.length;l<n;l++)o[l].fn!==t&&o[l].fn._!==t&&r.push(o[l]);return r.length?a[e]=r:delete a[e],this}},e.exports=t,e.exports.TinyEmitter=t}},t={};function a(o){if(t[o])return t[o].exports;var r=t[o]={exports:{}};return e[o](r,r.exports,a),r.exports}return a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a(686)}().default}()),ie={class:"mt8px"},se=e({__name:"RemarkTable",props:{dataSource:Array},setup(e){const t=G([["备注人","operator_name",100],["备注信息","operate_remark"],["备注时间","created_at",200]]);return(a,o)=>{const r=H;return l(),n("div",ie,[i(r,{"row-key":"id","data-source":e.dataSource,columns:u(t),scroll:{x:"max-content"},pagination:!1},null,8,["data-source","columns"])])}}}),de=e({__name:"OperateDetail",props:{show:Boolean,row:Object},emits:[],setup(e,{emit:t}){const a=b(e,"show",t),o=G([["字段","label"],["操作前","old_value"],["操作后","new_value"]]);return(t,r)=>{const d=H,c=Z;return l(),n("div",null,[i(c,{visible:u(a),"onUpdate:visible":r[0]||(r[0]=e=>k(a)?a.value=e:null),title:"详情",placement:"right",width:"50%"},{default:s((()=>[i(d,{"row-key":"id","data-source":e.row,columns:u(o),scroll:{x:"max-content"},pagination:!1},null,8,["data-source","columns"])])),_:1},8,["visible"])])}}}),ce={class:"mt8px"},ue=e({__name:"OperateTable",props:{dataSource:Array},setup(e){const a=t({show:!1,row:[]}),o=G([["操作人","operator_name",100],["操作内容","content"],["操作时间","created_at",120],["操作","operate",120]]);return(t,r)=>{const d=x,c=H;return l(),n("div",ce,[i(c,{"row-key":"id","data-source":e.dataSource,columns:u(o),scroll:{x:"max-content"},pagination:!1},{bodyCell:s((({column:e,record:t})=>["operate"===e.key?(l(),p(d,{key:0,type:"link",onClick:e=>{u(a).row=t.operate_items,u(a).show=!0}},{default:s((()=>[_(" 查看详情 ")])),_:2},1032,["onClick"])):w("",!0)])),_:1},8,["data-source","columns"]),i(de,{show:u(a).show,"onUpdate:show":r[0]||(r[0]=e=>u(a).show=e),row:u(a).row},null,8,["show","row"])])}}}),pe=e({__name:"ModLog",props:{show:Boolean,data:Object},emits:["fresh"],setup(e,{emit:o}){const v=e,g=S(),h=b(v,"show",o),w=ee();a(h,(async e=>{e&&(g.value&&g.value.resetFields(),R.is_confirm=0,L((()=>{Q(v.data).insertForm(R)})))}));const x=t({loading:!1,confirmLoading:!1}),R=t({logistics_sn:"",logistics_code:void 0,is_confirm:0}),M=()=>{g.value.validate().then((async e=>{x.confirmLoading=!0;try{const e=await r.afterSale.sale.modLog({...R,id:v.data.id});if(1===e.data.is_need_confirm)return void te.confirm({title:"提示",content:e.data.confrim_txt,okText:"确认",cancelText:"取消",async onOk(){R.is_confirm=1,M()}});x.confirmLoading=!1,h.value=!1,o("fresh")}catch(t){x.confirmLoading=!1}}))};return(e,t)=>{const a=m,o=y,r=T,v=j,b=U,S=E,L=O,F=A,q=C;return l(),n("div",null,[i(q,{visible:u(h),"onUpdate:visible":t[3]||(t[3]=e=>k(h)?h.value=e:null),width:"650px",title:"修改寄回信息","confirm-loading":u(x).confirmLoading,onOk:M},{default:s((()=>[i(F,{spinning:u(x).loading,"onUpdate:spinning":t[2]||(t[2]=e=>u(x).loading=e)},{default:s((()=>[i(L,{ref_key:"formRef",ref:g,model:u(R),"label-col":{span:6},"wrapper-col":{span:18}},{default:s((()=>[i(S,null,{default:s((()=>[i(b,{span:18},{default:s((()=>[i(r,{name:"logistics_code",label:"物流编码",required:""},{default:s((()=>[i(o,{value:u(R).logistics_code,"onUpdate:value":t[0]||(t[0]=e=>u(R).logistics_code=e),placeholder:"请选择",style:{width:"68%"}},{default:s((()=>[(l(!0),n(d,null,c(u(w),(e=>(l(),p(a,{key:e.code,value:e.code},{default:s((()=>[_(f(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),i(r,{name:"logistics_sn",label:"物流单号",required:""},{default:s((()=>[i(v,{value:u(R).logistics_sn,"onUpdate:value":t[1]||(t[1]=e=>u(R).logistics_sn=e),style:{width:"68%"}},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["spinning"])])),_:1},8,["visible","confirm-loading"])])}}}),_e=e({__name:"ModOutLog",props:{show:Boolean,data:Object,isMod:Boolean},emits:["fresh"],setup(e,{emit:o}){const v=e,g=S(),h=b(v,"show",o),w=ee();a(h,(async e=>{e&&g.value&&g.value.resetFields()}));const x=t({loading:!1,confirmLoading:!1}),L=t({logistics_sn:"",logistics_code:void 0}),R=()=>{g.value.validate().then((async e=>{x.confirmLoading=!0;try{let e=r.afterSale.sale.modOutLog;v.isMod&&(e=r.afterSale.sale.modSend),await e({...L,id:v.data.id}),x.confirmLoading=!1,h.value=!1,o("fresh")}catch(t){x.confirmLoading=!1}}))};return(e,t)=>{const a=m,o=y,r=T,v=j,b=U,S=E,M=O,F=A,q=C;return l(),n("div",null,[i(q,{visible:u(h),"onUpdate:visible":t[3]||(t[3]=e=>k(h)?h.value=e:null),width:"650px",title:"寄出信息","confirm-loading":u(x).confirmLoading,onOk:R},{default:s((()=>[i(F,{spinning:u(x).loading,"onUpdate:spinning":t[2]||(t[2]=e=>u(x).loading=e)},{default:s((()=>[i(M,{ref_key:"formRef",ref:g,model:u(L),"label-col":{span:6},"wrapper-col":{span:18}},{default:s((()=>[i(S,null,{default:s((()=>[i(b,{span:18},{default:s((()=>[i(r,{name:"logistics_code",label:"物流编码",required:""},{default:s((()=>[i(o,{value:u(L).logistics_code,"onUpdate:value":t[0]||(t[0]=e=>u(L).logistics_code=e),placeholder:"请选择",style:{width:"68%"}},{default:s((()=>[(l(!0),n(d,null,c(u(w),(e=>(l(),p(a,{key:e.code,value:e.code},{default:s((()=>[_(f(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),i(r,{name:"logistics_sn",label:"物流单号",required:""},{default:s((()=>[i(v,{value:u(L).logistics_sn,"onUpdate:value":t[1]||(t[1]=e=>u(L).logistics_sn=e),style:{width:"68%"}},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["spinning"])])),_:1},8,["visible","confirm-loading"])])}}}),fe=e({__name:"AwardRemark",props:{show:Boolean,id:String,row:Object},emits:["submit"],setup(e,{emit:o}){const r=e,d=S(),c=b(r,"show",o);a(c,(async e=>{e&&(d.value&&d.value.resetFields(),L((()=>{Q(r.row).insertForm(_)})))}));const p=t({loading:!1,confirmLoading:!1}),_=t({deduct_remark:""}),f=()=>{d.value.validate().then((async e=>{p.confirmLoading=!0;try{o("submit",{..._,id:r.id}),p.confirmLoading=!1,c.value=!1}catch(t){p.confirmLoading=!1}}))};return(e,t)=>{const a=j,o=T,r=U,m=E,y=O,v=A,g=C;return l(),n("div",null,[i(g,{visible:u(c),"onUpdate:visible":t[2]||(t[2]=e=>k(c)?c.value=e:null),width:"650px",title:"备注","confirm-loading":u(p).confirmLoading,onOk:f},{default:s((()=>[i(v,{spinning:u(p).loading,"onUpdate:spinning":t[1]||(t[1]=e=>u(p).loading=e)},{default:s((()=>[i(y,{ref_key:"formRef",ref:d,model:u(_),"label-col":{span:6},"wrapper-col":{span:18}},{default:s((()=>[i(m,null,{default:s((()=>[i(r,{span:18},{default:s((()=>[i(o,{name:"deduct_remark",label:"备注",required:""},{default:s((()=>[i(a,{value:u(_).deduct_remark,"onUpdate:value":t[0]||(t[0]=e=>u(_).deduct_remark=e)},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["spinning"])])),_:1},8,["visible","confirm-loading"])])}}}),me=["innerHTML"],ye={class:"mt8px"},ve={key:0},ge={key:1},he=M("span",null,"回收成功",-1),be={key:2},ke={key:1},we=e({__name:"SaleAward",props:{status:Number,sale_suggest:String},emits:["submit"],setup(e,{expose:a,emit:c}){const m=R().params.id,y=t({dataSource:[],showRemark:!1,handlingId:0,record:{}}),v=G([["奖品名称","award_name"],["奖品类型","prize_type_name"],["奖品状态","status_name"],["关联商品订单","order_sn"],["商品订单状态","order_status_name"],["回收操作","deduct_status"],["客服备注","deduct_remark"],["操作","operate"]]);a({getRes:()=>{if(0!==y.dataSource.length)return JSON.stringify(y.dataSource.map((e=>({id:e.id,deduct_id:e.deduct_id,deduct_status:e.deduct_status,deduct_flag:e.deduct_flag,deduct_remark:e.deduct_remark,deduct_type:e.deduct_type}))))}});const g=e=>{y.dataSource.forEach((t=>{t.id===e.id&&(t.deduct_remark=e.deduct_remark)}))};return o((async()=>{const e=await r.afterSale.sale.awardList({id:m});e.data.items.forEach((e=>{e.deduct_flag=0===e.deduct_status?1:0})),y.dataSource=e.data.items})),(t,a)=>{const o=ae,r=x,c=H,m=z;return u(y).dataSource.length?(l(),p(m,{key:0,style:{"margin-top":"16px"},title:"订单抽奖信息"},{default:s((()=>[M("div",{innerHTML:e.sale_suggest},null,8,me),M("div",ye,[i(c,{"row-key":"id","data-source":u(y).dataSource,columns:u(v),scroll:{x:"max-content"},pagination:!1},{bodyCell:s((({column:t,record:a})=>["deduct_status"===t.key?(l(),n(d,{key:0},[0===a.deduct_status?(l(),n("div",ve,[i(o,{checked:a.deduct_flag,"onUpdate:checked":e=>a.deduct_flag=e,"un-checked-value":0,"checked-value":1,onChange:e=>(e=>{1!==e.deduct_flag&&te.confirm({title:"确定需要回收奖品?",content:"奖品的回收流程将在【确认退款】、【确认退货】时，自动执行。若奖品不支持回收的情况下，但工作人员已线下处理，则可通过编辑备注的形式进行相关说明",okText:"确认",cancelText:"取消",async onOk(){},onCancel(){e.deduct_flag=1}})})(a)},null,8,["checked","onUpdate:checked","onChange"])])):2===a.deduct_status?(l(),n("div",ge,[he,M("span",null,f(a.deduct_status_remark),1)])):(l(),n("div",be,[M("span",null,f(a.deduct_status_name),1)]))],64)):w("",!0),"operate"===t.key?(l(),n(d,{key:1},[1===e.status?(l(),p(r,{key:0,type:"link",onClick:e=>{u(y).showRemark=!0,u(y).handlingId=a.id,u(y).row=a}},{default:s((()=>[_(" 备注 ")])),_:2},1032,["onClick"])):(l(),n("span",ke,"--"))],64)):w("",!0)])),_:1},8,["data-source","columns"]),i(fe,{id:u(y).handlingId,show:u(y).showRemark,"onUpdate:show":a[0]||(a[0]=e=>u(y).showRemark=e),row:u(y).row,onSubmit:g},null,8,["id","show","row"])])])),_:1})):w("",!0)}}}),xe={class:"AfterSaleDetail-container card-container"},Se=["src"],Ce={key:0},Le={key:1},Te={key:0},je={key:1},Ue={class:"danger-color"},Ee=M("p",{class:"ant-required"}," 请选择需要处理的商品 ",-1),Oe={key:0},Ae=M("span",null,"元",-1),Re={key:0},Me=M("span",null,"元",-1),Fe={key:0},qe={key:1,class:"align-center"},Ne=M("span",null,"元",-1),Ie={class:"flex"},Pe=M("span",{class:"tips"},"用户备注提交后将会展示C端展示",-1),Be=M("span",{class:"tips"},"售后备注提交后将会在下列表展示",-1),De={key:1,class:"flex-center mt16px"},Ge={key:2,class:"flex-center mt16px"},He=e({__name:"AfterSaleDetail",setup(e){const m=F("enums"),{toClipboard:y}=(e=>{const t=void 0===(null==e?void 0:e.appendToBody)||e.appendToBody;return{toClipboard:(e,a)=>new Promise(((o,r)=>{const l=document.createElement("button"),n=new ne(l,{text:()=>e,action:()=>"copy",container:void 0!==a?a:document.body});n.on("success",(e=>{n.destroy(),o(e)})),n.on("error",(e=>{n.destroy(),r(e)})),t&&document.body.appendChild(l),l.click(),t&&document.body.removeChild(l)}))}})(),g=R().params.id,h=S(),b=S(),k=t({loading:!1,goods:[],goodsSelected:[],award_deduct:{},logistics_info:{platform:{},user:{}},money_gone:{},normal_traces:[],operate_traces:[],order:{},return_address:{},sale:{type_name:"",images:[]},showTransoprt:!1,handlingRow:{},rebateEnums:[],isFirstCalGoodsFee:!0,showModOutLog:!1,showModLog:!1,isModMaterial:!1,isFirsetCalFright:!0,freshSaleAward:!1}),C=t({type:void 0,goods_fee:0,add_fee:"",is_quality:void 0,is_deduct_rebate:void 0,is_deduct_integral:void 0,is_return_coupon:void 0,freight_type:0,freight_fee:0,remark:"",operate_remark:""}),L=t({receiver_province_code:void 0,receiver_city_code:void 0,receiver_district_code:void 0,receiver_address:"",receiver_name:"",receiver_phone:"",receiver_remark:""}),T=t({complete_description:"",complete_videos:[],complete_images:[],complete_updated_at:"",complete_required_name:""}),U=G([["商品ID","goods_id"],["商品图片","sku_thumb"],["商品名称","goods_title",150],["商品规格","sku_name",150],["商品价格","price"],["七天无理由退换","is_no_reason_name"],["购买数量","nums"],["可售后数量","combin_nums"],["售后数量","apply_nums",180]]),E=S(!1),O=S(!1),Z=e=>{const t=e.target.value;t!==k.sale.type?O.value=!0:O.value=!1,ee(t)},ee=e=>{0===e&&(C.is_deduct_integral=1,C.is_deduct_rebate=1,C.is_quality=0,C.is_return_coupon=0,C.freight_type=2,C.freight_fee=0),5===e&&(C.is_deduct_integral=0,C.is_deduct_rebate=0,C.is_quality=0,C.is_return_coupon=0,C.freight_type=2,C.freight_fee=0),1===e&&(C.is_quality=0,C.is_deduct_rebate=1,C.is_deduct_integral=1,C.is_return_coupon=0,C.freight_type=2,C.freight_fee=0),2===e&&(C.is_quality=0,C.is_deduct_rebate=0,C.is_deduct_integral=0,C.is_return_coupon=0,C.freight_type=2,C.freight_fee=0),6===e&&(C.is_quality=0,C.is_deduct_rebate=0,C.is_deduct_integral=0,C.is_return_coupon=0,C.freight_type=2,C.freight_fee=0)};a([()=>C.is_quality,()=>L.receiver_province_code,()=>L.receiver_city_code,()=>L.receiver_district_code,()=>C.type],(()=>{console.log("trigger"),1!==k.sale.status&&k.isFirsetCalFright?k.isFirsetCalFright=!1:1===C.type||2===C.type?ae():C.freight_fee=0}),{deep:!0});const ae=q((async()=>{const{receiver_province_code:e,receiver_city_code:t,receiver_district_code:a}=L;if(!e||!t)return void(C.freight_fee=0);const o=await r.afterSale.sale.preFreight({id:g,receiver_province_code:e,receiver_city_code:t,receiver_district_code:a,is_quality:C.is_quality});C.freight_fee=o.data.deduct_fee}),500),le=()=>{k.isModMaterial=!0,E.value=!1};o((()=>{me()})),a([()=>k.goods,()=>k.goodsSelected],(()=>{if(1!==k.sale.status&&k.isFirstCalGoodsFee)return void(k.isFirstCalGoodsFee=!1);const e=de();0!==e.length?(C.goods_fee=e.reduce(((e,t)=>e=+oe(e).plus(t.price).times(+t.apply_nums)),0),C.goods_fee>k.order.calGoodsRefundMax&&(C.goods_fee=k.order.calGoodsRefundMax),console.log("商品退款计算结果:",C.goods_fee)):C.goods_fee=0}),{deep:!0});const ie=async()=>{await r.afterSale.sale.sureReceive({id:g,freight_type:C.freight_type,freight_fee:+C.freight_fee}),me()},de=()=>k.goods.filter((e=>k.goodsSelected.includes(e.id))),ce=async()=>{await r.afterSale.sale.refuse({id:g,remark:C.remark,operate_remark:C.operate_remark}),me()},fe=async e=>{try{await y(e),v.success("复制成功")}catch(t){console.error(t),v.error("复制失败")}},me=async()=>{k.loading=!0,k.isFirstCalGoodsFee=!0,k.isModMaterial=!1,O.value=!1,k.isFirsetCalFright=!0,k.freshSaleAward=!1;const e=await r.afterSale.sale.detail({id:g});var t;e.data.goods.forEach((e=>{e.combin_nums=e.apply_nums+e.can_return_nums})),k.loading=!1,k.goodsSelected=e.data.goods.filter((e=>e.apply_nums&&e.apply_nums>0)).map((e=>e.id)),Q().insertPartForm(k,e.data).insertPartForm(L,e.data.return_address),Q(e.data.sale).arrToUrlArr(["complete_videos","complete_images"]).insertForm(C).insertForm(T),k.rebateEnums=[{label:`是(￥${k.sale.one_goods_rebate})`,value:1},{label:"否",value:0}],1===e.data.sale.status&&ee(e.data.sale.type),(t=k.order).calGoodsRefundMax=+oe(t.actual_fee).minus(t.refund_fee).minus(t.freight_fee).minus(t.insurance_fee),console.log("calGoodsRefundMax:",t.calGoodsRefundMax),[1].includes(k.sale.status)?E.value=!1:E.value=!0,k.freshSaleAward=!0},ye=async()=>{te.confirm({title:"提示",content:"补充资料是否必填?",okText:"是",cancelText:"否",async onOk(){await r.afterSale.sale.complete({id:g,remark:C.remark,operate_remark:C.operate_remark,is_deduct_integral:C.is_deduct_integral,complete_required:1}),me()},async onCancel(){await r.afterSale.sale.complete({id:g,remark:C.remark,operate_remark:C.operate_remark,is_deduct_integral:C.is_deduct_integral,complete_required:0}),me()}})},ve=()=>{let e={};return[5,2,6].includes(C.type)&&(e={...e,goods_fee:0}),[6].includes(C.type)&&(e={...e,goods_fee:0,add_fee:0,freight_type:0,freight_fee:0}),e},ge=async()=>{const e=T.complete_images.map((e=>({type:"image",src:e.url}))).concat(T.complete_videos.map((e=>({type:"video",src:e.url}))));0!==e.length?he({complete_info:JSON.stringify({media:e,description:T.complete_description}),is_audit:0}):v.error("请上传补充图片或视频凭证")},he=async(e={})=>{let t={id:g,is_audit:1,...e};1===t.is_audit&&1===k.sale.status&&b.value&&(t.deduct_items=b.value.getRes());const a=de();if(0===a.length)return void v.error("请选择商品");const o=h.value.getAddressInfo();console.log(o),t={...t,...C,return_sku_items:JSON.stringify(a.map((e=>({id:e.id,apply_nums:e.apply_nums})))),return_address:JSON.stringify({...L,receiver_province:o.province,receiver_city:o.city,receiver_district:o.district}),...ve()},await r.afterSale.sale.update(t),me()},be=async()=>{await r.afterSale.sale.confirmRefund({id:g}),me()};return(e,t)=>{const a=Y,o=W,r=V,y=P,v=K,g=$,S=z,R=x,F=J,q=H,G=B,Q=D,ee=j,te=re,ae=A;return l(),n("div",xe,[i(ae,{spinning:u(k).loading},{default:s((()=>[i(S,{title:"基本信息"},{default:s((()=>[i(o,{column:2},{default:s((()=>[i(a,{label:`【${u(k).sale.type_name}】`},{default:s((()=>[_(f(u(k).sale.sale_sn)+" ("+f(u(k).sale.status_name)+") ",1),M("a",{href:"javascript:;",class:"ml8px",onClick:t[0]||(t[0]=e=>fe(u(k).sale.sale_sn))},"复制")])),_:1},8,["label"]),i(a,{label:"申请时间"},{default:s((()=>[_(f(u(k).sale.created_at),1)])),_:1})])),_:1}),i(o,{bordered:""},{default:s((()=>[i(a,{label:"申请来源"},{default:s((()=>[_(f(u(k).sale.creator_type_name),1)])),_:1}),i(a,{label:"申请人"},{default:s((()=>[_(f(u(k).sale.username),1)])),_:1}),i(a,{label:"申请原因"},{default:s((()=>[_(f(u(k).sale.reason),1)])),_:1}),i(a,{label:"申请描述"},{default:s((()=>[_(f(u(k).sale.description),1)])),_:1}),i(a,{label:"图片凭证"},{default:s((()=>[(l(!0),n(d,null,c(u(k).sale.images,(e=>(l(),p(r,{key:e,src:e,width:50,height:50},null,8,["src"])))),128))])),_:1}),i(a,{label:"视频凭证"},{default:s((()=>[(l(!0),n(d,null,c(u(k).sale.videos,(e=>(l(),n("video",{key:e,src:e,width:50,controls:""},null,8,Se)))),128))])),_:1})])),_:1}),u(T)&&u(T).complete_updated_at||31===u(k).sale.status?(l(),p(o,{key:0,bordered:"",title:"补充资料",class:"mt16px"},{default:s((()=>[i(a,{label:"补充描述"},{default:s((()=>[i(y,{value:u(T).complete_description,"onUpdate:value":t[1]||(t[1]=e=>u(T).complete_description=e),style:{width:"100%"}},null,8,["value"])])),_:1}),i(a,{label:"补充图片凭证"},{default:s((()=>[i(v,{filelist:u(T).complete_images,"onUpdate:filelist":t[2]||(t[2]=e=>u(T).complete_images=e),"max-count":1e3,multiple:""},null,8,["filelist"])])),_:1}),i(a,{label:"补充视频凭证"},{default:s((()=>[i(g,{list:u(T).complete_videos,"onUpdate:list":t[3]||(t[3]=e=>u(T).complete_videos=e),max:10},null,8,["list"])])),_:1}),i(a,{label:"补充时间"},{default:s((()=>[_(f(u(T).complete_updated_at),1)])),_:1}),i(a,{label:"补充材料必填"},{default:s((()=>[_(f(u(T).complete_required_name),1)])),_:1})])),_:1})):w("",!0)])),_:1}),i(S,{title:"订单信息",style:{"margin-top":"8px"}},{default:s((()=>[i(o,{layout:"vertical",bordered:"",column:7},{default:s((()=>[i(a,{label:"订单编号"},{default:s((()=>[_(f(u(k).order.order_sn),1),M("a",{href:"javascript:;",class:"ml8px",onClick:t[4]||(t[4]=e=>fe(u(k).order.order_sn))},"复制")])),_:1}),i(a,{label:"下单人"},{default:s((()=>[M("a",{href:"javascript:;",onClick:t[5]||(t[5]=t=>e.$router.push({name:"userDetail",params:{id:u(k).order.uid,type:"detail"}}))},[_(f(u(k).order.buyer_nick)+" ",1),M("div",null,"ID:"+f(u(k).order.uid),1)])])),_:1}),i(a,{label:"下单时间"},{default:s((()=>[_(f(u(k).order.created_at),1)])),_:1}),i(a,{label:"物流信息"},{default:s((()=>[_(f(u(k).order.logistics_name)+f(u(k).order.logistics_sn?"/"+u(k).order.logistics_sn:""),1)])),_:1}),i(a,{label:"物流状态"},{default:s((()=>[_(f(u(k).order.logistics_trace_status_name)+" ",1),i(R,{type:"link",onClick:t[6]||(t[6]=e=>{u(k).showTransoprt=!0,u(k).handlingRow=u(k).order})},{default:s((()=>[_(" 查看物流 ")])),_:1})])),_:1}),i(a,{label:"供应商信息"},{default:s((()=>[_(f(u(k).order.supplier_name),1)])),_:1}),i(a,{label:"支付方式"},{default:s((()=>[_(f(u(k).order.pay_type_name),1)])),_:1}),i(a,{label:"商品总额"},{default:s((()=>[_(f(u(k).order.goods_fee),1)])),_:1}),i(a,{label:"下单立减"},{default:s((()=>[_(f(u(k).order.deduct_fee),1)])),_:1}),i(a,{label:"优惠券"},{default:s((()=>[_(f(u(k).order.coupon_fee),1)])),_:1}),i(a,{label:"退换省心"},{default:s((()=>[0===u(k).order.is_buy_insurance?(l(),n("span",Ce," 未购买 ")):(l(),n("span",Le,[+u(k).order.insurance_fee?(l(),n("span",Te," ("+f(u(k).order.insurance_fee)+") ",1)):(l(),n("span",je," 平台赠送 "))]))])),_:1}),i(a,{label:"运费"},{default:s((()=>[_(f(u(k).order.freight_fee),1)])),_:1}),i(a,{label:"实付金额"},{default:s((()=>[_(f(u(k).order.pay_fee),1)])),_:1}),i(a,{label:"佣金"},{default:s((()=>[_(f(u(k).order.commission_money),1)])),_:1})])),_:1})])),_:1}),i(S,{title:"物流信息",style:{"margin-top":"8px"}},{default:s((()=>{var e,r,d,c;return[i(o,{title:"订单物流"},{default:s((()=>[i(a,{label:"物流公司"},{default:s((()=>[_(f(u(k).order.logistics_name),1)])),_:1}),i(a,{label:"物流单号"},{default:s((()=>[_(f(u(k).order.logistics_sn)+" ",1),u(k).order.logistics_sn?(l(),n("a",{key:0,type:"link",href:"javascript:;",class:"ml8px",onClick:t[7]||(t[7]=e=>{u(k).showTransoprt=!0,u(k).handlingRow=u(k).order})}," 查看物流 ")):w("",!0)])),_:1}),i(a,{label:"订单收货地址"},{default:s((()=>[_(f(u(k).logistics_info.platform.name)+" "+f(u(k).logistics_info.platform.phone)+" "+f(u(k).logistics_info.platform.full_address),1)])),_:1})])),_:1}),(null==(r=null==(e=u(k).logistics_info)?void 0:e.user)?void 0:r.logistics_sn)?(l(),p(o,{key:0,title:"售后-用户寄回物流"},{default:s((()=>[1===u(k).sale.pick_freight_pay||2===u(k).sale.pick_freight_pay?(l(),p(a,{key:0,span:3},{default:s((()=>[M("span",Ue,"预约寄回(费用"+f(u(k).sale.pick_freight_fee)+"-"+f(u(k).sale.pick_freight_pay_name)+")",1)])),_:1})):w("",!0),i(a,{label:"物流公司"},{default:s((()=>[_(f(u(k).logistics_info.user.logistics_name),1)])),_:1}),i(a,{label:"物流单号"},{default:s((()=>[_(f(u(k).logistics_info.user.logistics_sn)+" ",1),M("a",{type:"link",href:"javascript:;",class:"ml8px",onClick:t[8]||(t[8]=e=>{u(k).showTransoprt=!0,u(k).handlingRow=u(k).logistics_info.user})}," 查看物流 ")])),_:1}),i(a,{label:"退换货信息"},{default:s((()=>[_(f(u(k).logistics_info.user.name)+" "+f(u(k).logistics_info.user.phone)+" "+f(u(k).logistics_info.user.full_address),1)])),_:1})])),_:1})):w("",!0),(null==(c=null==(d=u(k).logistics_info)?void 0:d.platform)?void 0:c.logistics_sn)?(l(),p(o,{key:1,title:"售后-平台寄出物流"},{default:s((()=>[i(a,{label:"物流公司"},{default:s((()=>[_(f(u(k).logistics_info.platform.logistics_name),1)])),_:1}),i(a,{label:"物流单号"},{default:s((()=>[_(f(u(k).logistics_info.platform.logistics_sn)+" ",1),M("a",{href:"javascript:;",type:"link",class:"ml8px",onClick:t[9]||(t[9]=e=>{u(k).showTransoprt=!0,u(k).handlingRow=u(k).logistics_info.platform})}," 查看物流 ")])),_:1}),i(a,{label:"用户收货信息"},{default:s((()=>[_(f(u(k).logistics_info.platform.name)+" "+f(u(k).logistics_info.platform.phone)+" "+f(u(k).logistics_info.platform.full_address),1)])),_:1})])),_:1})):w("",!0)]})),_:1}),i(S,{title:"商品信息",style:{"margin-top":"8px"}},{default:s((()=>[Ee,i(q,{"row-key":"id","data-source":u(k).goods,columns:u(U),scroll:{x:"max-content"},"row-selection":{selectedRowKeys:u(k).goodsSelected,getCheckboxProps:e=>({disabled:u(E)}),onChange(e){u(k).goodsSelected=e}},pagination:!1,bordered:""},{bodyCell:s((({column:e,record:t})=>["sku_thumb"===e.key?(l(),p(r,{key:0,width:50,src:t.sku_thumb,height:50},null,8,["src"])):w("",!0),"apply_nums"===e.key?(l(),p(F,{key:1,value:t.apply_nums,"onUpdate:value":e=>t.apply_nums=e,min:0,precision:0,max:t.combin_nums,disabled:u(E)},null,8,["value","onUpdate:value","max","disabled"])):w("",!0)])),_:1},8,["data-source","columns","row-selection"]),i(o,{bordered:"",class:"mt8px"},{default:s((()=>[i(a,{span:3,label:"售后类型"},{default:s((()=>[i(Q,{value:u(C).type,"onUpdate:value":t[10]||(t[10]=e=>u(C).type=e),disabled:31===u(k).sale.status,onChange:Z},{default:s((()=>[(l(!0),n(d,null,c(u(m).sale_type,(e=>(l(),p(G,{key:e.value,value:e.value},{default:s((()=>[_(f(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value","disabled"])])),_:1}),i(a,{label:"商品退款"},{default:s((()=>[[5,2,6].includes(u(C).type)?(l(),n("span",Oe,"--")):(l(),p(F,{key:1,value:u(C).goods_fee,"onUpdate:value":t[11]||(t[11]=e=>u(C).goods_fee=e),min:0,disabled:u(E)},{addonAfter:s((()=>[Ae])),_:1},8,["value","disabled"]))])),_:1}),i(a,{label:"补偿金额"},{default:s((()=>[[6].includes(u(C).type)?(l(),n("span",Re,"--")):(l(),p(F,{key:1,value:u(C).add_fee,"onUpdate:value":t[12]||(t[12]=e=>u(C).add_fee=e),min:0,disabled:u(E)},{addonAfter:s((()=>[Me])),_:1},8,["value","disabled"]))])),_:1}),i(a,{label:"质量问题"},{default:s((()=>[i(Q,{value:u(C).is_quality,"onUpdate:value":t[13]||(t[13]=e=>u(C).is_quality=e),disabled:u(E)},{default:s((()=>[(l(!0),n(d,null,c(u(m).boolean,(e=>(l(),p(G,{key:e.value,value:e.value},{default:s((()=>[_(f(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value","disabled"])])),_:1}),i(a,{label:"扣除返利"},{default:s((()=>[i(Q,{value:u(C).is_deduct_rebate,"onUpdate:value":t[14]||(t[14]=e=>u(C).is_deduct_rebate=e),disabled:""},{default:s((()=>[(l(!0),n(d,null,c(u(k).rebateEnums,(e=>(l(),p(G,{key:e.value,value:e.value},{default:s((()=>[_(f(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),i(a,{label:"扣除积分"},{default:s((()=>[i(Q,{value:u(C).is_deduct_integral,"onUpdate:value":t[15]||(t[15]=e=>u(C).is_deduct_integral=e),disabled:""},{default:s((()=>[(l(!0),n(d,null,c(u(m).boolean,(e=>(l(),p(G,{key:e.value,value:e.value},{default:s((()=>[_(f(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),i(a,{label:"退还优惠券"},{default:s((()=>[i(Q,{value:u(C).is_return_coupon,"onUpdate:value":t[16]||(t[16]=e=>u(C).is_return_coupon=e),disabled:u(E)||0===u(k).sale.can_return_coupon},{default:s((()=>[(l(!0),n(d,null,c(u(m).boolean,(e=>(l(),p(G,{key:e.value,value:e.value},{default:s((()=>[_(f(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value","disabled"])])),_:1}),i(a,{label:"运费类型",span:3},{default:s((()=>[[6].includes(u(C).type)?(l(),n("span",Fe,"--")):(l(),n("div",qe,[i(Q,{value:u(C).freight_type,"onUpdate:value":t[17]||(t[17]=e=>u(C).freight_type=e),disabled:u(E)},{default:s((()=>[i(G,{value:0},{default:s((()=>[_(" 无 ")])),_:1}),i(G,{value:1},{default:s((()=>[_(" 补平台运费 ")])),_:1}),i(G,{value:2},{default:s((()=>[_(" 退用户运费 ")])),_:1})])),_:1},8,["value","disabled"]),2===u(C).freight_type?(l(),p(F,{key:0,value:u(C).freight_fee,"onUpdate:value":t[18]||(t[18]=e=>u(C).freight_fee=e),min:0,placeholder:"输入运费",disabled:u(E)},{addonAfter:s((()=>[Ne])),_:1},8,["value","disabled"])):w("",!0)]))])),_:1}),i(a,{label:"退换货地址",span:3},{default:s((()=>[N(M("div",Ie,[i(ee,{value:u(L).receiver_name,"onUpdate:value":t[19]||(t[19]=e=>u(L).receiver_name=e),placeholder:"收件人",style:{width:"100px","margin-right":"8px"},disabled:u(E)},null,8,["value","disabled"]),i(ee,{value:u(L).receiver_phone,"onUpdate:value":t[20]||(t[20]=e=>u(L).receiver_phone=e),placeholder:"联系方式",style:{width:"140px","margin-right":"8px"},class:"mr8px",disabled:u(E)},null,8,["value","disabled"]),i(te,{ref_key:"chooseAddressRef",ref:h,province_code:u(L).receiver_province_code,"onUpdate:province_code":t[21]||(t[21]=e=>u(L).receiver_province_code=e),city_code:u(L).receiver_city_code,"onUpdate:city_code":t[22]||(t[22]=e=>u(L).receiver_city_code=e),district_code:u(L).receiver_district_code,"onUpdate:district_code":t[23]||(t[23]=e=>u(L).receiver_district_code=e),disabled:u(E)},null,8,["province_code","city_code","district_code","disabled"]),i(ee,{value:u(L).receiver_address,"onUpdate:value":t[24]||(t[24]=e=>u(L).receiver_address=e),placeholder:"详细地址",style:{width:"200px"},disabled:u(E)},null,8,["value","disabled"])],512),[[I,[1,2].includes(u(C).type)]]),N(M("span",null,"--",512),[[I,![1,2].includes(u(C).type)]])])),_:1}),i(a,{label:"用户备注",span:3},{default:s((()=>[i(y,{value:u(C).remark,"onUpdate:value":t[25]||(t[25]=e=>u(C).remark=e)},null,8,["value"]),Pe])),_:1}),i(a,{label:"售后备注",span:3},{default:s((()=>[i(y,{value:u(C).operate_remark,"onUpdate:value":t[26]||(t[26]=e=>u(C).operate_remark=e)},null,8,["value"]),Be])),_:1})])),_:1}),!u(k).freshSaleAward||0!==u(C).type&&1!==u(C).type?w("",!0):(l(),p(we,{key:0,ref_key:"SaleAwardRef",ref:b,sale_suggest:u(k).award_deduct.sale_suggest,status:u(k).sale.status},null,8,["sale_suggest","status"])),i(se,{"data-source":u(k).operate_traces},null,8,["data-source"]),u(k).isModMaterial?(l(),n("div",De,[i(R,{type:"primary",class:"mr16px",onClick:t[27]||(t[27]=e=>he({is_audit:0}))},{default:s((()=>[_(" 提交 ")])),_:1}),i(R,{type:"primary",class:"mr16px",onClick:me},{default:s((()=>[_(" 取消 ")])),_:1})])):(l(),n("div",Ge,[10!==u(k).sale.status&&13!==u(k).sale.status||1!==u(C).type&&2!==u(C).type||u(O)?w("",!0):(l(),p(R,{key:0,type:"primary",class:"mr16px",onClick:t[28]||(t[28]=e=>u(k).showModLog=!0)},{default:s((()=>[_(" 填写寄回信息 ")])),_:1})),15!==u(k).sale.status||u(O)?w("",!0):(l(),p(R,{key:1,type:"primary",class:"mr16px",onClick:t[29]||(t[29]=e=>u(k).showModOutLog=!0)},{default:s((()=>[_(" 填写寄出信息 ")])),_:1})),30!==u(k).sale.status||u(O)?w("",!0):(l(),p(R,{key:2,type:"primary",class:"mr16px",onClick:t[30]||(t[30]=e=>u(k).showModOutLog=!0)},{default:s((()=>[_(" 修改寄出物流 ")])),_:1})),20!==u(k).sale.status&&31!==u(k).sale.status&&1!==u(k).sale.status&&12!==u(k).sale.status&&3!==u(k).sale.status&&2!==u(k).sale.status&&4!==u(k).sale.status?(l(),p(R,{key:3,type:"primary",class:"mr16px",onClick:le},{default:s((()=>[_(" 修改资料 ")])),_:1})):w("",!0),13!==u(k).sale.status&&11!==u(k).sale.status||u(O)?w("",!0):(l(),p(R,{key:4,type:"primary",class:"mr16px",onClick:ie},{default:s((()=>[_(" 确认收货 ")])),_:1})),1===u(k).sale.status&&0===u(C).type||31===u(k).sale.status&&0===u(C).type||u(O)&&0===u(C).type?(l(),p(R,{key:5,type:"primary",class:"mr16px",onClick:t[31]||(t[31]=e=>he())},{default:s((()=>[_(" 确认退款 ")])),_:1})):w("",!0),31===u(k).sale.status?(l(),p(R,{key:6,type:"primary",class:"mr16px",onClick:ge},{default:s((()=>[_(" 确定补充资料 ")])),_:1})):w("",!0),19!==u(k).sale.status||u(O)?w("",!0):(l(),p(R,{key:7,type:"primary",class:"mr16px",onClick:be},{default:s((()=>[_(" 确认退款 ")])),_:1})),(1===u(k).sale.status||31===u(k).sale.status)&&1===u(C).type||u(O)&&1===u(C).type?(l(),p(R,{key:8,type:"primary",class:"mr16px",onClick:t[32]||(t[32]=e=>he())},{default:s((()=>[_(" 确认退货 ")])),_:1})):w("",!0),(1===u(k).sale.status||31===u(k).sale.status)&&5===u(C).type||u(O)&&5===u(C).type?(l(),p(R,{key:9,type:"primary",class:"mr16px",onClick:t[33]||(t[33]=e=>he())},{default:s((()=>[_(" 确认补偿 ")])),_:1})):w("",!0),(1===u(k).sale.status||31===u(k).sale.status)&&2===u(C).type||u(O)&&2===u(C).type?(l(),p(R,{key:10,type:"primary",class:"mr16px",onClick:t[34]||(t[34]=e=>he())},{default:s((()=>[_(" 确认换货 ")])),_:1})):w("",!0),(1===u(k).sale.status||31===u(k).sale.status)&&6===u(C).type||u(O)&&6===u(C).type?(l(),p(R,{key:11,type:"primary",class:"mr16px",onClick:t[35]||(t[35]=e=>he())},{default:s((()=>[_(" 确认补发 ")])),_:1})):w("",!0),1===u(k).sale.status?(l(),p(R,{key:12,type:"primary",class:"mr16px",onClick:ye},{default:s((()=>[_(" 补充资料 ")])),_:1})):w("",!0),20!==u(k).sale.status&&12!==u(k).sale.status&&3!==u(k).sale.status&&2!==u(k).sale.status&&4!==u(k).sale.status?(l(),p(R,{key:13,danger:"",class:"mr16px",onClick:ce},{default:s((()=>[_(" 关闭售后 ")])),_:1})):w("",!0)])),i(S,{title:"操作日志",style:{"margin-top":"16px"}},{default:s((()=>[i(ue,{"data-source":u(k).normal_traces},null,8,["data-source"])])),_:1}),u(k).money_gone&&u(k).money_gone.pay_type_name?(l(),p(S,{key:3,title:"钱款去向",style:{"margin-top":"16px"}},{default:s((()=>[i(o,{borderd:""},{default:s((()=>[i(a,{label:"退款金额"},{default:s((()=>[_(f(u(k).money_gone.refund_fee),1)])),_:1}),i(a,{label:"退款渠道"},{default:s((()=>[_(f(u(k).money_gone.pay_type_name),1)])),_:1}),i(a,{label:"退款状态"},{default:s((()=>[_(f(u(k).money_gone.refund_status_name),1)])),_:1})])),_:1})])),_:1})):w("",!0)])),_:1})])),_:1},8,["spinning"]),i(X,{show:u(k).showTransoprt,"onUpdate:show":t[36]||(t[36]=e=>u(k).showTransoprt=e),row:u(k).handlingRow},null,8,["show","row"]),i(pe,{show:u(k).showModLog,"onUpdate:show":t[37]||(t[37]=e=>u(k).showModLog=e),data:u(k).sale,onFresh:me},null,8,["show","data"]),i(_e,{show:u(k).showModOutLog,"onUpdate:show":t[38]||(t[38]=e=>u(k).showModOutLog=e),data:u(k).sale,"is-mod":30===u(k).sale.status,onFresh:me},null,8,["show","data","is-mod"])])}}});export{He as default};
