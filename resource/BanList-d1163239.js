import{d as a,m as n,o as i,$ as e,G as t,H as o,a as s,b as r,e as u,f as p,w as d,x as l,p as c,q as m,s as g,B as x}from"./index-c2ae2a0e.js";import{u as h,_ as j}from"./useTableColumns-dd067b4d.js";import"./index-c8577ae4.js";import"./index-3f0a4d2e.js";import{u as f}from"./useSearchItems-c7d75cf3.js";import{u as v}from"./usePagination-c05046ed.js";import{d as y}from"./index-a09a23de.js";import"./FolderOpenOutlined-fa174baf.js";import"./tool-d986b095.js";import"./RadioButton-bc4165ed.js";const k={key:0},S=a({__name:"BanList",setup(a){const S=f([["input","id","用户ID"],["input","username","用户名称"]]),_=h([["用户ID","uid"],["用户名称","username"],["封禁时间","created_at"],["封禁原因","cause"],["操作","operate",180,"right"]]),b=n({handlingId:0,dataSource:[],loading:!1,query:{},pagination:v()});i((()=>{q()}));const q=()=>{b.loading=!0,e.user.banList.list({page:b.pagination.current,page_size:b.pagination.pageSize,...b.query}).then((a=>{var n;b.loading=!1,b.dataSource=a.data.items,1===b.pagination.current&&(b.pagination.total=+(null==(n=a.data)?void 0:n.count))}))},C=a=>{b.pagination={...b.pagination,...a},q()},I=a=>{b.query=a,b.pagination={...b.pagination,current:1},q()};return(a,n)=>{const i=t("Search"),h=x,f=j,v=o("permission");return s(),r("div",null,[u(i,{"search-options":p(S),onOnSearch:I},null,8,["search-options"]),u(f,{"data-source":p(b).dataSource,columns:p(_),scroll:{x:"max-content"},loading:p(b).loading,pagination:p(b).pagination,onChange:C},{bodyCell:d((({column:a,record:n})=>["operate"===a.key?(s(),r("div",k,[l((s(),c(h,{type:"link",onClick:a=>{return i=n,void y.confirm({title:"提示",content:"确认解除封禁？",okText:"确认",cancelText:"取消",onOk:()=>{e.user.banList.relieve({uid:i.uid}).then((a=>{q()}))}});var i}},{default:d((()=>[m(" 解禁 ")])),_:2},1032,["onClick"])),[[v,[p(e).user.banList.relieve]]])])):g("",!0)])),_:1},8,["data-source","columns","loading","pagination"])])}}});export{S as default};
