import{e,as as a,d as l,a as t,b as s,cb as d,S as i,_ as o,i as u,m as n,o as r,$ as _,g as c,w as p,F as v,n as m,p as f,q as h,z as g,f as b,s as y,cH as k,K as w,V as x,W as U,cP as S,A,C,D as I,B as M,I as j,c as O,l as D,r as B,ae as E,a3 as P,a4 as N,E as V,M as q,k as L,a1 as H,x as T,y as z,c8 as $,h as R,u as F,a0 as Y,cQ as G,G as J,Z as K,a7 as Q,cR as W,X}from"./index-c2ae2a0e.js";import{_ as Z}from"./index-ef11d20c.js";import{C as ee}from"./index-3f0a4d2e.js";import{_ as ae}from"./index-f5618084.js";import{_ as le}from"./UploadVideo-3da04ded.js";import{_ as te}from"./Upload-053b6740.js";import{C as se}from"./index-1dfc023a.js";import{R as de,_ as ie}from"./index-c8577ae4.js";import{_ as oe}from"./index-8036da2a.js";import{_ as ue}from"./index-36c6d0ec.js";import{D as ne,B as re,a as _e,g as ce,b as pe,c as ve,t as me,i as fe,s as he,d as ge}from"./skuUtils-7dd5177b.js";import{_ as be,g as ye}from"./tool-d986b095.js";import{d as ke}from"./dtool-b3945d0c.js";import{_ as we}from"./index-00d344de.js";import{d as xe,e as Ue,f as Se,g as Ae,a as Ce}from"./useRequest-34a5e624.js";import"./index-b1df7cdb.js";import"./FolderOpenOutlined-fa174baf.js";import"./DeleteOutlined-1e1ff134.js";const Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"down-circle",theme:"outlined"};function Me(e){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?Object(arguments[a]):{},t=Object.keys(l);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(l).filter((function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable})))),t.forEach((function(a){je(e,a,l[a])}))}return e}function je(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}var Oe=function(l,t){var s=Me({},l,t.attrs);return e(a,Me({},s,{icon:Ie}),null)};Oe.displayName="DownCircleOutlined",Oe.inheritAttrs=!1;const De=Oe;const Be={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.5 360.3a7.95 7.95 0 00-12.9 0l-178 246c-3.8 5.3 0 12.7 6.5 12.7H381c10.2 0 19.9-4.9 25.9-13.2L512 460.4l105.2 145.4c6 8.3 15.6 13.2 25.9 13.2H690c6.5 0 10.3-7.4 6.5-12.7l-178-246z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"up-circle",theme:"outlined"};function Ee(e){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?Object(arguments[a]):{},t=Object.keys(l);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(l).filter((function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable})))),t.forEach((function(a){Pe(e,a,l[a])}))}return e}function Pe(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}var Ne=function(l,t){var s=Ee({},l,t.attrs);return e(a,Ee({},s,{icon:Be}),null)};Ne.displayName="UpCircleOutlined",Ne.inheritAttrs=!1;const Ve=Ne,qe=o(l({__name:"MaskLoading",props:{text:String,showMask:Boolean},setup:a=>(l,o)=>{const u=i;return t(),s("div",{class:d(["maskLoading-container flex-center",{showMask:a.showMask}])},[e(u,{tip:a.text||"Loading..."},null,8,["tip"])],2)}}),[["__scopeId","data-v-3dcecf82"]]),Le={class:"flex-center pointer"},He=o(l({__name:"GoodsParam",props:{param:Array},emits:["update:param"],setup(a,{emit:l}){const d=u(a,"param",l,[]),i=n({goodsParams:[]});r((()=>{o()}));const o=async()=>{const e=await _.productConfig.param.list({is_select:1});i.goodsParams=e.data.items},O=e=>{const a=d.value.map((e=>e.key));i.goodsParams.find((a=>a.id===e)).param_values.forEach((e=>{a.includes(e)||d.value.push({key:e,value:""})}))},D=()=>{d.value.push({key:"",value:""})},B=(e,a)=>{const l=d.value[a],t="up"===e?a-1:a+1;d.value[a]=d.value[t],d.value[t]=l};return(a,l)=>{const o=x,u=U,n=S,r=A,_=C,E=I,P=M,N=j;return t(),s("div",null,[c("div",null,[e(E,null,{default:p((()=>[e(_,{span:8},{default:p((()=>[e(r,{label:"参数组"},{default:p((()=>[e(n,null,{default:p((()=>[e(u,{placeholder:"请选择",onChange:O},{default:p((()=>[(t(!0),s(v,null,m(b(i).goodsParams,(e=>(t(),f(o,{key:e.id,value:e.id},{default:p((()=>[h(g(e.name),1)])),_:2},1032,["value"])))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})]),e(P,{type:"primary",class:"mb16px",onClick:D},{default:p((()=>[h(" 新增参数 ")])),_:1}),(t(!0),s(v,null,m(b(d),((a,l)=>(t(),s("div",{key:l,class:"params-ele mb8px"},[e(E,null,{default:p((()=>[e(_,{span:6,class:"mr8px"},{default:p((()=>[e(N,{value:a.key,"onUpdate:value":e=>a.key=e,"addon-before":"属性名",placeholder:"请输入"},null,8,["value","onUpdate:value"])])),_:2},1024),e(_,{span:6},{default:p((()=>[e(N,{value:a.value,"onUpdate:value":e=>a.value=e,"addon-before":"属性值",placeholder:"请输入"},null,8,["value","onUpdate:value"])])),_:2},1024),c("div",Le,[l!==b(d).length-1?(t(),f(b(De),{key:0,title:"向下移动",class:"icon ml8px",onClick:e=>B("down",l)},null,8,["onClick"])):y("",!0),0!==l?(t(),f(b(Ve),{key:1,title:"向上移动",class:"icon ml8px",onClick:e=>B("up",l)},null,8,["onClick"])):y("",!0),e(b(k),{title:"删除",class:"icon ml8px",onClick:w((e=>(e=>{d.value.splice(e,1)})(l)),["prevent"])},null,8,["onClick"])])])),_:2},1024)])))),128))])}}}),[["__scopeId","data-v-34b85796"]]),Te={key:0,class:"item-container"},ze=(e=>(P("data-v-184c89ca"),e=e(),N(),e))((()=>c("div",{class:"item title operate"}," 操作 ",-1))),$e={key:0},Re={key:1},Fe={key:0},Ye={key:1},Ge=["onClick"],Je=o(l({__name:"SkuTable",props:{tableData:Array,attrSorts:Array,attrBigMap:Object,isEdit:Boolean,isIntegral:Boolean},emits:"del",setup(a){const l=a,i=O((()=>{if(0===l.tableData.length)return[];const e=[],a=l.tableData[0].properties.split(/:|,/).filter(((e,a)=>a%2==0));return l.attrSorts.forEach((t=>{a.includes(String(t))&&e.push({title:l.attrBigMap[t],prop:t,isText:!0,key:`${Math.random()}_${t}`})})),e.concat(ne.filter((e=>!e.hidden)))}));D((()=>l.tableData),(()=>{_()}));let o=0,u=20;const n=B(),_=()=>{const e=window.scrollY+o-(n.value.offsetTop+n.value.offsetParent.offsetTop),a=l.tableData.length;let t=0,s=0;e>=0&&(e>o&&(t=parseInt((e-o)/50)),t+u>a&&(t=a-u),s=t+u),l.tableData.forEach(((e,a)=>{e.showDom=a>=t&&a<=s}))};return r((()=>{o=document.body.clientHeight+200,u=o/50>20?o/50:20,window.addEventListener("scroll",_,!0)})),E((()=>{window.removeEventListener("scroll",_,!0)})),(l,o)=>{const u=M,r=oe;return t(),s("div",{ref_key:"tableRef",ref:n},[b(i).length?(t(),s("div",Te,[(t(!0),s(v,null,m(b(i),(e=>(t(),s("div",{key:e.key,class:"item title"},[h(g(e.title)+" ",1),e.isStock&&a.isEdit?(t(),f(u,{key:0,type:"link",onClick:o[0]||(o[0]=e=>l.$emit("showSkuBatchStockDo"))},{default:p((()=>[h(" 编辑 ")])),_:1})):y("",!0)])))),128)),ze])):y("",!0),(t(!0),s(v,null,m(a.tableData,(o=>(t(),s("div",{key:o.combination_tag,class:"item-container"},[o.showDom?(t(),s(v,{key:0},[(t(!0),s(v,null,m(b(i),(i=>(t(),s("div",{key:i.key,class:"item"},[i.isText?(t(),s("span",$e,g(o[i.prop]),1)):(t(),s("div",Re,[i.isStock&&a.isEdit&&o.id?(t(),s("span",Fe,[c("span",null,g(o[i.prop]),1),e(u,{type:"link",onClick:e=>l.$emit("showSkuBatchStockDo",o.id)},{default:p((()=>[h(" 编辑 ")])),_:2},1032,["onClick"])])):a.isIntegral&&!i.isStock?(t(),s("span",Ye,"--")):(t(),f(r,{key:2,value:o[i.prop],"onUpdate:value":e=>o[i.prop]=e,class:d({active_vilidate:o[`${i.prop}_vilidate`]}),style:{width:"100%"}},null,8,["value","onUpdate:value","class"]))]))])))),128)),c("div",{class:"item operate operate-inner",onClick:e=>l.$emit("del",o)}," 删除 ",8,Ge)],64)):y("",!0)])))),128))],512)}}}),[["__scopeId","data-v-184c89ca"]]),Ke={class:"skubatch-price",style:{"margin-left":"30px"}},Qe={style:{"margin-bottom":"30px"}},We=(e=>(P("data-v-5f9b0b65"),e=e(),N(),e))((()=>c("div",{class:"danger-color"}," 注意：没有选择的将被全部应用 ",-1))),Xe=o(l({__name:"SkuBatchPrice",props:{batchSku:Object,attr:Array,tableData:Array,isEdit:Boolean},setup(a){const l=a,d=n({showDialog:!1,BATCH_INPUT:l.isEdit?re.filter((e=>!e.isStock)):re,validAttr:[]}),i=()=>{d.showDialog=!0,d.validAttr=l.attr.filter((e=>0!==e.attr_item_choosed.length)).map((e=>{const a=e.attr_item_choosed;return{...e,choosed:"",values:e.values.filter((e=>a.includes(e.id)))}}))},o=()=>{const e=d.validAttr.filter((e=>e.choosed)).map((e=>String(e.choosed))),a={...l.batchSku};Object.keys(a).forEach((e=>{a[e]||0===a[e]||delete a[e]})),l.tableData.forEach((l=>{const t=l.combination_tag.split(",");e.every((e=>t.includes(e)))&&(console.log(e,t,a,777),Object.assign(l,a))})),d.showDialog=!1};return(l,u)=>{const n=M,r=x,_=U,y=A,k=C,w=I,S=V,j=q;return t(),s("div",Ke,[e(n,{type:"primary",plain:"",onClick:i},{default:p((()=>[h(" 应用于 ")])),_:1}),e(j,{visible:b(d).showDialog,"onUpdate:visible":u[0]||(u[0]=e=>b(d).showDialog=e),width:"650px",title:"参数批量应用",onOk:o},{default:p((()=>[c("div",Qe,[(t(!0),s(v,null,m(b(d).BATCH_INPUT,(e=>(t(),s("span",{key:e.prop},g(e.title)+":"+g(a.batchSku[e.prop]?a.batchSku[e.prop]:"不变")+"; ",1)))),128))]),e(S,{"label-col":{span:6},"wrapper-col":{span:18}},{default:p((()=>[(t(!0),s(v,null,m(b(d).validAttr,(a=>(t(),f(w,{key:a.id},{default:p((()=>[e(k,{span:18},{default:p((()=>[e(y,{label:a.name},{default:p((()=>[e(_,{value:a.choosed,"onUpdate:value":e=>a.choosed=e,style:{width:"100%"},placeholder:"请选择"},{default:p((()=>[(t(!0),s(v,null,m(a.values,(e=>(t(),f(r,{key:e.id,value:e.id},{default:p((()=>[h(g(e.value),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["value","onUpdate:value"])])),_:2},1032,["label"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),We])),_:1},8,["visible"])])}}}),[["__scopeId","data-v-5f9b0b65"]]),Ze=c("span",{class:"tips mt8px"},"多个规格值用,隔开",-1),ea=l({__name:"AttrModal",props:{show:Boolean,id:Number,goods_id:Number},emits:["fresh"],setup(a,{emit:l}){const d=a,i=u(d,"show",l),o=B();D(i,(e=>{e&&o.value&&o.value.resetFields()}));const r=n({attr_value:"",name:"",sort:void 0}),c=()=>{o.value.validate().then((async e=>{_.productConfig.attrName.add({...e,type_id:d.id||void 0,goods_id:d.goods_id}).then((e=>{i.value=!1,l("fresh","bigAdd",e.data)}))})).catch((e=>{console.log(e)}))};return(a,l)=>{const d=j,u=A,n=oe,_=V,v=q;return t(),s("div",null,[e(v,{visible:b(i),"onUpdate:visible":l[3]||(l[3]=e=>L(i)?i.value=e:null),width:"500px",title:"添加规格",onOk:c},{default:p((()=>[e(_,{ref_key:"formRef",ref:o,model:b(r),autocomplete:"off","label-col":{span:6},"wrapper-col":{span:18}},{default:p((()=>[e(u,{name:"name",label:"规格名称",rules:[{required:!0,message:"请输入"}]},{default:p((()=>[e(d,{value:b(r).name,"onUpdate:value":l[0]||(l[0]=e=>b(r).name=e),placeholder:"请输入"},null,8,["value"])])),_:1}),e(u,{name:"attr_value",label:"规格值",rules:[{required:!0,message:"请输入"}]},{default:p((()=>[e(d,{value:b(r).attr_value,"onUpdate:value":l[1]||(l[1]=e=>b(r).attr_value=e),placeholder:"请输入"},null,8,["value"]),Ze])),_:1}),e(u,{name:"sort",label:"排序"},{default:p((()=>[e(n,{value:b(r).sort,"onUpdate:value":l[2]||(l[2]=e=>b(r).sort=e),placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible"])])}}}),aa=l({__name:"AttrValueModal",props:{show:Boolean,id:Number,goods_id:Number,attrId:Number,attrValueId:Number,row:Object},emits:["fresh"],setup(a,{emit:l}){const d=a,i=u(d,"show",l),o=B();D(i,(e=>{e&&(o.value&&o.value.resetFields(),d.attrValueId&&H((()=>{Object.keys(r).forEach((e=>{r[e]=d.row[e]}))})))}));const r=n({sort:void 0,value:""}),c=()=>{o.value.validate().then((async e=>{const a={...e,attr_id:d.attrId,type_id:d.id||void 0,goods_id:d.goods_id};d.attrValueId?(a.id=d.attrValueId,await _.productConfig.attrValue.edit(a)):await _.productConfig.attrValue.add(a),i.value=!1,l("fresh","attrValueAddEditSubmit")})).catch((e=>{console.log(e)}))};return(l,d)=>{const u=j,n=A,_=oe,v=V,m=q;return t(),s("div",null,[e(m,{visible:b(i),"onUpdate:visible":d[2]||(d[2]=e=>L(i)?i.value=e:null),width:"500px",title:0===a.attrValueId?"添加规格值":"编辑规格值",onOk:c},{default:p((()=>[e(v,{ref_key:"formRef",ref:o,model:b(r),autocomplete:"off","label-col":{span:6},"wrapper-col":{span:18}},{default:p((()=>[e(n,{name:"value",label:"规格值",rules:[{required:!0,message:"请输入"}]},{default:p((()=>[e(u,{value:b(r).value,"onUpdate:value":d[0]||(d[0]=e=>b(r).value=e),placeholder:"请输入"},null,8,["value"])])),_:1}),e(n,{name:"sort",label:"排序"},{default:p((()=>[e(_,{value:b(r).sort,"onUpdate:value":d[1]||(d[1]=e=>b(r).sort=e),placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"])])}}}),la={class:"skubatch-price",style:{"margin-left":"30px"}},ta={key:0},sa=(e=>(P("data-v-6ee69b54"),e=e(),N(),e))((()=>c("div",{class:"danger-color mb16px"}," 注意：没有选择的将被全部应用 ",-1))),da=o(l({__name:"skuBatchStock",props:{attr:Array,tableData:Array,show:Boolean,singSku:Boolean,singSkuId:Number,goods_id:Number},emits:[],setup(a,{emit:l}){const d=a,i=B(),o=u(d,"show",l),r=n({validAttr:[],goSubmit:!1,chg_types:[{value:1,label:"增加"},{value:2,label:"减少"},{value:3,label:"重置"}]}),c=n({chg_type:1,stock_num:""}),k=e=>{let a=+e.stock_num;const l=+c.stock_num;return 1===c.chg_type&&(a+=l),2===c.chg_type&&(a-=l),3===c.chg_type&&(a=l),a<0&&(a=0),a};D((()=>d.show),(e=>{e&&(r.validAttr=d.attr.filter((e=>0!==e.attr_item_choosed.length)).map((e=>{const a=e.attr_item_choosed;return{...e,choosed:"",values:e.values.filter((e=>a.includes(e.id)))}})))}));const w=()=>{i.value.validate().then((async e=>{const a=r.validAttr.filter((e=>e.choosed)).map((e=>String(e.choosed)));let l=[];d.singSku?l=[{id:d.singSkuId,goods_id:d.goods_id,...c}]:d.tableData.forEach((e=>{const t=e.combination_tag.split(",");a.every((e=>t.includes(e)))&&(e.id?l.push({id:e.id,goods_id:d.goods_id,...c}):e.stock_num=k(e))})),_.product.goods.upStock({goods_id:d.goods_id,items:l}).then((e=>{const a=l.reduce(((e,a)=>(e[a.id]=a,e)),{});console.log(a),d.tableData.forEach((e=>{a.hasOwnProperty(e.id)&&(e.stock_num=k(e))}))})),o.value=!1}))};return(l,d)=>{const u=x,n=U,_=A,k=C,S=I,M=de,j=ie,O=oe,D=V,B=q;return t(),s("div",la,[e(B,{visible:b(o),"onUpdate:visible":d[2]||(d[2]=e=>L(o)?o.value=e:null),width:"650px",title:a.singSku?"修改库存":"批量修改库存",onOk:w},{default:p((()=>[e(D,{ref_key:"formRef",ref:i,model:b(c),"label-col":{span:6},"wrapper-col":{span:18}},{default:p((()=>[a.singSku?y("",!0):(t(),s("div",ta,[(t(!0),s(v,null,m(b(r).validAttr,(a=>(t(),f(S,{key:a.id},{default:p((()=>[e(k,{span:18},{default:p((()=>[e(_,{label:a.name},{default:p((()=>[e(n,{value:a.choosed,"onUpdate:value":e=>a.choosed=e,style:{width:"100%"},placeholder:"请选择"},{default:p((()=>[(t(!0),s(v,null,m(a.values,(e=>(t(),f(u,{key:e.id,value:e.id},{default:p((()=>[h(g(e.value),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["value","onUpdate:value"])])),_:2},1032,["label"])])),_:2},1024)])),_:2},1024)))),128)),sa])),e(S,null,{default:p((()=>[e(k,{span:18},{default:p((()=>[e(_,{name:"chg_type",label:"修改方式"},{default:p((()=>[e(j,{value:b(c).chg_type,"onUpdate:value":d[0]||(d[0]=e=>b(c).chg_type=e)},{default:p((()=>[(t(!0),s(v,null,m(b(r).chg_types,(e=>(t(),f(M,{key:e.value,value:e.value},{default:p((()=>[h(g(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1})])),_:1}),e(S,null,{default:p((()=>[e(k,{span:18},{default:p((()=>[e(_,{label:"库存",name:"stock_num",rules:[{required:!0,message:"请输入"}]},{default:p((()=>[e(O,{value:b(c).stock_num,"onUpdate:value":d[1]||(d[1]=e=>b(c).stock_num=e),style:{width:"100%"},min:0,precision:0},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"])])}}}),[["__scopeId","data-v-6ee69b54"]]),ia={class:"spec-table-box-in"},oa={class:"spec-name"},ua={class:"spec-tag"},na={class:"check-block"},ra={key:1},_a={key:1,class:"batch-input flex"},ca={style:{display:"flex","align-items":"center"}},pa={class:"sku-img mt8px"},va=(e=>(P("data-v-9d93b6f1"),e=e(),N(),e))((()=>c("div",{class:"mb8px"}," 规格图片 （没有规格图片时，默认显示主图。买家选择不同规格会看到对应规格图片，建议尺寸：500 x 500像素） ",-1))),ma={class:"flex flex-wrap"},fa=o(l({__name:"Sku",props:{attr:Array,sku_data:Array,goods_type:Number,goods_id:Number,del_attr_value_ids:Array,del_attr_ids:Array,isEdit:Boolean,sku_imgs:Array,isIntegral:Boolean},emits:["update:attr","update:sku_data","update:del_attr_value_ids","update:del_attr_ids","update:sku_imgs"],setup(a,{emit:l}){const d=a,i=B(!1),o=n({attrSmallMap:{},attrBigMap:{},attrSorts:[],BATCH_INPUT:[],batchSku:{},showAttrModal:!1,handlingAttrId:0,handlingAttrValueId:0,showAttrValueModal:!1,handlingAttrValueRow:{},showSkuBatchStock:!1,singSku:!1,singSku_id:0});D((()=>d.isIntegral),(()=>{const e=d.isIntegral?d.isEdit?[]:re.filter((e=>e.isStock)):d.isEdit?re.filter((e=>!e.isStock)):re;o.BATCH_INPUT=e,o.batchSku={...e.reduce(((e,a)=>(e[a.prop]=null,e)),{})}}),{immediate:!0});const r=u(d,"attr",l,[]),k=u(d,"sku_imgs",l,[]);D(r,(e=>{o.attrBigMap=_e(e),o.attrSmallMap=ce(e),o.attrSorts=e.map((e=>e.id)),i.value&&C(),w(),i.value=!0}),{deep:!0});const w=()=>{const e=r.value.find((e=>1===e.is_img));if(!e)return void(k.value=[]);const a=k.value.reduce(((e,a)=>(e[a.id]=a.url,e)),{});k.value=e.values.map((e=>({id:e.id,url:a[e.id]}))).filter((a=>e.attr_item_choosed.includes(a.id)))},x=e=>{o.showSkuBatchStock=!0,e?(o.singSku=!0,o.singSku_id=e):o.singSku=!1},U=e=>{var a;const t=d.sku_data.findIndex((a=>a.combination_tag===e.combination_tag));if(-1!==t){const e=null==(a=d.sku_data)?void 0:a.slice(0);null==e||e.splice(t,1),l("update:sku_data",e)}},S=(e,a)=>{const l=r.value[a],t="up"===e?a-1:a+1;r.value[a]=r.value[t],r.value[t]=l},A=async(e,a,t)=>{if("bigAdd"===e&&(a.attr_item_choosed=[],r.value.push(a)),"bigDel"===e&&(l("update:del_attr_ids",d.del_attr_ids.concat([+r.value[a].id])),r.value.splice(a,1)),"attrValueAdd"!==e&&"attrValueEdit"!==e||(o.handlingAttrId=a,o.handlingAttrValueId=t?t.id:0,o.showAttrValueModal=!0,o.handlingAttrValueRow=t),"attrValueAddEditSubmit"===e&&_.productConfig.attrValue.list({attr_id:o.handlingAttrId,type_id:d.goods_type,goods_id:d.goods_id}).then((({data:e})=>{e.items=e.items.filter((e=>!d.del_attr_value_ids.includes(+e.id))),r.value.forEach((a=>{a.id===o.handlingAttrId&&(a.values=e.items)}))})),"attrValueDel"===e){l("update:del_attr_value_ids",d.del_attr_value_ids.concat([+t]));const e=a,s=t;console.log(r.value,e),r.value.forEach((a=>{a.id==e&&(a.attr_item_choosed=a.attr_item_choosed.filter((e=>+e!=+s)),a.values=a.values.filter((e=>+e.id!=+s)),console.log(a))}))}},C=()=>{if(console.log("trigger skuItemChange"),console.time(),r.value.map((e=>{if(!e)return!0;if(e.attr_item_choosed&&e.attr_item_choosed.length){const a=e.attr_item_choosed,l=e.values.map((e=>e.id)).filter((e=>a.includes(e)));return JSON.stringify(l)===JSON.stringify(a)?(console.log("顺序正确"),!0):(console.log("顺序错误"),e.attr_item_choosed=l.map((e=>e)),!1)}return!0})).includes(!1))return;const e=[];if(r.value.forEach((a=>{a.attr_item_choosed.length>0&&e.unshift(a.attr_item_choosed)})),0===e.length)return void l("update:sku_data",[]);const a=(e=>{const a=[];return function e(l,t,s){if(0==s)return a.push(l);for(let a=0;a<t[s-1].length;a++)e(l.concat(t[s-1][a]),t,s-1)}([],e,e.length),a})(e),t=a.map((e=>({properties_name:e.join("#"),properties:e.map((e=>`${o.attrSmallMap[e].$pid}:${e}`)).join(","),combination_tag:e.sort(((e,a)=>+e-Number(a))).join(),...pe(),...ve(),tempAttrNameProp:{...e.reduce(((e,a)=>(e[o.attrSmallMap[a].$pid]=o.attrSmallMap[a].value,e)),{})}}))),s=d.sku_data.reduce(((e,a)=>(e[a.combination_tag]=a,e)),{});l("update:sku_data",t.map((e=>({...e,...s[e.combination_tag],...e.tempAttrNameProp})))),console.timeEnd()};return(l,d)=>{const i=$,u=M,n=ue,_=ee,w=be,C=oe,I=te;return t(),s("div",null,[(t(!0),s(v,null,m(b(r),((a,l)=>(t(),s("div",{key:a.id,class:"spec-table-box"},[c("div",ia,[c("div",oa,g(a.name),1),c("div",ua,[(t(!0),s(v,null,m(a.attr_item_choosed,((e,a)=>(t(),f(i,{key:a,style:{cursor:"pointer"},onClick:e=>((e,a)=>{r.value[e].attr_item_choosed.splice(a,1)})(l,a)},{default:p((()=>[h(g(b(o).attrSmallMap[e].value),1)])),_:2},1032,["onClick"])))),128)),e(u,{class:"add-sku-btn",type:"primary",size:"small",onClick:e=>A("attrValueAdd",a.id)},{default:p((()=>[h(" 添加 ")])),_:2},1032,["onClick"]),l!==b(r).length-1?(t(),f(b(De),{key:0,title:"向下移动",class:"icon ml8px",onClick:e=>S("down",l)},null,8,["onClick"])):y("",!0),0!==l?(t(),f(b(Ve),{key:1,title:"向上移动",class:"icon ml8px",onClick:e=>S("up",l)},null,8,["onClick"])):y("",!0),0!=+a.goods_id?(t(),f(u,{key:2,plain:"",size:"small",class:"ml8px",danger:"",onClick:e=>A("bigDel",l)},{default:p((()=>[h(" 删除 ")])),_:2},1032,["onClick"])):y("",!0)])]),c("div",na,[e(w,{value:a.attr_item_choosed,"onUpdate:value":e=>a.attr_item_choosed=e,class:"spec-table-checkbox"},{default:p((()=>[(t(!0),s(v,null,m(a.values,(l=>(t(),f(_,{key:l.id,value:l.id},{default:p((()=>[l.goods_id?(t(),f(n,{key:0,trigger:"hover"},{content:p((()=>[c("p",null,[e(u,{type:"text",onClick:e=>A("attrValueEdit",a.id,l)},{default:p((()=>[h(" 编辑 ")])),_:2},1032,["onClick"]),e(u,{type:"text",danger:"",onClick:e=>A("attrValueDel",a.id,l.id)},{default:p((()=>[h(" 删除 ")])),_:2},1032,["onClick"])])])),default:p((()=>[c("span",null,g(l.value),1)])),_:2},1024)):(t(),s("span",ra,g(l.value),1))])),_:2},1032,["value"])))),128))])),_:2},1032,["value","onUpdate:value"])])])))),128)),a.goods_type?(t(),f(u,{key:0,type:"primary",style:{"margin-left":"80px"},class:"mb16px",ghost:"",onClick:d[0]||(d[0]=e=>b(o).showAttrModal=!0)},{default:p((()=>[h(" 添加规格 ")])),_:1})):y("",!0),b(o).BATCH_INPUT.length?(t(),s("div",_a,[h(" 批量填写 "),(t(!0),s(v,null,m(b(o).BATCH_INPUT,((e,a)=>T((t(),f(C,{key:`batch_${a}`,value:b(o).batchSku[`${e.prop}`],"onUpdate:value":a=>b(o).batchSku[`${e.prop}`]=a,placeholder:e.title,style:{width:"140px"},class:"batch-input-item"},null,8,["value","onUpdate:value","placeholder"])),[[z,!e.hidden]]))),128)),c("div",ca,[e(Xe,{attr:b(r),"table-data":a.sku_data,"batch-sku":b(o).batchSku,"is-edit":a.isEdit},null,8,["attr","table-data","batch-sku","is-edit"])])])):y("",!0),e(Je,{"attr-sorts":b(o).attrSorts,"attr-big-map":b(o).attrBigMap,"table-data":a.sku_data,"is-edit":a.isEdit,"is-integral":a.isIntegral,onShowSkuBatchStockDo:x,onDel:U},null,8,["attr-sorts","attr-big-map","table-data","is-edit","is-integral"]),c("div",pa,[va,c("div",ma,[(t(!0),s(v,null,m(b(k),((a,l)=>(t(),s("div",{key:l,style:{"text-align":"center"}},[e(I,{filelist:a.url,"onUpdate:filelist":e=>a.url=e},null,8,["filelist","onUpdate:filelist"]),c("span",null,g(b(o).attrSmallMap[a.id].value),1)])))),128))])]),e(ea,{id:a.goods_type,show:b(o).showAttrModal,"onUpdate:show":d[1]||(d[1]=e=>b(o).showAttrModal=e),goods_id:a.goods_id,onFresh:A},null,8,["id","show","goods_id"]),e(aa,{id:a.goods_type,show:b(o).showAttrValueModal,"onUpdate:show":d[2]||(d[2]=e=>b(o).showAttrValueModal=e),"attr-id":b(o).handlingAttrId,"attr-value-id":b(o).handlingAttrValueId,row:b(o).handlingAttrValueRow,goods_id:a.goods_id,onFresh:A},null,8,["id","show","attr-id","attr-value-id","row","goods_id"]),e(da,{show:b(o).showSkuBatchStock,"onUpdate:show":d[3]||(d[3]=e=>b(o).showSkuBatchStock=e),"sing-sku":b(o).singSku,"sing-sku-id":b(o).singSku_id,attr:b(r),"table-data":a.sku_data,goods_id:a.goods_id},null,8,["show","sing-sku","sing-sku-id","attr","table-data","goods_id"])])}}}),[["__scopeId","data-v-9d93b6f1"]]),ha={class:"flex flex-wrap"},ga={class:"mb8px"},ba=o(l({__name:"ServiceRights",props:{service_ids:Array},emits:["update:service_ids"],setup(a,{emit:l}){const d=u(a,"service_ids",l),i=n({service:[]});r((()=>{o()}));const o=()=>{_.productConfig.service.list({is_select:1}).then((e=>{i.service=e.data.items}))};return(a,l)=>{const o=we,u=ee,n=be;return t(),f(n,{value:b(d),"onUpdate:value":l[0]||(l[0]=e=>L(d)?d.value=e:null)},{default:p((()=>[c("div",ha,[(t(!0),s(v,null,m(b(i).service,(a=>(t(),s("div",{key:a.id,class:"box mr16px mb8px"},[c("div",ga,[e(o,{width:100,src:a.icon},null,8,["src"])]),e(u,{value:a.id},{default:p((()=>[h(g(a.name),1)])),_:2},1032,["value"])])))),128))])])),_:1},8,["value"])}}}),[["__scopeId","data-v-c741a7b7"]]),ya={class:"flex"},ka={class:"flex"},wa=c("br",null,null,-1),xa=c("br",null,null,-1),Ua=c("br",null,null,-1),Sa={key:0},Aa=c("br",null,null,-1),Ca={class:"flex"},Ia=c("div",{class:"tips"},[c("div",null," 1.尺寸：800 x 800 像素 "),c("div",null," 2.大小：1M以内 "),c("div",null," 3.数量：限制在7张以内 ")],-1),Ma={class:"flex"},ja=c("div",{class:"tips ml8px"},[c("div",null," 1.尺寸:此处可使用1:1或16:9比例视频 "),c("div",null," 2.时长:≤60s,建议30秒以内 "),c("div",null," 3.内容:突出商品1-2个核心卖点 ")],-1),Oa=c("div",{class:"tips ml16px"},[c("div",null," 1.尺寸：702 x 380 像素 "),c("div",null," 2.大小：建议1M以内 "),c("div",null," 3.格式：图片仅支持JPG,PNG格式 "),c("div",null," 4.显示：展示在商品组件>样式3(长图) 选用本样式时务必上传 ")],-1),Da=c("div",{class:"tips"},[c("div",null," 1.尺寸：5:4 "),h(),c("div",null," 2.大小：建议1M以内 "),h(),c("div",null," 3.格式：图片仅支持JPG,PNG格式 "),h(),c("div",null," 4.显示：用于商品分享 ")],-1),Ba={class:"flex"},Ea=c("div",{class:"tips ml8px"},[c("div",null," 1.尺寸:此处可使用1:1或16:9比例视频 "),c("div",null," 2.时长:≤60s,建议30秒以内 "),c("div",null," 3.内容:突出商品1-2个核心卖点 "),c("div",null," 4.数量:限制在5个以内 "),c("div",null," 5.显示:在C端商品详情里展示 ")],-1),Pa=c("br",null,null,-1),Na=c("span",{class:"tips"},"最多勾选2个标签",-1),Va="_goods_pre_id",qa=l({__name:"ProductAdd",setup(a){const l=R(),d=F(),i=(e,a)=>(a.label+a.value).includes(e);let o=B(l.params.id);const u=Y("enums"),k="productEdit"===l.name,w="productAdd"===l.name,E="productCopy"===l.name,P=B(1==+l.query.isIntegral),N=O((()=>P.value?u.value.goods_type.filter((e=>4===e.value)):u.value.goods_type.filter((e=>4!==e.value)))),q=B(),L=n({loading:!1,attr:[],sku_data:[],attrList:[],submitLoading:!1,cats:[],del_attr_ids:[],del_attr_value_ids:[],sku_imgs:[],suppliers:[],proviceList:[],cityList:[],districtList:[],freightModels:[],labels:[],freightInsurance:[],coupons:[]}),H=n({type:N.value[0].value,convert_coupon_ids:[],title:"",subtitle:"",list_subtitle:"",cat_ids:[],key_phrase:["","",""],sort:void 0,supplier_id:void 0,goods_sn:"",freight_id:void 0,insurance_id:void 0,receiver_name:"",receiver_phone:"",receiver_province_code:void 0,receiver_city_code:void 0,receiver_district_code:void 0,receiver_address:"",platform:u.value.goods_platform.map((e=>e.value)),member_type:u.value.member_type.map((e=>e.value)),stock_type:2,param:[],service_ids:[],market_price:"",shop_price:"",store_price:"",partner_price:"",store_first_fee:"",store_second_fee:"",partner_first_fee:"",order_integral:void 0,first_integral:void 0,second_integral:void 0,sell_out_num:"",goods_type:"",imgs:[],video:[],long_thumb:"",share_thumb:"",share_title:"",detail_video:[],content:"",start_at:"",end_at:"","start_at-end_at":[],single_max:void 0,single_min:void 0,day_max:void 0,limit_max:void 0,zu_num:void 0,label_ids:[],is_no_reason:1,is_group:0,"group_start_at-group_end_at":[]});D((()=>H.title),((e,a)=>{a===H.share_title&&(H.share_title=e)}));const ue=n({stock_num:"",sale_num:""});r((async()=>{k&&re(),w&&ne(),E&&(await re(),await ne()),_e(),L.cats=xe(),L.suppliers=Ue(),L.labels=Se(),L.freightInsurance=Ae(),L.coupons=Ce(),Me(1),pe()}));const ne=async()=>{if(G.get(Va))return void(o.value=G.get(Va));const{data:e}=await _.product.goods.preid();o.value=e.goods_pre_id,G.set(Va,String(e.goods_pre_id))},re=async()=>{try{L.loading=!0;const{data:e}=await _.product.goods.detail({id:o.value});me(H,e.goods),ke(null).insertForm(ue,e.goods);const{attr:a,sku_data:l,sku_imgs:t}=fe(e);P.value=4===H.type,L.attr=a,L.sku_data=l,L.sku_imgs=t,L.loading=!1}catch(e){throw L.loading=!1,e}},_e=async()=>{const e=await _.productConfig.attr.list({is_select:1,goods_id:o.value});L.attrList=e.data.items},ce=async e=>{const a=await _.productConfig.attr.info({type_id:e,goods_id:o.value});a.data.items.forEach((e=>{e.attr_item_choosed=[]})),L.del_attr_ids=[],L.attr=a.data.items},pe=async()=>{const e=await _.product.goods.freightModel({is_select:1});L.freightModels=e.data.items},ve=e=>{if(1!==H.is_no_reason)return;const a=L.suppliers.find((a=>a.id===e));ke(null).insertPartForm(H,{receiver_address:a.receiver_address,receiver_name:a.receiver_name,receiver_phone:a.receiver_phone,receiver_province_code:a.receiver_province_code,receiver_city_code:a.receiver_city_code,receiver_district_code:a.receiver_district_code})},we=e=>{1===e?H.supplier_id&&ve(H.supplier_id):ke(null).insertPartForm(H,{receiver_address:"",receiver_name:"",receiver_phone:"",receiver_province_code:void 0,receiver_city_code:void 0,receiver_district_code:void 0,insurance_id:void 0})},Ie=()=>{q.value.validate().then((async e=>{const a={...H,del_attr_ids:L.del_attr_ids,del_attr_value_ids:L.del_attr_value_ids,sku_imgs:L.sku_imgs,attr:L.attr,sku_data:he(L.sku_data,L.attr)};console.log("待提交数据:",JSON.parse(JSON.stringify(a)));const t=ge(a,P.value);try{L.submitLoading=!0;const e=await ye(t.thumb);t.thumb_extra=JSON.stringify([e.w,e.h]),k&&await _.product.goods.edit({...t,id:o.value}),w&&await _.product.goods.add({...t,goods_pre_id:o.value}),E&&await _.product.goods.add({...t,goods_pre_id:o.value,copy_id:l.params.id}),G.remove(Va),d.push({name:"productList"}),L.submitLoading=!1}catch(s){t.thumb_extra||K.error(s),console.log(s),L.submitLoading=!1}}))};D((()=>H.receiver_province_code),((e,a)=>{e&&(Me(2,e),void 0!==a&&(H.receiver_city_code=void 0,H.receiver_district_code=void 0))})),D((()=>H.receiver_city_code),((e,a)=>{e&&(Me(3,e),void 0!==a&&(H.receiver_district_code=void 0))}));const Me=(e,a)=>{let l=(e=>{let a="provice";return 2===e&&(a="city"),3===e&&(a="district"),a})(e);_.common.getAreaList({level:e,code:a,is_select:1}).then((e=>{L[l+"List"]=e.data}))};return(a,l)=>{const d=Q,n=A,r=C,_=I,w=W,O=j,D=S,B=oe,E=x,R=U,F=be,Y=de,G=ie,K=se,ne=$,re=te,_e=le,pe=ae,me=X,fe=ee,he=Z,ge=V,ye=M,ke=J("FixBottomBar"),xe=qe;return t(),s("div",null,[e(ge,{ref_key:"formRef",ref:q,model:b(H),autocomplete:"off","label-col":{span:6},"wrapper-col":{span:18}},{default:p((()=>[e(K,{title:"基本信息"},{default:p((()=>[e(_,null,{default:p((()=>[e(r,{span:8},{default:p((()=>[e(n,{name:"title",label:"商品名称",required:""},{default:p((()=>[e(d,{value:b(H).title,"onUpdate:value":l[0]||(l[0]=e=>b(H).title=e),placeholder:"请输入",maxlength:60,"show-count":"",style:{height:"100px"}},null,8,["value"])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"subtitle",label:"商品副标题"},{default:p((()=>[e(d,{value:b(H).subtitle,"onUpdate:value":l[1]||(l[1]=e=>b(H).subtitle=e),placeholder:"请输入",maxlength:100,"show-count":"",style:{height:"100px"}},null,8,["value"])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"list_subtitle",label:"列表描述"},{default:p((()=>[e(d,{value:b(H).list_subtitle,"onUpdate:value":l[2]||(l[2]=e=>b(H).list_subtitle=e),placeholder:"请输入",maxlength:16,"show-count":"",style:{height:"100px"}},null,8,["value"])])),_:1})])),_:1})])),_:1}),e(_,null,{default:p((()=>[e(r,{span:8},{default:p((()=>[e(n,{name:"cat_ids",label:"商品分类",rules:[{required:!0,message:"请选择"}]},{default:p((()=>[e(w,{value:b(H).cat_ids,"onUpdate:value":l[3]||(l[3]=e=>b(H).cat_ids=e),options:b(L).cats,placeholder:"请选择"},null,8,["value","options"])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"key_phrase",label:"商品关键词"},{default:p((()=>[c("div",ya,[e(D,null,{default:p((()=>[e(O,{value:b(H).key_phrase[0],"onUpdate:value":l[4]||(l[4]=e=>b(H).key_phrase[0]=e),placeholder:"请输入",max:"6"},null,8,["value"])])),_:1}),e(D,null,{default:p((()=>[e(O,{value:b(H).key_phrase[1],"onUpdate:value":l[5]||(l[5]=e=>b(H).key_phrase[1]=e),placeholder:"请输入",max:"6"},null,8,["value"])])),_:1}),e(D,null,{default:p((()=>[e(O,{value:b(H).key_phrase[2],"onUpdate:value":l[6]||(l[6]=e=>b(H).key_phrase[2]=e),placeholder:"请输入",max:"6"},null,8,["value"])])),_:1})])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"sort",label:"商品排序"},{default:p((()=>[e(B,{value:b(H).sort,"onUpdate:value":l[7]||(l[7]=e=>b(H).sort=e),style:{width:"100%"},placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1})])),_:1}),e(_,null,{default:p((()=>[e(r,{span:8},{default:p((()=>[e(n,{name:"supplier_id",label:"供应商"},{default:p((()=>[e(R,{value:b(H).supplier_id,"onUpdate:value":l[8]||(l[8]=e=>b(H).supplier_id=e),placeholder:"请选择","show-search":"","filter-option":i,onChange:ve},{default:p((()=>[(t(!0),s(v,null,m(b(L).suppliers,(e=>(t(),f(E,{key:e.id,value:e.id,label:e.name+e.phone},{default:p((()=>[h(g(e.name)+"-"+g(e.phone),1)])),_:2},1032,["value","label"])))),128))])),_:1},8,["value"])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"goods_sn",label:"商品编码"},{default:p((()=>[e(O,{value:b(H).goods_sn,"onUpdate:value":l[9]||(l[9]=e=>b(H).goods_sn=e),placeholder:"请输入",max:"20"},null,8,["value"])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"freight_id",label:"运费模板",rules:[{required:!0,message:"请选择"}]},{default:p((()=>[e(R,{value:b(H).freight_id,"onUpdate:value":l[10]||(l[10]=e=>b(H).freight_id=e),placeholder:"请选择","show-search":"","filter-option":i},{default:p((()=>[(t(!0),s(v,null,m(b(L).freightModels,(e=>(t(),f(E,{key:e.id,value:e.id,label:e.name},{default:p((()=>[h(g(e.name),1)])),_:2},1032,["value","label"])))),128))])),_:1},8,["value"])])),_:1})])),_:1})])),_:1}),b(P)?y("",!0):(t(),f(_,{key:0},{default:p((()=>[e(r,{span:8},{default:p((()=>[e(n,{name:"is_no_reason",label:"七天无理由退换","label-col":{span:8},"wrapper-col":{span:16}},{default:p((()=>[e(R,{value:b(H).is_no_reason,"onUpdate:value":l[11]||(l[11]=e=>b(H).is_no_reason=e),placeholder:"请选择",onChange:we},{default:p((()=>[e(E,{value:1},{default:p((()=>[h(" 支持 ")])),_:1}),e(E,{value:0},{default:p((()=>[h(" 不支持 ")])),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"insurance_id",label:"运费险"},{default:p((()=>[e(R,{value:b(H).insurance_id,"onUpdate:value":l[12]||(l[12]=e=>b(H).insurance_id=e),placeholder:"请选择","show-search":"","filter-option":i,disabled:0===b(H).is_no_reason},{default:p((()=>[(t(!0),s(v,null,m(b(L).freightInsurance,(e=>(t(),f(E,{key:e.id,value:e.id,label:e.name},{default:p((()=>[h(g(e.name),1)])),_:2},1032,["value","label"])))),128))])),_:1},8,["value","disabled"])])),_:1})])),_:1})])),_:1})),b(P)?y("",!0):(t(),f(_,{key:1},{default:p((()=>[e(r,{span:24},{default:p((()=>[e(n,{label:"退货地址","label-col":{span:2},"wrapper-col":{span:22}},{default:p((()=>[c("div",ka,[e(D,null,{default:p((()=>[e(O,{value:b(H).receiver_name,"onUpdate:value":l[13]||(l[13]=e=>b(H).receiver_name=e),placeholder:"请输入联系人姓名",style:{"margin-right":"8px",width:"140px"},class:"flex-no-shink",disabled:0===b(H).is_no_reason},null,8,["value","disabled"])])),_:1}),e(D,null,{default:p((()=>[e(B,{value:b(H).receiver_phone,"onUpdate:value":l[14]||(l[14]=e=>b(H).receiver_phone=e),placeholder:"请输入联系人手机号",style:{"margin-right":"8px",width:"150px"},class:"flex-no-shink",disabled:0===b(H).is_no_reason},null,8,["value","disabled"])])),_:1}),e(D,null,{default:p((()=>[e(R,{value:b(H).receiver_province_code,"onUpdate:value":l[15]||(l[15]=e=>b(H).receiver_province_code=e),style:{width:"140px","margin-right":"8px"},placeholder:"省",class:"flex-no-shink",disabled:0===b(H).is_no_reason},{default:p((()=>[(t(!0),s(v,null,m(b(L).proviceList,(e=>(t(),f(E,{key:e.code},{default:p((()=>[h(g(e.name),1)])),_:2},1024)))),128))])),_:1},8,["value","disabled"])])),_:1}),e(D,null,{default:p((()=>[e(R,{value:b(H).receiver_city_code,"onUpdate:value":l[16]||(l[16]=e=>b(H).receiver_city_code=e),style:{width:"140px","margin-right":"8px"},placeholder:"市",class:"flex-no-shink",disabled:0===b(H).is_no_reason},{default:p((()=>[(t(!0),s(v,null,m(b(L).cityList,(e=>(t(),f(E,{key:e.code},{default:p((()=>[h(g(e.name),1)])),_:2},1024)))),128))])),_:1},8,["value","disabled"])])),_:1}),e(D,null,{default:p((()=>[e(R,{value:b(H).receiver_district_code,"onUpdate:value":l[17]||(l[17]=e=>b(H).receiver_district_code=e),style:{width:"140px","margin-right":"8px"},placeholder:"区",class:"flex-no-shink",disabled:0===b(H).is_no_reason},{default:p((()=>[(t(!0),s(v,null,m(b(L).districtList,(e=>(t(),f(E,{key:e.code},{default:p((()=>[h(g(e.name),1)])),_:2},1024)))),128))])),_:1},8,["value","disabled"])])),_:1}),e(D,null,{default:p((()=>[e(O,{value:b(H).receiver_address,"onUpdate:value":l[18]||(l[18]=e=>b(H).receiver_address=e),placeholder:"详细地址",disabled:0===b(H).is_no_reason},null,8,["value","disabled"])])),_:1})])])),_:1})])),_:1})])),_:1})),e(_,null,{default:p((()=>[e(r,{span:8},{default:p((()=>[e(n,{label:"商品类型"},{default:p((()=>[e(R,{value:b(H).type,"onUpdate:value":l[19]||(l[19]=e=>b(H).type=e),placeholder:"请选择"},{default:p((()=>[(t(!0),s(v,null,m(b(N),(e=>(t(),f(E,{key:e.value,value:e.value},{default:p((()=>[h(g(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1}),2==+b(H).type?(t(),f(r,{key:0,span:8},{default:p((()=>[e(n,{label:"选择兑换优惠券",required:"","label-col":{span:8},"wrapper-col":{span:16}},{default:p((()=>[e(R,{value:b(H).convert_coupon_ids,"onUpdate:value":l[20]||(l[20]=e=>b(H).convert_coupon_ids=e),placeholder:"请选择",mode:"multiple"},{default:p((()=>[(t(!0),s(v,null,m(b(L).coupons,(e=>(t(),f(E,{key:e.id,value:e.id},{default:p((()=>[h(g(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1})):y("",!0),4==+b(H).type?(t(),f(r,{key:1,span:8},{default:p((()=>[e(n,{label:"积分价格",name:"shop_price",required:"","label-col":{span:8},"wrapper-col":{span:16}},{default:p((()=>[e(B,{value:b(H).shop_price,"onUpdate:value":l[21]||(l[21]=e=>b(H).shop_price=e),style:{width:"100%"},placeholder:"请输入",min:0,precision:0},null,8,["value"])])),_:1})])),_:1})):y("",!0)])),_:1}),e(_,null,{default:p((()=>[e(r,{span:8},{default:p((()=>[e(n,{name:"platform",label:"上架平台"},{default:p((()=>[e(F,{value:b(H).platform,"onUpdate:value":l[22]||(l[22]=e=>b(H).platform=e),options:b(u).goods_platform},null,8,["value","options"])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"member_type",label:"可购买对象"},{default:p((()=>[e(F,{value:b(H).member_type,"onUpdate:value":l[23]||(l[23]=e=>b(H).member_type=e),options:b(u).member_type},null,8,["value","options"])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"stock_type",label:"库存显示",required:""},{default:p((()=>[e(G,{value:b(H).stock_type,"onUpdate:value":l[24]||(l[24]=e=>b(H).stock_type=e)},{default:p((()=>[(t(!0),s(v,null,m(b(u).goods_stock_type,(e=>(t(),f(Y,{key:e.value,value:e.value},{default:p((()=>[h(g(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1})])),_:1})])),_:1}),wa,e(K,{title:"商品参数"},{default:p((()=>[e(He,{param:b(H).param,"onUpdate:param":l[25]||(l[25]=e=>b(H).param=e)},null,8,["param"])])),_:1}),xa,b(P)?y("",!0):(t(),f(K,{key:0,title:"服务权益"},{default:p((()=>[e(ba,{service_ids:b(H).service_ids,"onUpdate:service_ids":l[26]||(l[26]=e=>b(H).service_ids=e)},null,8,["service_ids"])])),_:1})),Ua,e(K,{title:"销售属性"},{default:p((()=>[b(P)?y("",!0):(t(),s("div",Sa,[e(_,null,{default:p((()=>[e(r,{span:8,class:"mb16px",style:{"text-align":"center"}},{default:p((()=>[e(ne,{color:"blue"},{default:p((()=>[h(" 价格 ")])),_:1})])),_:1}),e(r,{span:8,class:"mb16px",style:{"text-align":"center"}},{default:p((()=>[e(ne,{color:"blue"},{default:p((()=>[h(" 返利 ")])),_:1})])),_:1}),e(r,{span:8,class:"mb16px",style:{"text-align":"center"}},{default:p((()=>[e(ne,{color:"blue"},{default:p((()=>[h(" 积分 ")])),_:1})])),_:1})])),_:1}),e(_,null,{default:p((()=>[e(r,{span:8},{default:p((()=>[e(n,{name:"market_price",label:"市场价",required:""},{default:p((()=>[e(B,{value:b(H).market_price,"onUpdate:value":l[27]||(l[27]=e=>b(H).market_price=e),style:{width:"100%"},placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"store_first_fee",label:"桔掌柜返利",required:"","label-col":{span:8},"wrapper-col":{span:16}},{default:p((()=>[e(B,{value:b(H).store_first_fee,"onUpdate:value":l[28]||(l[28]=e=>b(H).store_first_fee=e),style:{width:"100%"},placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"order_integral",label:"下单积分奖励","label-col":{span:8},"wrapper-col":{span:16}},{default:p((()=>[e(B,{value:b(H).order_integral,"onUpdate:value":l[29]||(l[29]=e=>b(H).order_integral=e),style:{width:"100%"},placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1})])),_:1}),e(_,null,{default:p((()=>[e(r,{span:8},{default:p((()=>[e(n,{name:"shop_price",label:"会员价",required:""},{default:p((()=>[e(B,{value:b(H).shop_price,"onUpdate:value":l[30]||(l[30]=e=>b(H).shop_price=e),style:{width:"100%"},placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"store_second_fee",label:"二级桔掌柜返利",required:"","label-col":{span:8},"wrapper-col":{span:16}},{default:p((()=>[e(B,{value:b(H).store_second_fee,"onUpdate:value":l[31]||(l[31]=e=>b(H).store_second_fee=e),style:{width:"100%"},placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"first_integral",label:"一级积分奖励","label-col":{span:8},"wrapper-col":{span:16}},{default:p((()=>[e(B,{value:b(H).first_integral,"onUpdate:value":l[32]||(l[32]=e=>b(H).first_integral=e),style:{width:"100%"},placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1})])),_:1}),e(_,null,{default:p((()=>[e(r,{span:8},{default:p((()=>[e(n,{name:"store_price",label:"桔掌柜价",required:""},{default:p((()=>[e(B,{value:b(H).store_price,"onUpdate:value":l[33]||(l[33]=e=>b(H).store_price=e),style:{width:"100%"},placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"partner_first_fee",label:"优秀桔掌柜返利",required:"","label-col":{span:8},"wrapper-col":{span:16}},{default:p((()=>[e(B,{value:b(H).partner_first_fee,"onUpdate:value":l[34]||(l[34]=e=>b(H).partner_first_fee=e),style:{width:"100%"},placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"second_integral",label:"二级积分奖励","label-col":{span:8},"wrapper-col":{span:16}},{default:p((()=>[e(B,{value:b(H).second_integral,"onUpdate:value":l[35]||(l[35]=e=>b(H).second_integral=e),style:{width:"100%"},placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1})])),_:1}),e(_,null,{default:p((()=>[e(r,{span:8},{default:p((()=>[e(n,{name:"partner_price",label:"优秀桔掌柜价",required:""},{default:p((()=>[e(B,{value:b(H).partner_price,"onUpdate:value":l[36]||(l[36]=e=>b(H).partner_price=e),style:{width:"100%"},placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1})])),_:1})])),e(_,null,{default:p((()=>[e(r,{span:8,class:"mb16px",style:{"text-align":"center"}},{default:p((()=>[e(ne,{color:"blue"},{default:p((()=>[h(" 库存 ")])),_:1})])),_:1})])),_:1}),e(_,null,{default:p((()=>[e(r,{span:8},{default:p((()=>[e(n,{label:"商品总库存"},{default:p((()=>[e(B,{value:b(ue).stock_num,"onUpdate:value":l[37]||(l[37]=e=>b(ue).stock_num=e),disabled:"",style:{width:"100%"},placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{label:"商品销量"},{default:p((()=>[e(B,{value:b(ue).sale_num,"onUpdate:value":l[38]||(l[38]=e=>b(ue).sale_num=e),disabled:"",style:{width:"100%"},placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"sell_out_num",label:"即将售罄",required:"","label-col":{span:8},"wrapper-col":{span:16}},{default:p((()=>[e(B,{value:b(H).sell_out_num,"onUpdate:value":l[39]||(l[39]=e=>b(H).sell_out_num=e),style:{width:"100%"},placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1})])),_:1}),e(_,null,{default:p((()=>[e(r,{span:8,class:"mb16px",style:{"text-align":"center"}},{default:p((()=>[e(ne,{color:"blue"},{default:p((()=>[h(" 规格设置 ")])),_:1})])),_:1})])),_:1}),e(_,null,{default:p((()=>[e(r,{span:8},{default:p((()=>[e(n,{label:"规格类目",name:"goods_type",rules:[{required:!0,message:"请输入"}]},{default:p((()=>[e(R,{value:b(H).goods_type,"onUpdate:value":l[40]||(l[40]=e=>b(H).goods_type=e),placeholder:"请选择",onChange:ce},{default:p((()=>[(t(!0),s(v,null,m(b(L).attrList,(e=>(t(),f(E,{key:e.id,value:e.id},{default:p((()=>[h(g(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1})])),_:1}),e(fa,{attr:b(L).attr,"onUpdate:attr":l[41]||(l[41]=e=>b(L).attr=e),sku_data:b(L).sku_data,"onUpdate:sku_data":l[42]||(l[42]=e=>b(L).sku_data=e),del_attr_value_ids:b(L).del_attr_value_ids,"onUpdate:del_attr_value_ids":l[43]||(l[43]=e=>b(L).del_attr_value_ids=e),del_attr_ids:b(L).del_attr_ids,"onUpdate:del_attr_ids":l[44]||(l[44]=e=>b(L).del_attr_ids=e),sku_imgs:b(L).sku_imgs,"onUpdate:sku_imgs":l[45]||(l[45]=e=>b(L).sku_imgs=e),"is-edit":k,goods_type:b(H).goods_type,goods_id:b(o),"is-integral":b(P)},null,8,["attr","sku_data","del_attr_value_ids","del_attr_ids","sku_imgs","goods_type","goods_id","is-integral"])])),_:1}),Aa,e(K,{title:"商品描述"},{default:p((()=>[e(n,{name:"imgs",label:"商品相册",rules:[{required:!0,message:"请上传图片"}],"label-col":{span:2}},{default:p((()=>[c("div",Ca,[e(re,{filelist:b(H).imgs,"onUpdate:filelist":l[46]||(l[46]=e=>b(H).imgs=e),"max-count":7,multiple:""},null,8,["filelist"]),Ia])])),_:1}),e(n,{name:"imgs",label:"商品视频","label-col":{span:2}},{default:p((()=>[c("div",Ma,[e(_e,{list:b(H).video,"onUpdate:list":l[47]||(l[47]=e=>b(H).video=e),style:{"margin-top":"5px"}},null,8,["list"]),ja])])),_:1}),e(_,null,{default:p((()=>[e(r,{span:8},{default:p((()=>[e(n,{name:"long_thumb",label:"商品长图"},{default:p((()=>[e(re,{filelist:b(H).long_thumb,"onUpdate:filelist":l[48]||(l[48]=e=>b(H).long_thumb=e),class:"long_img"},null,8,["filelist"]),Oa])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"share_thumb",label:"小程序分享图"},{default:p((()=>[e(re,{filelist:b(H).share_thumb,"onUpdate:filelist":l[49]||(l[49]=e=>b(H).share_thumb=e)},null,8,["filelist"])])),_:1}),Da])),_:1})])),_:1}),e(_,null,{default:p((()=>[e(r,{span:8},{default:p((()=>[e(n,{name:"title",label:"小程序分享标题",required:"","label-col":{span:8}},{default:p((()=>[e(O,{value:b(H).share_title,"onUpdate:value":l[50]||(l[50]=e=>b(H).share_title=e),placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1})])),_:1}),e(n,{name:"detail_video",label:"视频集","label-col":{span:2}},{default:p((()=>[c("div",Ba,[e(_e,{list:b(H).detail_video,"onUpdate:list":l[51]||(l[51]=e=>b(H).detail_video=e),style:{"margin-top":"5px"},max:5,"need-size":!0},null,8,["list"]),Ea])])),_:1}),e(n,{name:"content",label:"图文详情","label-col":{span:2}},{default:p((()=>[e(pe,{value:b(H).content,"onUpdate:value":l[52]||(l[52]=e=>b(H).content=e)},null,8,["value"])])),_:1})])),_:1}),Pa,e(K,{title:"功能设置"},{default:p((()=>[e(_,null,{default:p((()=>[e(r,{span:8},{default:p((()=>[e(n,{name:"start_at-end_at",label:"上下架时间",required:""},{default:p((()=>[e(me,{value:b(H)["start_at-end_at"],"onUpdate:value":l[53]||(l[53]=e=>b(H)["start_at-end_at"]=e),"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",placeholder:["选择上架时间","选择下架时间"]},null,8,["value"])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"single_max",label:"单次最多购买"},{default:p((()=>[e(B,{value:b(H).single_max,"onUpdate:value":l[54]||(l[54]=e=>b(H).single_max=e),placeholder:"请输入","addon-after":"件"},null,8,["value"])])),_:1})])),_:1}),e(r,{span:8},{default:p((()=>[e(n,{name:"single_min",label:"单次最少购买"},{default:p((()=>[e(B,{value:b(H).single_min,"onUpdate:value":l[55]||(l[55]=e=>b(H).single_min=e),placeholder:"请输入","addon-after":"件"},null,8,["value"])])),_:1})])),_:1})])),_:1}),e(_,null,{default:p((()=>[b(P)?y("",!0):(t(),f(r,{key:0,span:8},{default:p((()=>[e(n,{name:"day_max",label:"24小时最多购买","label-col":{span:8}},{default:p((()=>[e(B,{value:b(H).day_max,"onUpdate:value":l[56]||(l[56]=e=>b(H).day_max=e),placeholder:"请输入","addon-after":"件"},null,8,["value"])])),_:1})])),_:1})),e(r,{span:8},{default:p((()=>[e(n,{name:"limit_max",label:"总最多购买"},{default:p((()=>[e(B,{value:b(H).limit_max,"onUpdate:value":l[57]||(l[57]=e=>b(H).limit_max=e),placeholder:"请输入","addon-after":"件"},null,8,["value"])])),_:1})])),_:1}),b(P)?y("",!0):(t(),f(r,{key:1,span:8},{default:p((()=>[e(n,{name:"zu_num",label:"组合购"},{default:p((()=>[e(B,{value:b(H).zu_num,"onUpdate:value":l[58]||(l[58]=e=>b(H).zu_num=e),placeholder:"请输入","addon-after":"件"},null,8,["value"])])),_:1})])),_:1}))])),_:1}),e(n,{name:"label_ids",label:"商品标签","label-col":{span:2}},{default:p((()=>[e(F,{value:b(H).label_ids,"onUpdate:value":l[59]||(l[59]=e=>b(H).label_ids=e)},{default:p((()=>[(t(!0),s(v,null,m(b(L).labels,(e=>(t(),f(fe,{key:e.id,value:e.id,disabled:b(H).label_ids.length>1&&!b(H).label_ids.includes(e.id)},{default:p((()=>[h(g(e.name),1)])),_:2},1032,["value","disabled"])))),128))])),_:1},8,["value"]),Na])),_:1}),b(P)?y("",!0):(t(),f(_,{key:0},{default:p((()=>[e(r,{span:4},{default:p((()=>[e(n,{name:"is_group",label:"团购商品","label-col":{span:12}},{default:p((()=>[e(he,{checked:b(H).is_group,"onUpdate:checked":l[60]||(l[60]=e=>b(H).is_group=e),"un-checked-value":0,"checked-value":1},null,8,["checked"])])),_:1})])),_:1}),1===b(H).is_group?(t(),f(r,{key:0,span:8},{default:p((()=>[e(n,{name:"group_start_at-group_end_at",label:"团购时间",required:""},{default:p((()=>[e(me,{value:b(H)["group_start_at-group_end_at"],"onUpdate:value":l[61]||(l[61]=e=>b(H)["group_start_at-group_end_at"]=e),"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",placeholder:["团购开始时间","团购结束时间"]},null,8,["value"])])),_:1})])),_:1})):y("",!0)])),_:1}))])),_:1})])),_:1},8,["model"]),e(ke,null,{default:p((()=>[e(ye,{type:"primary",loading:b(L).submitLoading,onClick:Ie},{default:p((()=>[h(" 提交 ")])),_:1},8,["loading"])])),_:1}),T(e(xe,{text:"加载中"},null,512),[[z,b(L).loading]])])}}});export{qa as default};
