import{c4 as e,c5 as n,Q as t,d as a,r,aX as i,c6 as u,an as l,e as o,ak as s,ai as c,ac as v,aK as d,c as f,aG as p,l as g,al as m,bv as b,ar as h,bB as y,P as N,c7 as S,J as E,bi as w,aB as I,U as x}from"./index-c2ae2a0e.js";function k(){return"function"==typeof BigInt}function M(e){var n=e.trim(),t=n.startsWith("-");t&&(n=n.slice(1)),(n=n.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,"")).startsWith(".")&&(n="0".concat(n));var a=n||"0",r=a.split("."),i=r[0]||"0",u=r[1]||"0";"0"===i&&"0"===u&&(t=!1);var l=t?"-":"";return{negative:t,negativeStr:l,trimStr:a,integerStr:i,decimalStr:u,fullStr:"".concat(l).concat(a)}}function B(e){var n=String(e);return!Number.isNaN(Number(n))&&n.includes("e")}function F(e){var n=String(e);if(B(e)){var t=Number(n.slice(n.indexOf("e-")+2)),a=n.match(/\.(\d+)/);return null!=a&&a[1]&&(t+=a[1].length),t}return n.includes(".")&&C(n)?n.length-n.indexOf(".")-1:0}function A(e){var n=String(e);if(B(e)){if(e>Number.MAX_SAFE_INTEGER)return String(k()?BigInt(e).toString():Number.MAX_SAFE_INTEGER);if(e<Number.MIN_SAFE_INTEGER)return String(k()?BigInt(e).toString():Number.MIN_SAFE_INTEGER);n=e.toFixed(F(n))}return M(n).fullStr}function C(e){return"number"==typeof e?!Number.isNaN(e):!!e&&(/^\s*-?\d+(\.\d+)?\s*$/.test(e)||/^\s*-?\d+\.\s*$/.test(e)||/^\s*-?\.\d+\s*$/.test(e))}function D(e){return!e&&0!==e&&!Number.isNaN(e)||!String(e).trim()}var T=function(){function a(e){n(this,a),t(this,"origin",""),D(e)?this.empty=!0:(this.origin=String(e),this.number=Number(e))}return e(a,[{key:"negate",value:function(){return new a(-this.toNumber())}},{key:"add",value:function(e){if(this.isInvalidate())return new a(e);var n=Number(e);if(Number.isNaN(n))return this;var t=this.number+n;if(t>Number.MAX_SAFE_INTEGER)return new a(Number.MAX_SAFE_INTEGER);if(t<Number.MIN_SAFE_INTEGER)return new a(Number.MIN_SAFE_INTEGER);var r=Math.max(F(this.number),F(n));return new a(t.toFixed(r))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toNumber()===(null==e?void 0:e.toNumber())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isInvalidate()?"":A(this.number):this.origin}}]),a}(),_=function(){function a(e){if(n(this,a),t(this,"origin",""),D(e))this.empty=!0;else if(this.origin=String(e),"-"===e||Number.isNaN(e))this.nan=!0;else{var r=e;if(B(r)&&(r=Number(r)),C(r="string"==typeof r?r:A(r))){var i=M(r);this.negative=i.negative;var u=i.trimStr.split(".");this.integer=BigInt(u[0]);var l=u[1]||"0";this.decimal=BigInt(l),this.decimalLen=l.length}else this.nan=!0}}return e(a,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(e){var n="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(e,"0"));return BigInt(n)}},{key:"negate",value:function(){var e=new a(this.toString());return e.negative=!e.negative,e}},{key:"add",value:function(e){if(this.isInvalidate())return new a(e);var n=new a(e);if(n.isInvalidate())return this;var t=Math.max(this.getDecimalStr().length,n.getDecimalStr().length),r=M((this.alignDecimal(t)+n.alignDecimal(t)).toString()),i=r.negativeStr,u=r.trimStr,l="".concat(i).concat(u.padStart(t+1,"0"));return new a("".concat(l.slice(0,-t),".").concat(l.slice(-t)))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toString()===(null==e?void 0:e.toString())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isInvalidate()?"":M("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),a}();function q(e){return k()?new _(e):new T(e)}function R(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(""===e)return"";var r=M(e),i=r.negativeStr,u=r.integerStr,l=r.decimalStr,o="".concat(n).concat(l),s="".concat(i).concat(u);if(t>=0){var c=Number(l[t]);return c>=5&&!a?R(q(e).add("".concat(i,"0.").concat("0".repeat(t)).concat(10-c)).toString(),n,t,a):0===t?s:"".concat(s).concat(n).concat(l.padEnd(t,"0").slice(0,t))}return".0"===o?s:"".concat(s).concat(o)}const G=a({compatConfig:{MODE:3},name:"StepHandler",inheritAttrs:!1,props:{prefixCls:String,upDisabled:Boolean,downDisabled:Boolean,onStep:{type:Function}},slots:["upNode","downNode"],setup:function(e,n){var a=n.slots,c=n.emit,v=r(),d=function(e,n){e.preventDefault(),c("step",n),v.value=setTimeout((function e(){c("step",n),v.value=setTimeout(e,200)}),600)},f=function(){clearTimeout(v.value)};return i((function(){f()})),function(){if(u())return null;var n=e.prefixCls,r=e.upDisabled,i=e.downDisabled,c="".concat(n,"-handler"),v=l(c,"".concat(c,"-up"),t({},"".concat(c,"-up-disabled"),r)),p=l(c,"".concat(c,"-down"),t({},"".concat(c,"-down-disabled"),i)),g={unselectable:"on",role:"button",onMouseup:f,onMouseleave:f},m=a.upNode,b=a.downNode;return o("div",{class:"".concat(c,"-wrap")},[o("span",s(s({},g),{},{onMousedown:function(e){d(e,!0)},"aria-label":"Increase Value","aria-disabled":r,class:v}),[(null==m?void 0:m())||o("span",{unselectable:"on",class:"".concat(n,"-handler-up-inner")},null)]),o("span",s(s({},g),{},{onMousedown:function(e){d(e,!1)},"aria-label":"Decrease Value","aria-disabled":i,class:p}),[(null==b?void 0:b())||o("span",{unselectable:"on",class:"".concat(n,"-handler-down-inner")},null)])])}}});var z=["prefixCls","min","max","step","defaultValue","value","disabled","readonly","keyboard","controls","autofocus","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","lazy","class","style"],O=function(e,n){return e||n.isEmpty()?n.toString():n.toNumber()},P=function(e){var n=q(e);return n.isInvalidate()?null:n},H=function(){return{stringMode:{type:Boolean},defaultValue:{type:[String,Number]},value:{type:[String,Number]},prefixCls:{type:String},min:{type:[String,Number]},max:{type:[String,Number]},step:{type:[String,Number],default:1},tabindex:{type:Number},controls:{type:Boolean,default:!0},readonly:{type:Boolean},disabled:{type:Boolean},autofocus:{type:Boolean},keyboard:{type:Boolean,default:!0},parser:{type:Function},formatter:{type:Function},precision:{type:Number},decimalSeparator:{type:String},onInput:{type:Function},onChange:{type:Function},onPressEnter:{type:Function},onStep:{type:Function},onBlur:{type:Function},onFocus:{type:Function}}};const V=a({compatConfig:{MODE:3},name:"InnerInputNumber",inheritAttrs:!1,props:s(s({},H()),{},{lazy:Boolean}),slots:["upHandler","downHandler"],setup:function(e,n){var a=n.attrs,u=n.slots,h=n.emit,y=n.expose,N=r(),S=r(!1),E=r(!1),w=r(!1),I=r(q(e.value));var x,k=function(n,t){if(!t)return e.precision>=0?e.precision:Math.max(F(n),F(e.step))},M=function(n){var t=String(n);if(e.parser)return e.parser(t);var a=t;return e.decimalSeparator&&(a=a.replace(e.decimalSeparator,".")),a.replace(/[^\w.-]+/g,"")},B=r(""),D=function(n,t){if(e.formatter)return e.formatter(n,{userTyping:t,input:String(B.value)});var a="number"==typeof n?A(n):n;if(!t){var r=k(a,t);if(C(a)&&(e.decimalSeparator||r>=0))a=R(a,e.decimalSeparator||".",r)}return a},T=(x=e.value,I.value.isInvalidate()&&["string","number"].includes(d(x))?Number.isNaN(x)?"":x:D(I.value.toString(),!1));function _(e,n){B.value=D(e.isInvalidate()?e.toString(!1):e.toString(!n),n)}B.value=T;var H,V,$=f((function(){return P(e.max)})),W=f((function(){return P(e.min)})),X=f((function(){return!(!$.value||!I.value||I.value.isInvalidate())&&$.value.lessEquals(I.value)})),U=f((function(){return!(!W.value||!I.value||I.value.isInvalidate())&&I.value.lessEquals(W.value)})),K=function(e,n){var t=r(null);return[function(){try{var n=e.value,a=n.selectionStart,r=n.selectionEnd,i=n.value,u=i.substring(0,a),l=i.substring(r);t.value={start:a,end:r,value:i,beforeTxt:u,afterTxt:l}}catch(o){}},function(){if(e.value&&t.value&&n.value)try{var a=e.value.value,r=t.value,i=r.beforeTxt,u=r.afterTxt,l=r.start,o=a.length;if(a.endsWith(u))o=a.length-t.value.afterTxt.length;else if(a.startsWith(i))o=i.length;else{var s=i[l-1],v=a.indexOf(s,l-1);-1!==v&&(o=v+1)}e.value.setSelectionRange(o,o)}catch(d){c(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(d.message))}}]}(N,S),j=p(K,2),L=j[0],J=j[1],Q=function(e){return $.value&&!e.lessEquals($.value)?$.value:W.value&&!W.value.lessEquals(e)?W.value:null},Y=function(e){return!Q(e)},Z=function(n,t){var a,r=n,i=Y(r)||r.isEmpty();if(r.isEmpty()||t||(r=Q(r)||r,i=!0),!e.readonly&&!e.disabled&&i){var u,l=r.toString(),o=k(l,t);if(o>=0&&(r=q(R(l,".",o))),!r.equals(I.value))a=r,void 0===e.value&&(I.value=a),null===(u=e.onChange)||void 0===u||u.call(e,r.isEmpty()?null:O(e.stringMode,r)),void 0===e.value&&_(r,t);return r}return I.value},ee=(H=r(0),V=function(){v.cancel(H.value)},i((function(){V()})),function(e){V(),H.value=v((function(){e()}))}),ne=function n(t){var a;if(L(),B.value=t,!w.value){var r=q(M(t));r.isNaN()||Z(r,!0)}null===(a=e.onInput)||void 0===a||a.call(e,t),ee((function(){var a=t;e.parser||(a=t.replace(/ã€‚/g,".")),a!==t&&n(a)}))},te=function(){w.value=!0},ae=function(){w.value=!1,ne(N.value.value)},re=function(e){ne(e.target.value)},ie=function(n){var t,a;if(!(n&&X.value||!n&&U.value)){E.value=!1;var r=q(e.step);n||(r=r.negate());var i=(I.value||q(0)).add(r.toString()),u=Z(i,!1);null===(t=e.onStep)||void 0===t||t.call(e,O(e.stringMode,u),{offset:e.step,type:n?"up":"down"}),null===(a=N.value)||void 0===a||a.focus()}},ue=function(n){var t=q(M(B.value)),a=t;a=t.isNaN()?I.value:Z(t,n),void 0!==e.value?_(I.value,!1):a.isNaN()||_(a,!1)},le=function(n){var t,a=n.which;(E.value=!0,a===b.ENTER)&&(w.value||(E.value=!1),ue(!1),null===(t=e.onPressEnter)||void 0===t||t.call(e,n));!1!==e.keyboard&&!w.value&&[b.UP,b.DOWN].includes(a)&&(ie(b.UP===a),n.preventDefault())},oe=function(){E.value=!1},se=function(e){ue(!1),S.value=!1,E.value=!1,h("blur",e)};return g((function(){return e.precision}),(function(){I.value.isInvalidate()||_(I.value,!1)}),{flush:"post"}),g((function(){return e.value}),(function(){var n=q(e.value);I.value=n;var t=q(M(B.value));n.equals(t)&&E.value&&!e.formatter||_(n,E.value)}),{flush:"post"}),g(B,(function(){e.formatter&&J()}),{flush:"post"}),g((function(){return e.disabled}),(function(e){e&&(S.value=!1)})),y({focus:function(){var e;null===(e=N.value)||void 0===e||e.focus()},blur:function(){var e;null===(e=N.value)||void 0===e||e.blur()}}),function(){var n,r=s(s({},a),e),i=r.prefixCls,c=void 0===i?"rc-input-number":i,v=r.min,d=r.max,f=r.step,p=void 0===f?1:f;r.defaultValue,r.value;var g=r.disabled,b=r.readonly;r.keyboard;var y=r.controls,E=void 0===y||y,w=r.autofocus;r.stringMode,r.parser,r.formatter,r.precision,r.decimalSeparator,r.onChange,r.onInput,r.onPressEnter,r.onStep;var x=r.lazy,k=r.class,M=r.style,F=m(r,z),A=u.upHandler,C=u.downHandler,D="".concat(c,"-input"),T={};return x?T.onChange=re:T.onInput=re,o("div",{class:l(c,k,(n={},t(n,"".concat(c,"-focused"),S.value),t(n,"".concat(c,"-disabled"),g),t(n,"".concat(c,"-readonly"),b),t(n,"".concat(c,"-not-a-number"),I.value.isNaN()),t(n,"".concat(c,"-out-of-range"),!I.value.isInvalidate()&&!Y(I.value)),n)),style:M,onKeydown:le,onKeyup:oe},[E&&o(G,{prefixCls:c,upDisabled:X.value,downDisabled:U.value,onStep:ie},{upNode:A,downNode:C}),o("div",{class:"".concat(D,"-wrap")},[o("input",s(s(s({autofocus:w,autocomplete:"off",role:"spinbutton","aria-valuemin":v,"aria-valuemax":d,"aria-valuenow":I.value.isInvalidate()?null:I.value.toString(),step:p},F),{},{ref:N,class:D,value:B.value,disabled:g,readonly:b,onFocus:function(e){S.value=!0,h("focus",e)}},T),{},{onBlur:se,onCompositionstart:te,onCompositionend:ae}),null)])])}}});function $(e){return null!=e}var W=["class","bordered","readonly","style","addonBefore","addonAfter","prefix","valueModifiers"],X=H(),U=a({compatConfig:{MODE:3},name:"AInputNumber",inheritAttrs:!1,props:s(s({},X),{},{size:{type:String},bordered:{type:Boolean,default:!0},placeholder:String,name:String,id:String,type:String,addonBefore:x.any,addonAfter:x.any,prefix:x.any,"onUpdate:value":X.onChange,valueModifiers:Object}),slots:["addonBefore","addonAfter","prefix"],setup:function(e,n){var a=n.emit,i=n.expose,u=n.attrs,c=n.slots,v=y(),d=N("input-number",e),f=d.prefixCls,p=d.size,b=d.direction,h=r(void 0===e.value?e.defaultValue:e.value),x=r(!1);g((function(){return e.value}),(function(){h.value=e.value}));var k=r(null);i({focus:function(){var e;null===(e=k.value)||void 0===e||e.focus()},blur:function(){var e;null===(e=k.value)||void 0===e||e.blur()}});var M=function(n){void 0===e.value&&(h.value=n),a("update:value",n),a("change",n),v.onFieldChange()},B=function(e){x.value=!1,a("blur",e),v.onFieldBlur()},F=function(e){x.value=!0,a("focus",e)};return function(){var n,a,r,i,v=s(s({},u),e),d=v.class,g=v.bordered,y=v.readonly,N=v.style,A=v.addonBefore,C=void 0===A?null===(n=c.addonBefore)||void 0===n?void 0:n.call(c):A,D=v.addonAfter,T=void 0===D?null===(a=c.addonAfter)||void 0===a?void 0:a.call(c):D,_=v.prefix,q=void 0===_?null===(r=c.prefix)||void 0===r?void 0:r.call(c):_,R=v.valueModifiers,G=void 0===R?{}:R,z=m(v,W),O=f.value,P=p.value,H=l((t(i={},"".concat(O,"-lg"),"large"===P),t(i,"".concat(O,"-sm"),"small"===P),t(i,"".concat(O,"-rtl"),"rtl"===b.value),t(i,"".concat(O,"-readonly"),y),t(i,"".concat(O,"-borderless"),!g),i),d),X=o(V,s(s({},w(z,["size","defaultValue"])),{},{ref:k,lazy:!!G.lazy,value:h.value,class:H,prefixCls:O,readonly:y,onChange:M,onBlur:B,onFocus:F}),{upHandler:function(){return o(S,{class:"".concat(O,"-handler-up-inner")},null)},downHandler:function(){return o(E,{class:"".concat(O,"-handler-down-inner")},null)}}),U=$(C)||$(T);if($(q)){var K,j=l("".concat(O,"-affix-wrapper"),(t(K={},"".concat(O,"-affix-wrapper-focused"),x.value),t(K,"".concat(O,"-affix-wrapper-disabled"),e.disabled),t(K,"".concat(O,"-affix-wrapper-rtl"),"rtl"===b.value),t(K,"".concat(O,"-affix-wrapper-readonly"),y),t(K,"".concat(O,"-affix-wrapper-borderless"),!g),t(K,"".concat(d),!U&&d),K));X=o("div",{class:j,style:N,onMouseup:function(){return k.value.focus()}},[o("span",{class:"".concat(O,"-prefix")},[q]),X])}if(U){var L,J="".concat(O,"-group"),Q="".concat(J,"-addon"),Y=C?o("div",{class:Q},[C]):null,Z=T?o("div",{class:Q},[T]):null,ee=l("".concat(O,"-wrapper"),J,t({},"".concat(J,"-rtl"),"rtl"===b.value)),ne=l("".concat(O,"-group-wrapper"),(t(L={},"".concat(O,"-group-wrapper-sm"),"small"===P),t(L,"".concat(O,"-group-wrapper-lg"),"large"===P),t(L,"".concat(O,"-group-wrapper-rtl"),"rtl"===b.value),L),d);X=o("div",{class:ne,style:N},[o("div",{class:ee},[Y,X,Z])])}return I(X,{style:N})}}});const K=h(U,{install:function(e){return e.component(U.name,U),e}});export{K as _};
