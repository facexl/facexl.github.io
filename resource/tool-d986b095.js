import{d as e,bB as a,P as n,r as l,l as u,c as t,c3 as i,ah as o,e as r,Q as v,aW as s}from"./index-c2ae2a0e.js";import{c as d,a as c,C as f}from"./index-3f0a4d2e.js";const p=e({compatConfig:{MODE:3},name:"ACheckboxGroup",props:d(),setup:function(e,d){var p=d.slots,m=d.emit,b=d.expose,h=a(),g=n("checkbox",e),x=g.prefixCls,y=g.direction,w=l((void 0===e.value?e.defaultValue:e.value)||[]);u((function(){return e.value}),(function(){w.value=e.value||[]}));var C=t((function(){return e.options.map((function(e){return"string"==typeof e||"number"==typeof e?{label:e,value:e}:e}))})),k=l(Symbol()),O=l(new Map),V=l(new Map);u(k,(function(){var e,a=new Map,n=i(O.value.values());try{for(n.s();!(e=n.n()).done;){var l=e.value;a.set(l,!0)}}catch(u){n.e(u)}finally{n.f()}V.value=a}));return o(c,{cancelValue:function(e){O.value.delete(e),k.value=Symbol()},registerValue:function(e,a){O.value.set(e,a),k.value=Symbol()},toggleOption:function(a){var n=w.value.indexOf(a.value),l=s(w.value);-1===n?l.push(a.value):l.splice(n,1),void 0===e.value&&(w.value=l);var u=l.filter((function(e){return V.value.has(e)})).sort((function(e,a){return C.value.findIndex((function(a){return a.value===e}))-C.value.findIndex((function(e){return e.value===a}))}));m("update:value",u),m("change",u),h.onFieldChange()},mergedValue:w,name:t((function(){return e.name})),disabled:t((function(){return e.disabled}))}),b({mergedValue:w}),function(){var a,n=e.id,l=void 0===n?h.id.value:n,u=null,t="".concat(x.value,"-group");return C.value&&C.value.length>0&&(u=C.value.map((function(a){var n;return r(f,{prefixCls:x.value,key:a.value.toString(),disabled:"disabled"in a?a.disabled:e.disabled,indeterminate:a.indeterminate,value:a.value,checked:-1!==w.value.indexOf(a.value),onChange:a.onChange,class:"".concat(t,"-item")},{default:function(){return[void 0===a.label?null===(n=p.label)||void 0===n?void 0:n.call(p,a):a.label]}})}))),r("div",{class:[t,v({},"".concat(t,"-rtl"),"rtl"===y.value)],id:l},[u||(null===(a=p.default)||void 0===a?void 0:a.call(p))])}}}),m=e=>(Object.keys(e).forEach((a=>{void 0===e[a]&&delete e[a]})),e),b=e=>{const a=new window.Image;return new Promise(((n,l)=>{a.onload=async function(){n({w:this.width,h:this.height})},a.onabort=a.onerror=e=>{l("获取图片宽高失败")},a.src=e}))};export{p as _,m as d,b as g};
