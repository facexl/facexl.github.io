import{cl as e,cm as t,cn as n,co as o,d as a,r as i,o as r,aX as l,al as c,Q as u,e as s,ak as d,am as p,aW as f,cp as v,cq as m,aK as g,bk as y,as as h,P as b,c as w,cr as F,ck as x,bf as O,x as C,y as k,bc as I,ag as j,bg as P,cs as R,ct as D,aQ as S,ap as U,bw as T,aA as L,B,bB as E,b4 as A,aE as M,aG as _,aS as z,aD as V,bA as H,an as N,aN as q,ar as $,l as W,a as G,b as X,w as J,g as K,p as Q,f as Z,K as Y,aH as ee,aI as te,s as ne,cu as oe,z as ae,k as ie,Z as re,$ as le,j as ce,cv as ue,S as se,M as de,_ as pe}from"./index-c2ae2a0e.js";import{P as fe}from"./index-b1df7cdb.js";import{_ as ve}from"./index-00d344de.js";import{F as me}from"./FolderOpenOutlined-fa174baf.js";import{D as ge}from"./DeleteOutlined-1e1ff134.js";function ye(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(n){return t}}function he(e){var t=new XMLHttpRequest;e.onProgress&&t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var n=new FormData;e.data&&Object.keys(e.data).forEach((function(t){var o=e.data[t];Array.isArray(o)?o.forEach((function(e){n.append("".concat(t,"[]"),e)})):n.append(t,o)})),e.file instanceof Blob?n.append(e.filename,e.file,e.file.name):n.append(e.filename,e.file),t.onerror=function(t){e.onError(t)},t.onload=function(){return t.status<200||t.status>=300?e.onError(function(e,t){var n="cannot ".concat(e.method," ").concat(e.action," ").concat(t.status,"'"),o=new Error(n);return o.status=t.status,o.method=e.method,o.url=e.action,o}(e,t),ye(t)):e.onSuccess(ye(t),t)},t.open(e.method,e.action,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var o=e.headers||{};return null!==o["X-Requested-With"]&&t.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(o).forEach((function(e){null!==o[e]&&t.setRequestHeader(e,o[e])})),t.send(n),{abort:function(){t.abort()}}}var be=+new Date,we=0;function Fe(){return"vc-upload-".concat(be,"-").concat(++we)}const xe=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),o=e.name||"",a=e.type||"",i=a.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim();if(/^\*(\/\*)?$/.test(e))return!0;if("."===t.charAt(0)){var n=o.toLowerCase(),r=t.toLowerCase(),l=[r];return".jpg"!==r&&".jpeg"!==r||(l=[".jpg",".jpeg"]),l.some((function(e){return n.endsWith(e)}))}return/\/\*$/.test(t)?i===t.replace(/\/.*$/,""):a===t||!!/^\w+$/.test(t)}))}return!0};const Oe=function(e,t,n){var o=function e(o,a){o.path=a||"",o.isFile?o.file((function(e){n(e)&&(o.fullPath&&!e.webkitRelativePath&&(Object.defineProperties(e,{webkitRelativePath:{writable:!0}}),e.webkitRelativePath=o.fullPath.replace(/^\//,""),Object.defineProperties(e,{webkitRelativePath:{writable:!1}})),t([e]))})):o.isDirectory&&function(e,t){var n=e.createReader(),o=[];!function e(){n.readEntries((function(n){var a=Array.prototype.slice.apply(n);o=o.concat(a),a.length?e():t(o)}))}()}(o,(function(t){t.forEach((function(t){e(t,"".concat(a).concat(o.name,"/"))}))}))};e.forEach((function(e){o(e.webkitGetAsEntry())}))};var Ce,ke=function(){return{capture:[Boolean,String],multipart:{type:Boolean,default:void 0},name:String,disabled:{type:Boolean,default:void 0},componentTag:String,action:[String,Function],method:String,directory:{type:Boolean,default:void 0},data:[Object,Function],headers:Object,accept:String,multiple:{type:Boolean,default:void 0},onBatchStart:Function,onReject:Function,onStart:Function,onError:Function,onSuccess:Function,onProgress:Function,beforeUpload:Function,customRequest:Function,withCredentials:{type:Boolean,default:void 0},openFileDialogOnClick:{type:Boolean,default:void 0},prefixCls:String,id:String,onMouseenter:Function,onMouseleave:Function,onClick:Function}};function Ie(e,t,n,o){for(var a=-1,i=null==e?0:e.length;++a<i;){var r=e[a];t(o,r,n(r),e)}return o}const je=function(e,t,n){for(var o=-1,a=Object(e),i=n(e),r=i.length;r--;){var l=i[Ce?r:++o];if(!1===t(a[l],l,a))break}return e};var Pe=function(e,n){return function(o,a){if(null==o)return o;if(!t(o))return e(o,a);for(var i=o.length,r=n?i:-1,l=Object(o);(n?r--:++r<i)&&!1!==a(l[r],r,l););return o}}((function(t,n){return t&&je(t,n,e)}));const Re=Pe;function De(e,t,n,o){return Re(e,(function(e,a,i){t(o,e,n(e),i)})),o}var Se,Ue;const Te=(Se=function(e,t,n){e[n?0:1].push(t)},Ue=function(){return[[],[]]},function(e,t){var a=n(e)?Ie:De,i=Ue?Ue():{};return a(e,Se,o(t),i)});var Le=["componentTag","prefixCls","disabled","id","multiple","accept","capture","directory","openFileDialogOnClick","onMouseenter","onMouseleave"];const Be=a({compatConfig:{MODE:3},name:"AjaxUploader",inheritAttrs:!1,props:ke(),setup:function(e,t){var n=t.slots,o=t.attrs,a=t.expose,y=i(Fe()),h={},b=i(),w=!1,F=function(){var t=v(m.mark((function t(n,o){var a,i,r,l,c,u,s,d,p;return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.beforeUpload,i=n,!a){t.next=14;break}return t.prev=3,t.next=6,a(n,o);case 6:i=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),i=!1;case 12:if(!1!==i){t.next=14;break}return t.abrupt("return",{origin:n,parsedFile:null,action:null,data:null});case 14:if("function"!=typeof(r=e.action)){t.next=21;break}return t.next=18,r(n);case 18:l=t.sent,t.next=22;break;case 21:l=r;case 22:if("function"!=typeof(c=e.data)){t.next=29;break}return t.next=26,c(n);case 26:u=t.sent,t.next=30;break;case 29:u=c;case 30:return s="object"!==g(i)&&"string"!=typeof i||!i?n:i,d=s instanceof File?s:new File([s],n.name,{type:n.type}),(p=d).uid=n.uid,t.abrupt("return",{origin:n,data:u,parsedFile:p,action:l});case 35:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,n){return t.apply(this,arguments)}}(),x=function(e){if(e){var t=e.uid?e.uid:e;h[t]&&h[t].abort&&h[t].abort(),delete h[t]}else Object.keys(h).forEach((function(e){h[e]&&h[e].abort&&h[e].abort(),delete h[e]}))};r((function(){w=!0})),l((function(){w=!1,x()}));var O=function(t){var n=f(t),o=n.map((function(e){return e.uid=Fe(),F(e,n)}));Promise.all(o).then((function(t){var n=e.onBatchStart;null==n||n(t.map((function(e){return{file:e.origin,parsedFile:e.parsedFile}}))),t.filter((function(e){return null!==e.parsedFile})).forEach((function(t){!function(t){var n=t.data,o=t.origin,a=t.action,i=t.parsedFile;if(w){var r=e.onStart,l=e.customRequest,c=e.name,u=e.headers,s=e.withCredentials,d=e.method,p=o.uid,f=l||he,v={action:a,filename:c,data:n,file:i,headers:u,withCredentials:s,method:d||"post",onProgress:function(t){var n=e.onProgress;null==n||n(t,i)},onSuccess:function(t,n){var o=e.onSuccess;null==o||o(t,i,n),delete h[p]},onError:function(t,n){var o=e.onError;null==o||o(t,n,i),delete h[p]}};r(o),h[p]=f(v)}}(t)}))}))},C=function(t){var n=e.accept,o=e.directory,a=t.target.files,i=f(a).filter((function(e){return!o||xe(e,n)}));O(i),y.value=Fe()},k=function(t){var n=b.value;if(n){var o=e.onClick;n.click(),o&&o(t)}},I=function(e){"Enter"===e.key&&k(e)},j=function(t){var n=e.multiple;if(t.preventDefault(),"dragover"!==t.type)if(e.directory)Oe(Array.prototype.slice.call(t.dataTransfer.items),O,(function(t){return xe(t,e.accept)}));else{var o=Te(Array.prototype.slice.call(t.dataTransfer.files),(function(t){return xe(t,e.accept)})),a=o[0],i=o[1];!1===n&&(a=a.slice(0,1)),O(a),i.length&&e.onReject&&e.onReject(i)}};return a({abort:x}),function(){var t,a,i=e.componentTag,r=e.prefixCls,l=e.disabled,f=e.id,v=e.multiple,m=e.accept,g=e.capture,h=e.directory,w=e.openFileDialogOnClick,F=e.onMouseenter,x=e.onMouseleave,O=c(e,Le),P=(u(t={},r,!0),u(t,"".concat(r,"-disabled"),l),u(t,o.class,!!o.class),t),R=h?{directory:"directory",webkitdirectory:"webkitdirectory"}:{};return s(i,d(d({},l?{}:{onClick:w?k:function(){},onKeydown:w?I:function(){},onMouseenter:F,onMouseleave:x,onDrop:j,onDragover:j,tabindex:"0"}),{},{class:P,role:"button",style:o.style}),{default:function(){return[s("input",d(d(d({},p(O,{aria:!0,data:!0})),{},{id:f,type:"file",ref:b,onClick:function(e){return e.stopPropagation()},key:y.value,style:{display:"none"},accept:m},R),{},{multiple:v,onChange:C},null!=g?{capture:g}:{}),null),null===(a=n.default)||void 0===a?void 0:a.call(n)]}})}}});function Ee(){}const Ae=a({compatConfig:{MODE:3},name:"Upload",inheritAttrs:!1,props:y(ke(),{componentTag:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:Ee,onError:Ee,onSuccess:Ee,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0}),setup:function(e,t){var n=t.slots,o=t.attrs,a=t.expose,r=i();return a({abort:function(e){var t;null===(t=r.value)||void 0===t||t.abort(e)}}),function(){return s(Be,d(d(d({},e),o),{},{ref:r}),n)}}});const Me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"};function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){ze(e,t,n[t])}))}return e}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ve=function(e,t){var n=_e({},e,t.attrs);return s(h,_e({},n,{icon:Me}),null)};Ve.displayName="PaperClipOutlined",Ve.inheritAttrs=!1;const He=Ve;const Ne={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:e}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:t}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:t}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:t}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:e}}]}},name:"picture",theme:"twotone"};function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){$e(e,t,n[t])}))}return e}function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var We=function(e,t){var n=qe({},e,t.attrs);return s(h,qe({},n,{icon:Ne}),null)};We.displayName="PictureTwoTone",We.inheritAttrs=!1;const Ge=We;const Xe={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:t}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}}]}},name:"file",theme:"twotone"};function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){Ke(e,t,n[t])}))}return e}function Ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qe=function(e,t){var n=Je({},e,t.attrs);return s(h,Je({},n,{icon:Xe}),null)};Qe.displayName="FileTwoTone",Qe.inheritAttrs=!1;const Ze=Qe;function Ye(){return{capture:[Boolean,String],type:String,name:String,defaultFileList:Array,fileList:Array,action:[String,Function],directory:{type:Boolean,default:void 0},data:[Object,Function],method:String,headers:Object,showUploadList:{type:[Boolean,Object],default:void 0},multiple:{type:Boolean,default:void 0},accept:String,beforeUpload:Function,onChange:Function,"onUpdate:fileList":Function,onDrop:Function,listType:String,onPreview:Function,onDownload:Function,onReject:Function,onRemove:Function,remove:Function,supportServerRender:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},prefixCls:String,customRequest:Function,withCredentials:{type:Boolean,default:void 0},openFileDialogOnClick:{type:Boolean,default:void 0},locale:{type:Object,default:void 0},id:String,previewFile:Function,transformFile:Function,iconRender:Function,isImageUrl:Function,progress:Object,itemRender:Function,maxCount:Number,height:[Number,String],removeIcon:Function,downloadIcon:Function,previewIcon:Function}}function et(e){return d(d({},e),{},{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.name,size:e.size,type:e.type,uid:e.uid,percent:0,originFileObj:e})}function tt(e,t){var n=f(t),o=n.findIndex((function(t){return t.uid===e.uid}));return-1===o?n.push(e):n[o]=e,n}function nt(e,t){var n=void 0!==e.uid?"uid":"name";return t.filter((function(t){return t[n]===e[n]}))[0]}var ot=function(e){return 0===e.indexOf("image/")},at=200;const it={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"};function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){lt(e,t,n[t])}))}return e}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ct=function(e,t){var n=rt({},e,t.attrs);return s(h,rt({},n,{icon:it}),null)};ct.displayName="DownloadOutlined",ct.inheritAttrs=!1;const ut=ct;const st=a({compatConfig:{MODE:3},name:"ListItem",inheritAttrs:!1,props:{prefixCls:String,locale:{type:Object,default:void 0},file:Object,items:Array,listType:String,isImgUrl:Function,showRemoveIcon:{type:Boolean,default:void 0},showDownloadIcon:{type:Boolean,default:void 0},showPreviewIcon:{type:Boolean,default:void 0},removeIcon:Function,downloadIcon:Function,previewIcon:Function,iconRender:Function,actionIconRender:Function,itemRender:Function,onPreview:Function,onClose:Function,onDownload:Function,progress:{type:Object,default:void 0}},setup:function(e,t){var n=t.slots,o=t.attrs,a=i(!1),c=i();r((function(){c.value=setTimeout((function(){a.value=!0}),300)})),l((function(){clearTimeout(c.value)}));var p=b("upload",e).rootPrefixCls,f=w((function(){return F("".concat(p.value,"-fade"))}));return function(){var t,r,l=e.prefixCls,c=e.locale,p=e.listType,v=e.file,m=e.items,g=e.progress,y=e.iconRender,h=void 0===y?n.iconRender:y,b=e.actionIconRender,w=void 0===b?n.actionIconRender:b,F=e.itemRender,j=void 0===F?n.itemRender:F,P=e.isImgUrl,R=e.showPreviewIcon,D=e.showRemoveIcon,S=e.showDownloadIcon,U=e.previewIcon,T=void 0===U?n.previewIcon:U,L=e.removeIcon,B=void 0===L?n.removeIcon:L,E=e.downloadIcon,A=void 0===E?n.downloadIcon:E,M=e.onPreview,_=e.onDownload,z=e.onClose,V=o.class,H=o.style,N="".concat(l,"-span"),q=h({file:v}),$=s("div",{class:"".concat(l,"-text-icon")},[q]);if("picture"===p||"picture-card"===p)if("uploading"===v.status||!v.thumbUrl&&!v.url){var W,G=(u(W={},"".concat(l,"-list-item-thumbnail"),!0),u(W,"".concat(l,"-list-item-file"),"uploading"!==v.status),W);$=s("div",{class:G},[q])}else{var X,J=null!=P&&P(v)?s("img",{src:v.thumbUrl||v.url,alt:v.name,class:"".concat(l,"-list-item-image")},null):q,K=(u(X={},"".concat(l,"-list-item-thumbnail"),!0),u(X,"".concat(l,"-list-item-file"),P&&!P(v)),X);$=s("a",{class:K,onClick:function(e){return M(v,e)},href:v.url||v.thumbUrl,target:"_blank",rel:"noopener noreferrer"},[J])}var Q,Z,Y,ee=(u(t={},"".concat(l,"-list-item"),!0),u(t,"".concat(l,"-list-item-").concat(v.status),!0),u(t,"".concat(l,"-list-item-list-type-").concat(p),!0),t),te="string"==typeof v.linkProps?JSON.parse(v.linkProps):v.linkProps,ne=D?w({customIcon:B?B({file:v}):s(ge,null,null),callback:function(){return z(v)},prefixCls:l,title:c.removeFile}):null,oe=S&&"done"===v.status?w({customIcon:A?A({file:v}):s(ut,null,null),callback:function(){return _(v)},prefixCls:l,title:c.downloadFile}):null,ae="picture-card"!==p&&s("span",{key:"download-delete",class:["".concat(l,"-list-item-card-actions"),{picture:"picture"===p}]},[oe,ne]),ie="".concat(l,"-list-item-name"),re=v.url?[s("a",d(d({key:"view",target:"_blank",rel:"noopener noreferrer",class:ie,title:v.name},te),{},{href:v.url,onClick:function(e){return M(v,e)}}),[v.name]),ae]:[s("span",{key:"view",class:ie,onClick:function(e){return M(v,e)},title:v.name},[v.name]),ae],le=R?s("a",{href:v.url||v.thumbUrl,target:"_blank",rel:"noopener noreferrer",style:v.url||v.thumbUrl?void 0:{pointerEvents:"none",opacity:.5},onClick:function(e){return M(v,e)},title:c.previewFile},[T?T({file:v}):s(x,null,null)]):null,ce="picture-card"===p&&"uploading"!==v.status&&s("span",{class:"".concat(l,"-list-item-actions")},[le,"done"===v.status&&oe,ne]);v.response&&"string"==typeof v.response?Q=v.response:Q=(null===(Z=v.error)||void 0===Z?void 0:Z.statusText)||(null===(Y=v.error)||void 0===Y?void 0:Y.message)||c.uploadError;var ue=s("span",{class:N},[$,re]),se=s("div",{class:ee},[s("div",{class:"".concat(l,"-list-item-info")},[ue]),ce,a.value&&s(O,f.value,{default:function(){return[C(s("div",{class:"".concat(l,"-list-item-progress")},["percent"in v?s(fe,d(d({},g),{},{type:"line",percent:v.percent}),null):null]),[[k,"uploading"===v.status]])]}})]),de=(u(r={},"".concat(l,"-list-").concat(p,"-container"),!0),u(r,"".concat(V),!!V),r),pe="error"===v.status?s(I,{title:Q,getPopupContainer:function(e){return e.parentNode}},{default:function(){return[se]}}):se;return s("div",{class:de,style:H,ref:i},[j?j({originNode:pe,file:v,fileList:m,actions:{download:_.bind(null,v),preview:M.bind(null,v),remove:z.bind(null,v)}}):pe])}}});var dt=function(e,t){var n,o=t.slots;return S(null===(n=o.default)||void 0===n?void 0:n.call(o))[0]};const pt=a({compatConfig:{MODE:3},name:"AUploadList",props:y({listType:String,onPreview:Function,onDownload:Function,onRemove:Function,items:Array,progress:Object,prefixCls:String,showRemoveIcon:{type:Boolean,default:void 0},showDownloadIcon:{type:Boolean,default:void 0},showPreviewIcon:{type:Boolean,default:void 0},removeIcon:Function,downloadIcon:Function,previewIcon:Function,locale:{type:Object,default:void 0},previewFile:Function,iconRender:Function,isImageUrl:Function,appendAction:Function,appendActionVisible:{type:Boolean,default:void 0},itemRender:Function},{listType:"text",progress:{strokeWidth:2,showInfo:!1},showRemoveIcon:!0,showDownloadIcon:!1,showPreviewIcon:!0,previewFile:function(e){return new Promise((function(t){if(e.type&&ot(e.type)){var n=document.createElement("canvas");n.width=at,n.height=at,n.style.cssText="position: fixed; left: 0; top: 0; width: ".concat(at,"px; height: ").concat(at,"px; z-index: 9999; display: none;"),document.body.appendChild(n);var o=n.getContext("2d"),a=new Image;a.onload=function(){var e=a.width,i=a.height,r=at,l=at,c=0,u=0;e>i?u=-((l=i*(at/e))-r)/2:c=-((r=e*(at/i))-l)/2,o.drawImage(a,c,u,r,l);var s=n.toDataURL();document.body.removeChild(n),t(s)},a.src=window.URL.createObjectURL(e)}else t("")}))},isImageUrl:function(e){if(e.type&&!e.thumbUrl)return ot(e.type);var t=e.thumbUrl||e.url||"",n=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("/"),t=e[e.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(t)||[""])[0]}(t);return!(!/^data:image\//.test(t)&&!/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i.test(n))||!/^data:/.test(t)&&!n},items:[],appendActionVisible:!0}),setup:function(e,t){var n=t.slots,o=t.expose,a=i(!1),l=U();r((function(){a.value})),j((function(){"picture"!==e.listType&&"picture-card"!==e.listType||(e.items||[]).forEach((function(t){"undefined"!=typeof document&&"undefined"!=typeof window&&window.FileReader&&window.File&&(t.originFileObj instanceof File||t.originFileObj instanceof Blob)&&void 0===t.thumbUrl&&(t.thumbUrl="",e.previewFile&&e.previewFile(t.originFileObj).then((function(e){t.thumbUrl=e||"",l.update()})))}))}));var c=function(t,n){if(e.onPreview)return null==n||n.preventDefault(),e.onPreview(t)},p=function(t){"function"==typeof e.onDownload?e.onDownload(t):t.url&&window.open(t.url)},f=function(t){var n;null===(n=e.onRemove)||void 0===n||n.call(e,t)},v=function(t){var o=t.file,a=e.iconRender||n.iconRender;if(a)return a({file:o,listType:e.listType});var i="uploading"===o.status,r=e.isImageUrl&&e.isImageUrl(o)?s(Ge,null,null):s(Ze,null,null),l=s(i?T:He,null,null);return"picture"===e.listType?l=i?s(T,null,null):r:"picture-card"===e.listType&&(l=i?e.locale.uploading:r),l},m=function(e){var t=e.customIcon,n=e.callback,o=e.prefixCls,a={type:"text",size:"small",title:e.title,onClick:function(){n()},class:"".concat(o,"-list-item-card-actions-btn")};return L(t)?s(B,a,{icon:function(){return t}}):s(B,a,{default:function(){return[s("span",null,[t])]}})};o({handlePreview:c,handleDownload:p});var g=b("upload",e),y=g.prefixCls,h=g.direction,F=w((function(){var t;return u(t={},"".concat(y.value,"-list"),!0),u(t,"".concat(y.value,"-list-").concat(e.listType),!0),u(t,"".concat(y.value,"-list-rtl"),"rtl"===h.value),t})),x=w((function(){return d(d(d({},P("".concat(y.value,"-").concat("picture-card"===e.listType?"animate-inline":"animate"))),R("".concat(y.value,"-").concat("picture-card"===e.listType?"animate-inline":"animate"))),{},{class:F.value,appear:a.value})}));return function(){var t=e.listType,o=e.locale,a=e.isImageUrl,i=e.items,r=void 0===i?[]:i,l=e.showPreviewIcon,u=e.showRemoveIcon,g=e.showDownloadIcon,h=e.removeIcon,b=e.previewIcon,w=e.downloadIcon,F=e.progress,O=e.appendAction,I=e.itemRender,j=e.appendActionVisible,P=null==O?void 0:O();return s(D,d(d({},x.value),{},{tag:"div"}),{default:function(){return[r.map((function(e){var i=e.uid;return s(st,{key:i,locale:o,prefixCls:y.value,file:e,items:r,progress:F,listType:t,isImgUrl:a,showPreviewIcon:l,showRemoveIcon:u,showDownloadIcon:g,onPreview:c,onDownload:p,onClose:f,removeIcon:h,previewIcon:b,downloadIcon:w,itemRender:I},d(d({},n),{},{iconRender:v,actionIconRender:m}))})),O?C(s(dt,{key:"__ant_upload_appendAction"},{default:function(){return P}}),[[k,!!j]]):null]}})}}});var ft=["class","style"],vt="__LIST_IGNORE_".concat(Date.now(),"__");const mt=a({compatConfig:{MODE:3},name:"AUpload",inheritAttrs:!1,props:y(Ye(),{type:"select",multiple:!1,action:"",data:{},accept:"",showUploadList:!0,listType:"text",disabled:!1,supportServerRender:!0}),setup:function(e,t){var n=t.slots,o=t.attrs,a=t.expose,l=E(),p=A(e.defaultFileList||[],{value:M(e,"fileList"),postState:function(e){var t=Date.now();return(null!=e?e:[]).map((function(e,n){return e.uid||Object.isFrozen(e)||(e.uid="__AUTO__".concat(t,"_").concat(n,"__")),e}))}}),y=_(p,2),h=y[0],F=y[1],x=i("drop"),O=i();r((function(){z(void 0!==e.fileList||void 0===o.value,"Upload","`value` is not a valid prop, do you mean `fileList`?"),z(void 0===e.transformFile,"Upload","`transformFile` is deprecated. Please use `beforeUpload` directly."),z(void 0===e.remove,"Upload","`remove` props is deprecated. Please use `remove` event.")}));var C=function(t,n,o){var a,i,r=f(n);1===e.maxCount?r=r.slice(-1):e.maxCount&&(r=r.slice(0,e.maxCount)),F(r);var c={file:t,fileList:r};o&&(c.event=o),null===(a=e["onUpdate:fileList"])||void 0===a||a.call(e,c.fileList),null===(i=e.onChange)||void 0===i||i.call(e,c),l.onFieldChange()},k=function(){var t=v(m.mark((function t(n,o){var a,i,r,l;return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.beforeUpload,i=e.transformFile,r=n,!a){t.next=13;break}return t.next=5,a(n,o);case 5:if(!1!==(l=t.sent)){t.next=8;break}return t.abrupt("return",!1);case 8:if(delete n[vt],l!==vt){t.next=12;break}return Object.defineProperty(n,vt,{value:!0,configurable:!0}),t.abrupt("return",!1);case 12:"object"===g(l)&&l&&(r=l);case 13:if(!i){t.next=17;break}return t.next=16,i(r);case 16:r=t.sent;case 17:return t.abrupt("return",r);case 18:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),I=function(e){var t=e.filter((function(e){return!e.file[vt]}));if(t.length){var n=t.map((function(e){return et(e.file)})),o=f(h.value);n.forEach((function(e){o=tt(e,o)})),n.forEach((function(e,n){var a=e;if(t[n].parsedFile)e.status="uploading";else{var i,r=e.originFileObj;try{i=new File([r],r.name,{type:r.type})}catch(l){(i=new Blob([r],{type:r.type})).name=r.name,i.lastModifiedDate=new Date,i.lastModified=(new Date).getTime()}i.uid=e.uid,a=i}C(a,o)}))}},j=function(e,t,n){try{"string"==typeof e&&(e=JSON.parse(e))}catch(i){}if(nt(t,h.value)){var o=et(t);o.status="done",o.percent=100,o.response=e,o.xhr=n;var a=tt(o,h.value);C(o,a)}},P=function(e,t){if(nt(t,h.value)){var n=et(t);n.status="uploading",n.percent=e.percent;var o=tt(n,h.value);C(n,o,e)}},R=function(e,t,n){if(nt(n,h.value)){var o=et(n);o.error=e,o.response=t,o.status="error";var a=tt(o,h.value);C(o,a)}},D=function(t){var n,o=e.onRemove||e.remove;Promise.resolve("function"==typeof o?o(t):o).then((function(e){if(!1!==e){var o,a,i=function(e,t){var n=void 0!==e.uid?"uid":"name",o=t.filter((function(t){return t[n]!==e[n]}));return o.length===t.length?null:o}(t,h.value);if(i)n=d(d({},t),{},{status:"removed"}),null===(o=h.value)||void 0===o||o.forEach((function(e){var t=void 0!==n.uid?"uid":"name";e[t]!==n[t]||Object.isFrozen(e)||(e.status="removed")})),null===(a=O.value)||void 0===a||a.abort(n),C(n,i)}}))},S=function(t){var n;(x.value=t.type,"drop"===t.type)&&(null===(n=e.onDrop)||void 0===n||n.call(e,t))};a({onBatchStart:I,onSuccess:j,onProgress:P,onError:R,fileList:h,upload:O});var U=b("upload",e),T=U.prefixCls,L=U.direction,B=V("Upload",H.Upload,w((function(){return e.locale}))),$=_(B,1)[0],W=function(t,o){var a=e.removeIcon,i=e.previewIcon,r=e.downloadIcon,l=e.previewFile,c=e.onPreview,u=e.onDownload,p=e.disabled,f=e.isImageUrl,v=e.progress,m=e.itemRender,g=e.iconRender,y=e.showUploadList,b="boolean"==typeof y?{}:y,w=b.showDownloadIcon,F=b.showPreviewIcon,x=b.showRemoveIcon;return y?s(pt,{listType:e.listType,items:h.value,previewFile:l,onPreview:c,onDownload:u,onRemove:D,showRemoveIcon:!p&&x,showPreviewIcon:F,showDownloadIcon:w,removeIcon:a,previewIcon:i,downloadIcon:r,iconRender:g,locale:$.value,isImageUrl:f,progress:v,itemRender:m,appendActionVisible:o,appendAction:t},d({},n)):null==t?void 0:t()};return function(){var t,a,i,r=e.listType,p=e.disabled,f=e.type;o.class,o.style;var v=c(o,ft),m=d(d(d({onBatchStart:I,onError:R,onProgress:P,onSuccess:j},v),e),{},{id:null!==(t=e.id)&&void 0!==t?t:l.id.value,prefixCls:T.value,beforeUpload:k,onChange:void 0});if(delete m.remove,n.default&&!p||delete m.id,"drag"===f){var g,y,b=N(T.value,(u(g={},"".concat(T.value,"-drag"),!0),u(g,"".concat(T.value,"-drag-uploading"),h.value.some((function(e){return"uploading"===e.status}))),u(g,"".concat(T.value,"-drag-hover"),"dragover"===x.value),u(g,"".concat(T.value,"-disabled"),p),u(g,"".concat(T.value,"-rtl"),"rtl"===L.value),g),o.class);return s("span",null,[s("div",{class:b,onDrop:S,onDragover:S,onDragleave:S,style:o.style},[s(Ae,d(d({},m),{},{ref:O,class:"".concat(T.value,"-btn")}),d({default:function(){return[s("div",{class:"".concat(T.value,"-drag-container")},[null===(y=n.default)||void 0===y?void 0:y.call(n)])]}},n))]),W()])}var w=N(T.value,(u(a={},"".concat(T.value,"-select"),!0),u(a,"".concat(T.value,"-select-").concat(r),!0),u(a,"".concat(T.value,"-disabled"),p),u(a,"".concat(T.value,"-rtl"),"rtl"===L.value),a)),F=q(null===(i=n.default)||void 0===i?void 0:i.call(n)),C=function(e){return s("div",{class:w,style:e},[s(Ae,d(d({},m),{},{ref:O}),n)])};return"picture-card"===r?s("span",{class:N("".concat(T.value,"-picture-card-wrapper"),o.class)},[W(C,!(!F||!F.length))]):s("span",{class:o.class},[C(F&&F.length?void 0:{display:"none"}),W()])}}});var gt=["height"],yt=["style"];const ht=a({compatConfig:{MODE:3},name:"AUploadDragger",inheritAttrs:!1,props:Ye(),setup:function(e,t){var n=t.slots,o=t.attrs;return function(){var t=e.height,a=c(e,gt),i=o.style,r=c(o,yt),l=d(d(d({},a),r),{},{type:"drag",style:d(d({},i),{},{height:"number"==typeof t?"".concat(t,"px"):t})});return s(mt,l,n)}}}),bt=$(mt,{Dragger:ht,LIST_IGNORE:vt,install:function(e){return e.component(mt.name,mt),e.component(ht.name,ht),e}}),wt={key:2,class:"bottom-bar flex-between"},Ft={key:0},xt={style:{"margin-top":"8px"}},Ot={key:1},Ct={key:0},kt={key:1,style:{"margin-top":"8px"}},It=["src"],jt=pe(a({__name:"Upload",props:{accept:{default:"image/jpg,image/jpeg,image/png,image/gif"},listType:{default:"picture-card"},showUploadList:{type:Boolean,default:!0},maxCount:{default:1},isUploadWechat:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},isIcon:{type:Boolean,default:!1},name:{default:"file"},filelist:{},placeholder:{default:"上传图片"},onChange:{},limit:{default:void 0}},emits:["update:filelist","onChange"],setup(e,{emit:t}){const n=e,o=i(""),a=i(!1),r=i(!1),l=i([]),c=w((()=>{var e,t;let n=null==(t=null==(e=l.value[0])?void 0:e.url)?void 0:t.toLowerCase();return!(!n||-1===n.indexOf(".jpg")&&-1===n.indexOf(".jpeg")&&-1===n.indexOf(".png")&&-1===n.indexOf(".gif"))}));W((()=>n.filelist),(e=>{1===n.maxCount?l.value=e?[{url:e}]:[]:l.value=e}),{immediate:!0}),W(l,(e=>{var o;1===n.maxCount?t("update:filelist",(null==(o=l.value[0])?void 0:o.url)||""):t("update:filelist",l.value)}),{deep:!0});const u=(e,t)=>{const n=l.value.findIndex((t=>t.url===e)),o="right"===t?n+1:n-1,a=l.value[o];l.value[o]=l.value[n],l.value[n]=a,console.log(l.value)},d=(e,o)=>{if(n.multiple){const t=l.value.concat(o);if(t.slice(n.maxCount,t.length).includes(e))return re.error("超过最大上传数量"),!1}if(!(e=>{if(e.type.includes("amr"))return!0;const t=e.size/1024/1024;let o=n.limit||(e.type.includes("video")?10:1);return!(t>o&&(re.error(`大小不能超过${o}M`),1===n.maxCount?setTimeout((()=>{l.value=[]}),0):setTimeout((()=>{const t=l.value.findIndex((t=>t.uid===e.uid));console.log(t,12345,l.value),l.value.splice(t,1)}),0),1))})(e))return!1;const a=new FormData;return a.append(n.name,e),n.accept.includes("video")&&(r.value=!0),le.common.upload(a,{successText:"上传成功"}).then((async o=>{r.value=!1;const i=o.data;if(1===n.maxCount)l.value=[{url:i.file[0].url}];else{l.value.find((t=>t.uid===e.uid)).url=i.file[0].url}if(n.isUploadWechat){let n="";e.type&&-1!==e.type.indexOf("image")&&(n="image"),e.type&&-1!==e.type.indexOf("video")&&(n="video"),e.type||-1===e.type.indexOf(".amr")||(n="voice");const{data:o}=await le.service.customerService.accessToken({company_id:ce.company_id},{handleSelf:!0}),r=await ue(`post /cgi-bin/media/upload?access_token=${o.access_token}&type=${n}`,a,{handleSelf:!0});r.media_id&&t("onChange",i.file[0].url,e.type,r.media_id)}else t("onChange",i.file[0].url,e.type)})).catch((t=>{var n;r.value=!1;const o=l.value.findIndex((t=>t.uid===e.uid));l.value.splice(o,1),(null==(n=null==t?void 0:t.data)?void 0:n.message)&&re.error(t.data.message)})).finally((()=>{})),!1},p=async e=>{o.value=e.url||e.preview,a.value=!0};return(e,n)=>{const i=ve,f=se,v=bt,m=de;return G(),X("div",null,[s(v,{"file-list":Z(l),"onUpdate:fileList":n[2]||(n[2]=e=>ie(l)?l.value=e:null),"list-type":e.listType,"show-upload-list":e.showUploadList,"before-upload":d,accept:e.accept,multiple:e.multiple,"max-count":e.maxCount,onRemove:n[3]||(n[3]=e=>t("onChange")),onPreview:p},{itemRender:J((({file:e,fileList:t,actions:o})=>[K("div",null,[e.url?(G(),Q(i,{key:0,src:Z(c)?e.url:"https://static.dongjuyigou.com/dev/e1220d0555bcfffe998ed0bca5b0de7d_221111.png",width:104,height:104},{previewMask:J((()=>[K("div",{class:"operate flex-center",onClick:n[1]||(n[1]=Y((()=>{}),["prevent","stop"]))},[Z(c)?(G(),Q(Z(x),{key:0,title:"查看",class:"upload-icon mr16px",onClick:o.preview},null,8,["onClick"])):(G(),Q(Z(x),{key:1,title:"查看",class:"upload-icon mr16px",onClick:n[0]||(n[0]=e=>{var t;window.open(null==(t=l.value[0])?void 0:t.url)})})),s(Z(ge),{title:"删除",class:"upload-icon",onClick:o.remove},null,8,["onClick"]),t.length>1?(G(),X("div",wt,[K("div",null,[C(s(Z(ee),{title:"左移",class:"upload-icon",onClick:t=>u(e.url,"left")},null,8,["onClick"]),[[k,e.url!==t[0].url]])]),K("div",null,[C(s(Z(te),{title:"右移",class:"upload-icon",onClick:t=>u(e.url,"right")},null,8,["onClick"]),[[k,e.url!==t[t.length-1].url]])])])):ne("",!0)])])),_:2},1032,["src"])):(G(),Q(f,{key:1,tip:"图片上传中"}))])])),default:J((()=>[Z(l).length<e.maxCount&&"picture-card"===e.listType?(G(),X("div",Ft,[s(Z(oe)),K("div",xt,ae(e.placeholder),1)])):ne("",!0),(Z(l).length<e.maxCount||!1===e.showUploadList)&&"text"===e.listType?(G(),X("div",Ot,[Z(r)?(G(),X("div",Ct,[s(f,{tip:"视频上传中"})])):e.isIcon?(G(),Q(Z(me),{key:2})):(G(),X("a",kt,ae(e.placeholder),1))])):ne("",!0)])),_:1},8,["file-list","list-type","show-upload-list","accept","multiple","max-count"]),s(m,{visible:Z(a),footer:null,onCancel:n[4]||(n[4]=e=>a.value=!1)},{default:J((()=>[K("img",{alt:"example",style:{width:"100%"},src:Z(o)},null,8,It)])),_:1},8,["visible"])])}}}),[["__scopeId","data-v-24eb03ef"]]);export{jt as _};
