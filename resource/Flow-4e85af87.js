import{d as a,m as e,o as n,$ as t,G as o,a as d,b as i,e as r,w as l,f as c,p,s as u,F as s,q as _,B as y,g,T as m,v as h}from"./index-c2ae2a0e.js";import{u as f,_ as k}from"./useTableColumns-dd067b4d.js";import"./index-c8577ae4.js";import"./index-3f0a4d2e.js";import{_ as b}from"./index-ef11d20c.js";import{u as v,a as C}from"./useSearchItems-c7d75cf3.js";import{u as q}from"./usePagination-c05046ed.js";import"./FolderOpenOutlined-fa174baf.js";import"./tool-d986b095.js";import"./RadioButton-bc4165ed.js";const x=a({__name:"PayInfo",setup(a){const g=v([["input","order_sn","订单号"],["select","trade_type","来源平台"],["input","out_trade_no","支付订单号"],["input","pay_sn","三方流水单号"],["select","channel","支付渠道"],["select","goods_type","订单类型"],["select","pay_type","支付类型"],["select","pay_status","状态"],["dateRange","created_at_start-created_at_end",["提交时间","结束时间"]],["dateRange","pay_at_start-pay_at_end",["支付时间","结束时间"]]]),m=f([["订单号","order_sn"],["来源平台","trade_type_name"],["支付订单号","out_trade_no"],["三方流水单号","pay_sn"],["支付渠道","channel_name"],["订单类型","goods_type_name"],["支付类型","pay_type_name"],["支付金额","total_fee"],["状态","pay_status_name"],["提交时间","created_at"],["支付时间","pay_at"]]),h=e({handlingId:0,dataSource:[],loading:!1,query:{},pagination:q(),selectedRowKeys:[],batchs:[{label:"批量",value:""}]});n((()=>{x()}));const x=()=>{h.loading=!0,t.finance.flow.payInfo({page:h.pagination.current,page_size:h.pagination.pageSize,...h.query}).then((a=>{var e;h.loading=!1,h.dataSource=a.data.items,1===h.pagination.current&&(h.pagination.total=+(null==(e=a.data)?void 0:e.count),C(g,"trade_type",a.data.trade_type_map),C(g,"channel",a.data.channel_map),C(g,"pay_type",a.data.pay_type_map),C(g,"goods_type",a.data.goods_type_map),C(g,"pay_status",a.data.pay_status_map))}))},S=a=>{h.pagination={...h.pagination,...a},x()},w=a=>{h.query=a,h.pagination={...h.pagination,current:1},x()};return(a,e)=>{const n=o("Export"),f=o("Search"),v=b,C=y,q=k;return d(),i("div",null,[r(f,{"search-options":c(g),onOnSearch:w},{default:l((()=>[r(n,{api:c(t).finance.flow.payInfoExport,query:c(h).query},null,8,["api","query"])])),_:1},8,["search-options"]),r(q,{"row-key":"id","data-source":c(h).dataSource,columns:c(m),scroll:{x:"max-content"},loading:c(h).loading,pagination:c(h).pagination,onChange:S},{bodyCell:l((({column:e,record:n})=>["enabled"===e.key?(d(),p(v,{key:0,checked:n.enabled,"onUpdate:checked":a=>n.enabled=a,"un-checked-value":0,"checked-value":1,onChange:a=>(async a=>{await t.product.material.status({id:a.id,enabled:a.enabled}).catch((e=>{a.enabled=0===a.enabled?1:0}))})(n)},null,8,["checked","onUpdate:checked","onChange"])):u("",!0),"operate"===e.key?(d(),i(s,{key:1},[r(C,{type:"link",onClick:a=>{c(h).handlingId=n.id}},{default:l((()=>[_(" 编辑 ")])),_:2},1032,["onClick"]),r(C,{type:"link",danger:"",onClick:e=>a.del(n.id)},{default:l((()=>[_(" 删除 ")])),_:2},1032,["onClick"])],64)):u("",!0)])),_:1},8,["data-source","columns","loading","pagination"])])}}}),S=a({__name:"Refund",setup(a){const g=v([["input","order_sn","订单号"],["select","trade_type","来源平台"],["input","out_refund_no","退款单号"],["input","out_trade_no","支付订单号"],["input","refund_sn","三方流水单号"],["select","channel","支付渠道"],["select","goods_type","订单类型"],["select","pay_type","支付类型"],["select","refund_status","状态"],["dateRange","created_at_start-created_at_end",["退款申请时间","结束时间"]],["dateRange","refund_at_start-refund_at_end",["退款处理时间","结束时间"]]]),m=f([["订单号","order_sn"],["来源平台","trade_type_name"],["退款单号","out_refund_no"],["支付订单号","out_trade_no"],["三方流水单号","refund_sn"],["支付渠道","channel_name"],["订单类型","goods_type_name"],["支付类型","pay_type_name"],["支付金额","total_fee"],["退款金额","refund_fee"],["状态","refund_status_name"],["申请退款时间","created_at"],["退款处理时间","refund_at"]]),h=e({handlingId:0,dataSource:[],loading:!1,query:{},pagination:q(),selectedRowKeys:[]});n((()=>{x()}));const x=()=>{h.loading=!0,t.finance.flow.refund({page:h.pagination.current,page_size:h.pagination.pageSize,...h.query}).then((a=>{var e;h.loading=!1,h.dataSource=a.data.items,1===h.pagination.current&&(h.pagination.total=+(null==(e=a.data)?void 0:e.count),C(g,"trade_type",a.data.trade_type_map),C(g,"channel",a.data.channel_map),C(g,"pay_type",a.data.pay_type_map),C(g,"goods_type",a.data.goods_type_map),C(g,"refund_status",a.data.refund_status_map))}))},S=a=>{h.pagination={...h.pagination,...a},x()},w=a=>{h.query=a,h.pagination={...h.pagination,current:1},x()};return(a,e)=>{const n=o("Export"),f=o("Search"),v=b,C=y,q=k;return d(),i("div",null,[r(f,{"search-options":c(g),onOnSearch:w},{default:l((()=>[r(n,{api:c(t).finance.flow.refundExport,query:c(h).query},null,8,["api","query"])])),_:1},8,["search-options"]),r(q,{"row-key":"id","data-source":c(h).dataSource,columns:c(m),scroll:{x:"max-content"},loading:c(h).loading,pagination:c(h).pagination,onChange:S},{bodyCell:l((({column:e,record:n})=>["enabled"===e.key?(d(),p(v,{key:0,checked:n.enabled,"onUpdate:checked":a=>n.enabled=a,"un-checked-value":0,"checked-value":1,onChange:a=>(async a=>{await t.product.material.status({id:a.id,enabled:a.enabled}).catch((e=>{a.enabled=0===a.enabled?1:0}))})(n)},null,8,["checked","onUpdate:checked","onChange"])):u("",!0),"operate"===e.key?(d(),i(s,{key:1},[r(C,{type:"link",onClick:a=>{c(h).handlingId=n.id}},{default:l((()=>[_(" 编辑 ")])),_:2},1032,["onClick"]),r(C,{type:"link",danger:"",onClick:e=>a.del(n.id)},{default:l((()=>[_(" 删除 ")])),_:2},1032,["onClick"])],64)):u("",!0)])),_:1},8,["data-source","columns","loading","pagination"])])}}}),w=a({__name:"Transfer",setup(a){const g=v([["input","out_trade_no","转账单号"],["input","real_name","转账账户名"],["input","account_no","转账账户号"],["input","pay_sn","三方转账单号"],["select","pay_type","支付渠道"],["select","status","状态"],["dateRange","created_at_start-created_at_end",["转账申请时间","结束时间"]],["dateRange","updated_at_start-updated_at_end",["转账更新时间","结束时间"]]]),m=f([["转账单号","out_trade_no"],["转账账户名","real_name"],["转账账户号","account_no"],["三方转账单号","pay_sn"],["支付渠道","pay_type_name"],["转账金额","money"],["转账手续费金额","xx"],["转账结果备注","remark"],["状态","status_name"],["转账申请时间","created_at"],["转账更新时间","updated_at"]]),h=e({handlingId:0,dataSource:[],loading:!1,query:{},pagination:q(),selectedRowKeys:[]});n((()=>{x()}));const x=()=>{h.loading=!0,t.finance.flow.transfer({page:h.pagination.current,page_size:h.pagination.pageSize,...h.query}).then((a=>{var e;h.loading=!1,h.dataSource=a.data.items,1===h.pagination.current&&(h.pagination.total=+(null==(e=a.data)?void 0:e.count),C(g,"pay_type",a.data.pay_type_map),C(g,"status",a.data.status_map))}))},S=a=>{h.pagination={...h.pagination,...a},x()},w=a=>{h.query=a,h.pagination={...h.pagination,current:1},x()};return(a,e)=>{const n=o("Export"),f=o("Search"),v=b,C=y,q=k;return d(),i("div",null,[r(f,{"search-options":c(g),onOnSearch:w},{default:l((()=>[r(n,{api:c(t).finance.flow.transferExport,query:c(h).query},null,8,["api","query"])])),_:1},8,["search-options"]),r(q,{"row-key":"id","data-source":c(h).dataSource,columns:c(m),scroll:{x:"max-content"},loading:c(h).loading,pagination:c(h).pagination,onChange:S},{bodyCell:l((({column:e,record:n})=>["enabled"===e.key?(d(),p(v,{key:0,checked:n.enabled,"onUpdate:checked":a=>n.enabled=a,"un-checked-value":0,"checked-value":1,onChange:a=>(async a=>{await t.product.material.status({id:a.id,enabled:a.enabled}).catch((e=>{a.enabled=0===a.enabled?1:0}))})(n)},null,8,["checked","onUpdate:checked","onChange"])):u("",!0),"operate"===e.key?(d(),i(s,{key:1},[r(C,{type:"link",onClick:a=>{c(h).handlingId=n.id}},{default:l((()=>[_(" 编辑 ")])),_:2},1032,["onClick"]),r(C,{type:"link",danger:"",onClick:e=>a.del(n.id)},{default:l((()=>[_(" 删除 ")])),_:2},1032,["onClick"])],64)):u("",!0)])),_:1},8,["data-source","columns","loading","pagination"])])}}}),R=a({__name:"Flow",setup(a){const n=e({activeKey:"1"});return(a,e)=>{const t=h,o=m;return d(),i("div",null,[g("div",null,[r(o,{activeKey:c(n).activeKey,"onUpdate:activeKey":e[0]||(e[0]=a=>c(n).activeKey=a)},{default:l((()=>[r(t,{key:"1",tab:"交易流水"},{default:l((()=>[r(x)])),_:1}),r(t,{key:"2",tab:"退款流水"},{default:l((()=>[r(S)])),_:1}),r(t,{key:"3",tab:"转账流水"},{default:l((()=>[r(w)])),_:1})])),_:1},8,["activeKey"])])])}}});export{R as default};
