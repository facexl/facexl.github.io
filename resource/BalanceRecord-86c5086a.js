import{d as a,m as e,o as n,$ as t,G as o,a as s,b as i,e as r,w as l,f as p,g as c,q as d,z as u,s as m}from"./index-c2ae2a0e.js";import{u as g,_ as y}from"./useTableColumns-dd067b4d.js";import"./index-c8577ae4.js";import"./index-3f0a4d2e.js";import{u as _,a as b}from"./useSearchItems-c7d75cf3.js";import{u as f}from"./usePagination-c05046ed.js";import"./FolderOpenOutlined-fa174baf.js";import"./tool-d986b095.js";import"./RadioButton-bc4165ed.js";const h={class:"table-title"},j={class:"danger-color"},x={class:"danger-color"},q=["innerHTML"],S=a({__name:"BalanceRecord",setup(a){const S=_([["input","uid","用户ID"],["input","username","用户名"],["select","type","收支类型"],["select","balance_type","来源系统"],["input","order_sn","来源订单号"],["dateRange","time_start-time_end",["创建时间开始","结束时间"]]]),v=g([["用户ID","uid"],["用户名","username",180],["收支类型","type_name"],["来源系统","balance_type_name"],["来源","order_sn"],["资金(元)","money"],["交易后金额(元)","balance"],["创建时间","created_at"],["操作人","admin_username"],["备注","remark"]]),D=e({handlingId:0,dataSource:[],loading:!1,query:{},pagination:f(),selectedRowKeys:[],allData:{}});n((()=>{k()}));const k=()=>{D.loading=!0,t.finance.balance.list({page:D.pagination.current,page_size:D.pagination.pageSize,...D.query}).then((a=>{var e;D.loading=!1,D.dataSource=a.data.items,a.data.items.forEach((a=>{"+"===a.symbol?a.money=`<span class="danger-color">+${a.money}</span>`:a.money=`<span style="color:green">-${a.money}</span>`})),1===D.pagination.current&&(D.pagination.total=+(null==(e=a.data)?void 0:e.count),b(S,"balance_type",a.data.balance_type_map),b(S,"type",a.data.type_map),D.allData=a.data)}))},I=a=>{D.pagination={...D.pagination,...a},k()},R=a=>{D.query=a,D.pagination={...D.pagination,current:1},k()};return(a,e)=>{const n=o("Export"),g=o("Search"),_=y;return s(),i("div",null,[r(g,{"search-options":p(S),onOnSearch:R},{default:l((()=>[r(n,{api:p(t).finance.balance.export,query:p(D).query},null,8,["api","query"])])),_:1},8,["search-options"]),r(_,{"row-key":"id","data-source":p(D).dataSource,columns:p(v),scroll:{x:"max-content"},loading:p(D).loading,pagination:p(D).pagination,onChange:I},{title:l((()=>[c("div",h,[d(" 符合搜索条件的数据共 "),c("span",j,u(p(D).allData.count),1),d(" 个 总资金 "),c("span",x,u(p(D).allData.total_amount),1),d(" 元 ")])])),bodyCell:l((({column:a,record:e})=>["money"===a.key?(s(),i("div",{key:0,innerHTML:e.money},null,8,q)):m("",!0)])),_:1},8,["data-source","columns","loading","pagination"])])}}});export{S as default};
