import{d as a,m as e,o as n,$ as t,G as o,a as i,b as s,e as r,w as d,f as l,p,s as c,F as u,q as g,B as m}from"./index-c2ae2a0e.js";import{u as y,_ as h}from"./useTableColumns-dd067b4d.js";import"./index-c8577ae4.js";import"./index-3f0a4d2e.js";import{_}from"./index-ef11d20c.js";import{u as k,a as b}from"./useSearchItems-c7d75cf3.js";import{u as f}from"./usePagination-c05046ed.js";import"./FolderOpenOutlined-fa174baf.js";import"./tool-d986b095.js";import"./RadioButton-bc4165ed.js";const j=a({__name:"Recharge",setup(a){const j=k([["input","recharge_sn","充值单号"],["input","uid","用户ID"],["input","username","用户昵称"],["select","pay_type","支付方式"],["dateRange","pay_at_start-pay_at_end",["支付时间","结束时间"]],["select","status","状态"]]),x=y([["充值单号","recharge_sn"],["充值金额（元）","money"],["用户ID","uid"],["用户昵称","username",180],["支付方式","pay_type_name"],["支付时间","pay_at"],["状态","status_name"]]),C=e({handlingId:0,dataSource:[],loading:!1,query:{},pagination:f(),selectedRowKeys:[],batchs:[{label:"批量",value:""}]});n((()=>{q()}));const q=()=>{C.loading=!0,t.finance.recharge.list({page:C.pagination.current,page_size:C.pagination.pageSize,...C.query}).then((a=>{var e;C.loading=!1,C.dataSource=a.data.items,1===C.pagination.current&&(C.pagination.total=+(null==(e=a.data)?void 0:e.count),b(j,"status",a.data.status_map),b(j,"pay_type",a.data.pay_type_map))}))},v=a=>{C.pagination={...C.pagination,...a},q()},S=a=>{C.query=a,C.pagination={...C.pagination,current:1},q()};return(a,e)=>{const n=o("Export"),y=o("Search"),k=_,b=m,f=h;return i(),s("div",null,[r(y,{"search-options":l(j),onOnSearch:S},{default:d((()=>[r(n,{api:l(t).finance.recharge.export,query:l(C).query},null,8,["api","query"])])),_:1},8,["search-options"]),r(f,{"row-key":"id","data-source":l(C).dataSource,columns:l(x),scroll:{x:"max-content"},loading:l(C).loading,pagination:l(C).pagination,onChange:v},{bodyCell:d((({column:e,record:n})=>["enabled"===e.key?(i(),p(k,{key:0,checked:n.enabled,"onUpdate:checked":a=>n.enabled=a,"un-checked-value":0,"checked-value":1,onChange:a=>(async a=>{await t.product.material.status({id:a.id,enabled:a.enabled}).catch((e=>{a.enabled=0===a.enabled?1:0}))})(n)},null,8,["checked","onUpdate:checked","onChange"])):c("",!0),"operate"===e.key?(i(),s(u,{key:1},[r(b,{type:"link",onClick:a=>{l(C).handlingId=n.id}},{default:d((()=>[g(" 编辑 ")])),_:2},1032,["onClick"]),r(b,{type:"link",danger:"",onClick:e=>a.del(n.id)},{default:d((()=>[g(" 删除 ")])),_:2},1032,["onClick"])],64)):c("",!0)])),_:1},8,["data-source","columns","loading","pagination"])])}}});export{j as default};
