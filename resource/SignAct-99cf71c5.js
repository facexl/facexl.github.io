import{d as a,m as e,o as n,$ as t,a as i,b as o,e as d,w as s,f as l,B as r,q as c,p as u,s as p,z as g,F as m}from"./index-c2ae2a0e.js";import{u as k,_ as y}from"./useTableColumns-dd067b4d.js";import"./index-c8577ae4.js";import"./index-3f0a4d2e.js";import{_ as h}from"./index-ef11d20c.js";import{u as f}from"./useSearchItems-c7d75cf3.js";import{u as C}from"./usePagination-c05046ed.js";import{d as b}from"./index-a09a23de.js";import"./FolderOpenOutlined-fa174baf.js";import"./tool-d986b095.js";import"./RadioButton-bc4165ed.js";const _=["onClick"],j=a({__name:"SignAct",setup(a){f([["input","keywords","ID"]]);const j=k([["签到编号","id"],["名称","title"],["签到统计","total"],["签到开始时间","start_at"],["签到结束时间","end_at"],["创建时间","created_at"],["开关","enabled"],["操作","operate",180,"right"]]),x=e({handlingId:0,dataSource:[],loading:!1,query:{},pagination:C(),selectedRowKeys:[],batchs:[{label:"批量",value:""}]});n((()=>{S()}));const S=()=>{x.loading=!0,t.act.sign.list({page:x.pagination.current,page_size:x.pagination.pageSize,...x.query}).then((a=>{var e;x.loading=!1,x.dataSource=a.data.items,1===x.pagination.current&&(x.pagination.total=+(null==(e=a.data)?void 0:e.count))}))},v=a=>{x.pagination={...x.pagination,...a},S()};return(a,e)=>{const n=r,k=h,f=y;return i(),o("div",null,[d(n,{type:"primary",class:"mb8px",style:{float:"right"},onClick:e[0]||(e[0]=e=>a.$router.push({name:"addSignAct"}))},{default:s((()=>[c(" 新建 ")])),_:1}),d(f,{"row-key":"id","data-source":l(x).dataSource,columns:l(j),scroll:{x:"max-content"},loading:l(x).loading,pagination:l(x).pagination,onChange:v},{bodyCell:s((({column:e,record:l})=>["enabled"===e.key?(i(),u(k,{key:0,checked:l.enabled,"onUpdate:checked":a=>l.enabled=a,"un-checked-value":0,"checked-value":1,onChange:a=>(async a=>{await t.act.sign.status({id:a.id,enabled:a.enabled}).catch((e=>{a.enabled=0===a.enabled?1:0}))})(l)},null,8,["checked","onUpdate:checked","onChange"])):p("",!0),"total"===e.key?(i(),o("a",{key:1,href:"javascript::",onClick:e=>a.$router.push({name:"signActSta",query:{id:l.id}})},g(l.total),9,_)):p("",!0),"operate"===e.key?(i(),o(m,{key:2},[d(n,{type:"link",onClick:e=>a.$router.push({name:"addSignAct",query:{id:l.id,isEdit:0}})},{default:s((()=>[c(" 查看 ")])),_:2},1032,["onClick"]),d(n,{type:"link",onClick:e=>a.$router.push({name:"addSignAct",query:{id:l.id,isEdit:1}})},{default:s((()=>[c(" 编辑 ")])),_:2},1032,["onClick"]),d(n,{type:"link",danger:"",onClick:a=>(async a=>{b.confirm({title:"提示",content:"确认删除所选活动?",okText:"确认",cancelText:"取消",async onOk(){await t.act.sign.del({id:a}),S()},onCancel(){}})})(l.id)},{default:s((()=>[c(" 删除 ")])),_:2},1032,["onClick"])],64)):p("",!0)])),_:1},8,["data-source","columns","loading","pagination"])])}}});export{j as default};
